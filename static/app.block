    *

// app main blockfile

// app UI layer
app
    id app
    css
        opacity 0
        transition opacity 0.4s
        width 100%
        height 100%
        margin 0 auto
        box-sizing border-box
        position absolute
        top 0
        left 0

    :ready
        {
            console.log('[block] ready');
        }

    #sign_in_res
        {
            if (sign_in_res.data.token != null) {
                util.cookie('token', `${sign_in_res.data.token}`, '__indefinite__');
            }
            block.data({
                auth_res: {
                    success: sign_in_res.success
                }
            });
        }
    #auth_res
        {
            if (auth_res.success) {
                block.child('login').css('display', 'none');
                block.child('main').css('display', 'block');
                setTimeout(_ => {
                    block.child('main/menu/projects').$().click();
                }, 20);
            } else {
                //console.log('fail');
                block.child('login').css('display', 'table');
                block.child('main').css('display', 'none');
                if (app.ws.api.cookie_login_flag)
                    block.child('login/content/subcontent/error').on('show');
            }
        }

    #new_project_res
        {
            if (new_project_res.success) {
                app.ui.display_modal.new_project_res(`Created project "${new_project_res.data.slug}" (${new_project_res.data.id})`);
            } else {
                app.ui.display_modal.new_project_res(`<span style="color: #a60a0a; opacity: 0.9;">${util.capitalize(new_project_res.message ? new_project_res.message : 'unknown error')}.</span>`);
            }
        }
    #get_projects_res
        {
            if (get_projects_res.success) {
                //console.log(get_projects_res.data.list);
                block.child('main/content/projects').data({
                    project_list: get_projects_res.data.list
                });
            } else {
                app.ui.display_modal.generic_confirm('Load Projects', `Error - ${util.capitalize(get_projects_res.message ? get_projects_res.message : 'unknown error')}`, (result) => {
                    if (result) {
                        setTimeout(_ => {
                            app.ws.api.get_projects();
                        }, 30);
                        return true;
                    }
                });
            }
        }
    #star_project_res
        {
            //console.log(star_project_res.data.id, star_project_res.data.starred);
            block.child('main/content/projects').data({
                star_project: star_project_res.data
            });
        }
    #update_project_res
        {
           var current_project = block.child('main/content/projects/detail').key('project');
           if (current_project && current_project._id == update_project_res.data.id)
               block.child('main/content/projects/detail').on('receive_project_update', update_project_res.data.project);
               block.child('main/content/projects').data({ update_project_local: update_project_res.data.project });
        }
    #delete_project_res
        {
            if (delete_project_res.success === true) {
                block.child('main/content/projects').data({
                    delete_project: delete_project_res.data.id
                });
            }
        }

    #new_resource_res
        {
            if (new_resource_res.success) {
                app.ui.display_modal.new_resource_res(`Created resource "${new_resource_res.data.slug}" (${new_resource_res.data.id})`);
            } else {
                app.ui.display_modal.new_resource_res(`<span style="color: #a60a0a; opacity: 0.9;">${util.capitalize(new_resource_res.message ? new_resource_res.message : 'unknown error')}.</span>`);
            }
        }
    #get_resources_res
        {
            if (get_resources_res.success) {
                //console.log(get_resources_res.data.list);
                block.child('main/content/resources').data({
                    resource_list: get_resources_res.data.list
                });
            } else {
                app.ui.display_modal.generic_confirm('Load Resources', `Error - ${util.capitalize(get_resources_res.message ? get_resources_res.message : 'unknown error')}`, (result) => {
                    if (result) {
                        setTimeout(_ => {
                            app.ws.api.get_resources();
                        }, 30);
                        return true;
                    }
                });
            }
        }
    #update_resource_res
        {
           var current_resource = block.child('main/content/resources/detail').key('resource');
           if (current_resource && current_resource._id == update_resource_res.data.id)
               block.child('main/content/resources/detail').on('receive_resource_update', update_resource_res.data.resource);
               block.child('main/content/resources').data({ update_resource_local: update_resource_res.data.resource });
        }
    #delete_resource_res
        {
            if (delete_resource_res.success === true) {
                block.child('main/content/resources').data({
                    delete_resource: delete_resource_res.data.id
                });
            }
        }


    div background
        css
            position absolute
            top 0
            left 0
            width 100%
            height 100%
            box-sizing border-box
            margin 0
            padding 0
            background-image url(img/gear_bg.jpg)
            background-position top right
            background-size auto
            background-repeat repeat
            background-attachment fixed
            opacity 0.05

    block login
        css
            display table
        block content
            css
                height 90%
                width 85%
                max-height 400px
                max-width 490px
                margin 0 auto
                border-radius 8px
                opacity 0.95
                position relative
                // // #1da1f2 #51afe8 #DB2B39 rgba(219, 43, 58, 0.9)
                // -webkit-box-shadow 0px 1px 4px 1px rgba(10,10,10,0.3)
                // -moz-box-shadow 0px 1px 4px 1px rgba(10,10,10,0.3)
                // box-shadow 0px 1px 4px 1px rgba(10,10,10,0.3)
            {
                // block.css("background-color", app.ui.colors.primary);
            }
            block background
                css
                    position absolute
                    top -34px
                    left 0
                    z-index 1
                image image
                    src img/gear_l_b_2-new.png
                    height 460px
                    width 460px
                    css
                        margin 0 auto
                        pointer-events none
                        opacity 0.9
                    {
                        var classname = "";
                        classname += `rotating${util.rand_int(6, 8)}`;
                        classname += (util.rand_int(0, 1) == 0) ? "_n" : "";
                        block.class(`${classname}`);
                    }
                    #color
                        {
                            //console.log(color);
                            //block.css("filter", `brightness(0.65) sepia() saturate(2500%) hue-rotate(${color}deg)`);
                            //block.css("filter", `brightness(0.85)`);
                        }
                    //{
                    //    block.data({
                    //        color: 90
                    //    });
                    //}
            div subcontent
                css
                    text-align center
                    height 250px
                    width 210px
                    margin 7px auto 0
                    position relative
                    z-index 2
                text text
                    val Dash
                    css
                        font-size 80px
                        margin 110px 0 35px 0
                        color white
                        display block
                        font-weight 400
                input password
                    type password
                    placeholder ******
                    css
                        display block
                        text-align center
                        box-sizing border-box
                        width 190px
                        height 35px
                        padding 5px 10px
                        font-size 18px
                        margin 10px auto 5px auto
                        border none
                        outline none
                        border-radius 3px
                        color #444
                        letter-spacing 0.4px
                        font-weight 300
                    :keyup
                        {
                            if (event.keyCode && event.keyCode == 13) {
                                block.sibling("submit").$().click();
                            }
                        }
                button submit
                    class subbutton
                    css
                        display block
                        text-align center
                        box-sizing border-box
                        width 190px
                        height 35px
                        padding 5px 10px
                        font-size 18px
                        cursor pointer
                        margin 2px auto 5px auto
                        border none
                        outline none
                        border-radius 3px
                        color #333
                        letter-spacing 0.4px
                        font-weight 300
                    text text
                        val enter
                    :click
                        {
                            var val = block.sibling("password").$().val();
                            if (val != null && (`${val}`).trim() != "") {
                                val = (`${val}`).trim();
                                app.ws.api.login(val);
                            }
                        }
                text error
                    val incorrect
                    css
                        margin 0
                        opacity 0
                        font-size 20px
                        color white
                        display block
                        font-weight 600
                        font-style italic
                        letter-spacing 0.7px
                        transition opacity 0.1s ease
                    :show
                        css
                            opacity 0.95
                    :hide
                        css
                            opacity 0
                
    div main
        css
            display none
            height 100%
            width 100%
            overflow hidden
        div bar
            css
                box-shadow rgba(50, 50, 50, 0.3) 0px 2px 4px
                width 100%
                position fixed
                left 0
                top 0
                height 72px
                opacity 0.985
                z-index 101
                cursor crosshair
            {
                block.css("background-color", app.ui.colors.primary);
            }
            block icon
                css
                    width 70px
                    margin-left 33px
                    margin-right 16px
                    float left
                    cursor crosshair
                //class mdc-touch-target-wrapper
                //button button
                    //css
                    //    height 54px
                    //    width 54px
                    //    margin 0 auto
                    //    position relative
                    //class mdc-button mdc-button--touch
                    //span ripple
                    //    class mdc-button__ripple
                    //span touch
                    //    class mdc-button__touch
                block wrapper
                    image image
                        src img/cloud_3_b.png
                        height 54px
                        width 54px
                    css
                        filter invert(1)
            block title
                css
                    width 200px
                    float left
                text text
                    val Dash
                    css
                        font-size 49px
                        margin 0
                        color white
                        display block
                        font-weight 400
                        text-align left
                        margin-bottom 1px
                        cursor crosshair
            block logout
                css
                    width 70px
                    height 100%
                    top 0
                    right 10px
                    position absolute
                div img
                    css
                        height 45px
                        width 45px
                        opacity 1
                        cursor pointer
                        transition opacity 0.1s ease
                        margin 0 auto
                    image power
                        src img/power_w.png
                        height 45px
                        width 45px
                    :mouseover
                        css
                            opacity 0.9
                    :mouseout
                        css
                            opacity 1
                    :click
                        {
                            app.ws.api.logout();
                        }
        div menu
            css
                top 0
                left 0
                width 312px 
                //width 343px
                height 100%
                background-color white
                border-right none
                position fixed
                box-shadow 1.5px 0px 4.5px 1px rgba(10,10,10,0.04)
                padding-top 70px
                box-sizing border-box
            menu-item projects
                val Projects
                icon project_b.svg
                icon_size 26px
                //icon dashboard_l_b.png
                :second_click
                    {
                        var projects_block = block.parent().sibling('content').child('projects');
                        if (projects_block.key('active_view') == 'detail') 
                            projects_block.child('close/close_button').on('click');
                    }
            menu-item applications
                val Applications
                icon tree_b.png
            menu-item resources
                val Resources
                icon board_b.png
                :second_click
                    {
                        var projects_block = block.parent().sibling('content').child('resources');
                        if (projects_block.key('active_view') == 'detail')
                            projects_block.child('close/close_button').on('click');
                    }
            menu-item domains
                val Domains
                icon globe_b.png
            menu-item ideas
                val Ideas
                icon lightbulb_b.png
        div content
            css
                padding-left 1px
                padding-top 75px
                text-align left
            $padding+ 20
            @query window width != 0
                {
                    var padding_plus = parseInt(block.key('padding+'));
                    block.css('padding-left', (block.sibling('menu').$().width() + padding_plus) + 'px');
                    block.css('padding-right', (5 + padding_plus) + 'px');
                }
            
            div projects
                $active_view content
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            //Block.queries();
                        }, 2);
                        setTimeout(_ => {
                            app.ws.api.get_projects();
                        }, 10);
                    }
                :hide
                    css
                        display none
                #project_list
                    {
                        project_list = project_list.sort(util.sort_compare_newest_first);
                        block.key('project_list', project_list);

                        block.child('content').html('');
                        for (var p in project_list) {
                            var project_block_new = Block('project-item', `project_${project_list[p]._id.toString()}`).data(project_list[p]).key('project_metadata', project_list[p]);
                            block.child('content').add(project_block_new);
                        }
                        if (project_list.length > 2)
                            block.child('content').css('text-align', 'center');
                        else block.child('content').css('text-align', 'left');
                        if (project_list.length == 0) {
                            var msg = 'No projects found.';
                            block.child('content').html(`<div style="margin: 0 auto; text-align: center; padding-top: 2px;"><span class="noItemsMessage">${msg}</span></div>`);
                        }
                        //Block.queries();
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                window.componentHandler.upgradeDom();
                            }, 10);
                        }, 10);
                    }
                #star_project
                    {
                        var ch = block.child(`content/project_${star_project.id}`);
                        if (ch)
                            ch.data({
                                featured: star_project.starred
                            });
                        block.data({
                            update_project_field_local: {
                                id: star_project.id,
                                field: 'featured',
                                val: star_project.starred
                            }
                        });
                        /*
                        var current_project_info = block.child('detail').key('project');
                        if (current_project_info && star_project.id == current_project_info._id) {
                            current_project_info.featured = star_project.starred;
                            block.data({
                                update_project_local: current_project_info
                            });
                        }
                        */
                    }
                #select_project
                    {
                        block.key('active_view', 'detail');
                        block.child('content').css('display', 'none')
                            .sibling('detail').css('display', 'block')
                            .data({ project: select_project })
                        ;
                        block.child('title').data({ select_project_name: `${select_project.name}` });
                        block.child('new_project_button').css('display', 'none');
                        block.child('project_filter').css('display', 'none');
                        block.child('close').on('show');
                        block.child('detail').on('update_grid');
                        setTimeout(_ => {
                            Block.queries();
                        }, 10);
                    }
                :deselect_project
                    {
                        block.key('active_view', 'content');
                        block.child('detail').css('display', 'none')
                            .sibling('content').css('display', 'block')
                        ;
                        block.child('title').on('back');
                        block.child('new_project_button').css('display', 'inline-block');
                        block.child('project_filter').css('display', 'block');
                        block.child('close').on('hide');
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                window.componentHandler.upgradeDom();
                            }, 10);
                        }, 5);
                    }
                #update_project_local
                    {
                        //console.log('update_project_local', update_project_local);
                        var project_list = block.key('project_list');
                        for (var p in project_list) {
                            if (project_list[p]._id == update_project_local._id) {
                                project_list[p] = update_project_local;
                                break;
                            }
                        }
                        block.data({
                            project_list: project_list
                        });
                    }
                #update_project_field_local
                    {
                        //console.log('update_project_field_local', update_project_field_local);
                        var project_list = block.key('project_list');
                        for (var p in project_list) {
                            if (project_list[p]._id == update_project_field_local.id) {
                                project_list[p][update_project_field_local.field] = update_project_field_local.val;
                                break;
                            }
                        }
                        block.data({
                            project_list: project_list
                        });
                    }
                #delete_project
                    {
                        var project_info = block.child('detail').key('project');
                        if (project_info && project_info._id == delete_project) {
                            block.child('close/close_button').on('click');
                            setTimeout(_ => {
                                app.ws.api.get_projects();
                            }, 20);
                        }
                    }
                button new_project_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                        transition opacity 0.2s ease
                    class mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                            css
                                font-family Source Sans Pro
                                font-size 24px
                    :click
                        {
                            app.ui.display_modal.new_project();
                        }
                    {
                        block.css("background-color", app.ui.colors.primary);
                    }
                div project_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Projects
                    #select_project_name
                        {
                            block.child('text').html(`Projects&nbsp;&nbsp;/&nbsp;&nbsp;<span class='b600'>${select_project_name}</span>`);
                        }
                    :back
                        {
                            block.child('text').html('').data('Projects');
                            event.stopPropagation();
                        }
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.7
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                block close
                    css
                        height 40px
                        width 40px
                        position absolute
                        top 29px
                        right 12px
                        display none
                        pointer-events none
                        z-index 50
                    :hide
                        css 
                            display none
                            pointer-events none
                        {
                            event.stopPropagation();
                        }
                    :show
                        css
                            display table
                            pointer-events auto
                        {
                            event.stopPropagation();
                        }
                    button close_button
                        css
                            width 24px
                            heigth 24px
                            border none
                            background-color rgba(255, 255, 255, 0)
                            outline none
                            opacity 0.32
                            cursor pointer
                            border-radius 100%
                            transition opacity 0.2s ease
                        :mouseover
                            css
                                opacity 0.68
                        :mouseout
                            css
                                opacity 0.32
                        :click
                            {
                                block.parent().sibling('detail').on('hide_editors');
                                setTimeout(_ => {
                                    block.parent(1).on('deselect_project');
                                }, 10);
                            }
                        image x
                            src /img/x_b.png
                            height 24px
                            width 24px
                div content
                    css
                        width 100%
                        height auto
                        text-align center
                        padding-top 15px
                        padding-left 10px
                        padding-right 10px
                        box-sizing border-box
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                        }
                div detail
                    css
                        width 100%
                        height auto
                        text-align left
                        padding-top 0
                        padding-left 2px
                        padding-right 0
                        box-sizing border-box
                        display none
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    $reload_grid yes
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                            if (block.key('reload_grid') === 'yes') {
                                block.key('reload_grid', 'no');
                                block.on('update_grid');
                                setTimeout(_ => {
                                    block.key('reload_grid', 'yes');
                                }, 100);
                            }
                        }
                    :update_grid
                        {
                            //console.log('update_grid');
                            // set up masonry grid
                            $('div.masonry-grid-container').masonry({
                                // options
                                itemSelector: 'div.masonry-grid-container div.dashboard_detail_section',
                                columnWidth: 455
                            });
                            event.stopPropagation();
                        }
                    #project
                        {
                            block.key('project', project);
                            block.data({
                                name: project.name,
                                slug: project.slug,
                                tagline: project.tagline,
                                description: project.description,
                                public: project.public,
                                featured: project.featured,
                                link: project.link,
                                img: project.img,
                                img_invert: project.img_invert,
                                repo: project.repo,
                                docs: project.docs
                            });
                        }
                    #name
                        {
                            block.child('subcontent/project_info/name/value/text').html('').data(`${name}`);
                            block.child('subcontent/project_info/name/value_editor').attribute('value', `${name}`);
                            block.sibling('title').data({
                                select_project_name: `${name}`
                            });
                        }
                    #slug
                        {
                            block.child('subcontent/project_info/slug/value/text').html('').data(`${slug}`);
                            block.child('subcontent/project_info/slug/value_editor').attribute('value', `${slug}`);
                        }
                    #tagline
                        {
                            var tagline_alt = tagline;
                            if (tagline_alt == '') tagline_alt = '<span class="text_placeholder">Lorem ipsum dolor sit amet</span>';
                            block.child('subcontent/project_info/tagline/value/text').html(`${tagline_alt}`);
                            block.child('subcontent/project_info/tagline/value_editor').attribute('value', `${tagline}`);
                        }
                    #description
                        {
                            var description_alt = description;
                            if (description_alt == '') description_alt = '<span class="text_placeholder">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span>';
                            block.child('subcontent/project_info/description/value/text').html(`${description_alt}`);
                            block.child('subcontent/project_info/description/value_editor').attribute('value', `${description}`);
                        }
                    #public
                        {
                            block.child('subcontent/project_info/public/value/switch').data({
                                val: public === true ? 'on' : 'off'
                            });
                        }
                    #featured
                        {
                            block.child('subcontent/project_info/featured/value/switch').data({
                                val: featured === true ? 'on' : 'off'
                            });
                        }
                    #link
                        {
                            var link_alt = link;
                            var link_alt_alt = link_alt;
                            if (link_alt == '') {
                                link_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">offline</span>';
                                link_alt_alt = '#';
                                block.child('subcontent/project_info/link/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/project_info/link/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                                var length_limit = 37;
                                if (link_alt.length > length_limit) link_alt = link_alt.substring(0, length_limit - 2) + '...';
                            }
                            block.child('subcontent/project_info/link/value/text').html(`${link_alt}`).attribute('href', `${link_alt_alt}`);
                            block.child('subcontent/project_info/link/value_editor').attribute('value', `${link}`); 
                        }
                    #img
                        {
                            block.child('subcontent/project_info/image').data({
                                update: img ? (`${img}`).trim() : ''
                            });
                        }
                    #img_invert
                        {
                            block.child('subcontent/project_info/image').data({
                                update_invert: img_invert
                            });
                        }
                    #repo
                        {
                            //console.log(repo);
                            var repo_alt = repo;
                            var repo_alt_alt = repo_alt;
                            if (repo_alt == '') {
                                repo_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                repo_alt_alt = '#';
                                block.child('subcontent/project_code/repo/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/project_code/repo/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                                var length_limit = 37;
                                if (repo_alt.length > length_limit) repo_alt = repo_alt.substring(0, length_limit - 2) + '...';
                            }
                            block.child('subcontent/project_code/repo/value/text').html(`${repo_alt}`).attribute('href', `${repo_alt_alt}`);
                            block.child('subcontent/project_code/repo/value_editor').attribute('value', `${repo}`); 
                        }
                    #docs
                        {
                            var docs_alt = docs;
                            var docs_alt_alt = docs_alt;
                            if (docs_alt == '') {
                                docs_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                docs_alt_alt = '#';
                                block.child('subcontent/project_code/docs/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/project_code/docs/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                                var length_limit = 37;
                                if (docs_alt.length > length_limit) docs_alt = docs_alt.substring(0, length_limit - 2) + '...';
                            }
                            block.child('subcontent/project_code/docs/value/text').html(`${docs_alt}`).attribute('href', `${docs_alt_alt}`);
                            block.child('subcontent/project_code/docs/value_editor').attribute('value', `${docs}`); 
                        }
                    :hide_editors
                        {
                            //setTimeout(_ => {
                                block.child('subcontent/project_info/name/value_editor').on('hide');
                                block.child('subcontent/project_info/slug/value_editor').on('hide');
                                block.child('subcontent/project_info/tagline/value_editor').on('hide');
                                block.child('subcontent/project_info/description/value_editor').on('hide');
                                block.child('subcontent/project_info/link/value_editor').on('hide');
                                block.child('subcontent/project_code/repo/value_editor').on('hide');
                                block.child('subcontent/project_info/more_menu').on('hide');
                            //}, 200);
                        }
                    :receive_project_update
                        {
                            var old_data = block.key('project');
                            var new_data = data;
                            if (old_data.name != new_data.name) {
                                block.data({ name: new_data.name, });
                                block.child('subcontent/project_info/name/value_editor').on('hide');
                            }
                            if (old_data.slug != new_data.slug) {
                                block.data({ slug: new_data.slug, });
                                block.child('subcontent/project_info/slug/value_editor').on('hide');
                            }
                            if (old_data.tagline != new_data.tagline) {
                                block.data({ tagline: new_data.tagline, });
                                block.child('subcontent/project_info/tagline/value_editor').on('hide');
                            }
                            if (old_data.description != new_data.description) {
                                block.data({ description: new_data.description, });
                                block.child('subcontent/project_info/description/value_editor').on('hide');
                            }
                            if (old_data.public != new_data.public) {
                                block.data({ public: new_data.public });
                            }
                            if (old_data.featured != new_data.featured) {
                                block.data({ featured: new_data.featured });
                            }
                            if (old_data.link != new_data.link) {
                                block.data({ link: new_data.link, });
                                block.child('subcontent/project_info/link/value_editor').on('hide');
                            }
                            if (old_data.img != new_data.img) {
                                block.data({ img: new_data.img, });
                            }
                            if (old_data.img_invert != new_data.img_invert) {
                                block.data({ img_invert: new_data.img_invert, });
                            }
                            if (old_data.repo != new_data.repo) {
                                block.data({ repo: new_data.repo, });
                                block.child('subcontent/project_code/repo/value_editor').on('hide');
                            }
                            if (old_data.docs != new_data.docs) {
                                block.data({ docs: new_data.docs, });
                                block.child('subcontent/project_code/docs/value_editor').on('hide');
                            }
                            block.key('project', new_data);
                        }
                    :send_project_update
                        {
                            app.ws.api.update_project(block.key('project')._id, data);
                            event.stopPropagation();
                        }
                    :delete_project
                        {
                            //console.log('delete_project');
                            var project_info = block.key('project');
                            if (project_info) {
                                app.ui.display_modal.generic_confirm("Delete Project", `Permanently delete project "${project_info.name}"?`, (result) => {
                                    if (result) {
                                        var confirm = window.confirm(`This action is not reversible â€” are you sure about deleting project "${project_info.name}"?`);
                                        if (confirm) {
                                            setTimeout(_ => {
                                                app.ws.api.delete_project(project_info._id);
                                            }, 30);
                                        }
                                        return true;
                                    }
                                });
                            }
                            event.stopPropagation();
                        }
                    div subcontent
                        class masonry-grid-container
                        css
                            padding 1px 1px
                        div project_info
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Project
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/project_b.svg
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div name
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Name
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val Project Zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        // this is an edit button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                //block.parent(2).data('');
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                //console.log(block.parent(4).key('project').name);
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').name;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Project Zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        name: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div slug
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Identifier
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val project-zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').slug;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder project-zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        slug: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div tagline
                                class value_edge
                                text label
                                    val Tagline
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    text text
                                        val Lorem ipsum dolor sit amet
                                        class value_text
                                        css
                                            font-size 20px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').tagline;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Lorem ipsum dolor sit amet
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        tagline: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div description
                                class value_edge
                                text label
                                    val Description
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                                        class value_text
                                        css
                                            font-size 17px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').description;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 17px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        description: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div public
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Visibility
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Public
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                minWidth: '55px',
                                                marginRight: '6px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Public' : 'Private') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_project_update', {
                                                    public: value
                                                });
                                                event.stopPropagation();
                                            }
                            div featured
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Featured
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Promoted
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                minWidth: '75px',
                                                marginRight: '6px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Promoted' : 'Standard') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_project_update', {
                                                    featured: value
                                                });
                                                event.stopPropagation();
                                            }
                            div link
                                class value_edge
                                text label
                                    val Demo
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://projectzero.anuv.me
                                        href https://projectzero.anuv.me
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').link;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://projectzero.anuv.me
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        letter-spacing normal
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        link: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                            block image
                                css
                                    height 130px
                                    width 130px
                                    position absolute
                                    top 80px
                                    right 40px
                                    border-radius 7px
                                    opacity 0.99
                                    transition opacity 0.2s ease
                                    cursor pointer
                                    -webkit-box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                    box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                #update
                                    {
                                        block.key('img_path', update);
                                        var data = {
                                            src: '/img/gear_bg.jpg',
                                            css: {
                                                opacity: '0.75'
                                            }
                                        };
                                        if (update && update.trim() != '') {
                                            //console.log(update);
                                            data.src = update;
                                            data.css.opacity = '0.97';
                                        }
                                        block.child('img').data(data);
                                    }
                                #update_invert
                                    {
                                        block.key('img_invert', update_invert);
                                        block.child('edit').css({
                                            'filter': update_invert ? 'invert()' : 'none'
                                        });
                                        block.key('edit_opacity', update_invert ? '1' : '0.6');
                                    }
                                $edit_opacity 0.95
                                :mouseover
                                    css
                                        opacity 0.94
                                    {
                                        block.child('edit').css('opacity', block.key('edit_opacity'));
                                    }
                                :mouseout
                                    css
                                        opacity 0.99
                                    edit
                                        css
                                            opacity 0
                                :click
                                    {
                                        var url = '';
                                        if (block.key('img_path'))
                                            url = block.key('img_path');
                                        app.ui.display_modal.edit_project_image(block.parent(2).key('project')._id.toString(), url, block.key('img_invert'));
                                    }
                                image img
                                    src /img/gear_bg.jpg
                                    height 130px
                                    width 130px
                                    css
                                        border-radius 7px
                                        position absolute
                                        top 0
                                        left 0
                                        opacity 0.9
                                image edit
                                    src /img/edit_b.png
                                    height 25px
                                    width 25px
                                    css
                                        margin 0 auto
                                        position relative
                                        z-index 100
                                        opacity 0
                                        transition opacity 0.15s ease
                            block more_menu_button_wrap
                                css
                                    position absolute
                                    height 40px
                                    width 40px
                                    top 20px
                                    right 22px
                                button more_menu_button
                                    css
                                        outline none
                                        border none
                                        background-color rgba(255,255,255,0)
                                        height 33px
                                        width 33px
                                        margin 0 auto
                                        opacity 0.65
                                        padding 0
                                        display block
                                    image img
                                        src /img/more_b.png
                                        height 33px
                                        width 33px
                                        css
                                            margin 0 auto
                                    :click
                                        {
                                            block.parent().sibling('more_menu').on('toggle');
                                        }
                                    :mouseover
                                        css
                                            opacity 0.8
                                    :mouseout
                                        css
                                            opacity 0.65
                            div more_menu
                                $showing no
                                :toggle
                                    {
                                        if (block.key('showing') === 'yes') {
                                            block.on('hide');
                                        } else {
                                            block.on('show');
                                        }
                                    }
                                :show
                                    {
                                        block.key('showing', 'yes');
                                        block.css({ display: 'block' });
                                        event.stopPropagation();
                                    }
                                :hide
                                    {
                                        block.key('showing', 'no');
                                        block.css({ display: 'none' });
                                        event.stopPropagation();
                                    }
                                css
                                    position absolute
                                    height 90px
                                    width 85px
                                    top 0
                                    right -86px
                                    border-radius 4px
                                    border 1px solid #efefef
                                    background-color white
                                    display none
                                    -webkit-box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    font-size 12.5px
                                    letter-spacing 0.8px
                                    opacity 0.98
                                    z-index 200
                                div menu-item-1
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                        border-radius 4px 4px 0 0
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Lorem
                                        :click
                                            {
                                                console.log('Lorem');
                                            }
                                div menu-item-2
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Ipsum
                                        :click
                                            {
                                                console.log('Ipsum');
                                            }
                                div menu-item-3
                                    css
                                        height 30px
                                        border-bottom none
                                        box-sizing border-box
                                        border-radius 0 0 4px 4px
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                            color rgb(209, 36, 36)
                                        html Delete
                                        :click
                                            {
                                                //console.log('Delete');
                                                block.parent(4).on('delete_project');
                                            }
                        div project_apps
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Applications
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/tree_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div repo
                                css
                                    display none
                                class value_edge
                                text label
                                    val Repo
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://github.com/u/projectzero
                                        href https://github.com/u/projectzero
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').repo;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://github.com/u/projectzero
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                        letter-spacing normal
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        repo: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                        div project_code
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Code
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/code_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                        height 80px
                            div repo
                                class value_edge
                                text label
                                    val Repo
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://github.com/u/projectzero
                                        href https://github.com/u/projectzero
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').repo;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://github.com/u/projectzero
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                        letter-spacing normal
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        repo: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div docs
                                class value_edge
                                text label
                                    val Docs
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://projectzero.anuv.me/docs
                                        href https://projectzero.anuv.me/docs
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').docs;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://projectzero.anuv.me/docs
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                        letter-spacing normal
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        docs: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                        div project_domains
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Domains
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/globe_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div repo
                                css
                                    display none
                                class value_edge
                                text label
                                    val Repo
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://github.com/u/projectzero
                                        href https://github.com/u/projectzero
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                            div end_spacer
                                css
                                    height 15px

            div applications
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            app.ws.api.get_applications();
                        }, 20);
                    }
                :hide
                    css
                        display none
                button new_domain_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                    class mdl-button mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                    {
                        block.css("background-color", app.ui.colors.primary);
                    }
                div domain_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Applications
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.75
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                div content
                    css
                        width 100%
                        height auto
            
            div domains
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            app.ws.api.get_domains();
                        }, 20);
                    }
                :hide
                    css
                        display none
                button new_domain_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                    class mdl-button mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                    {
                        block.css("background-color", app.ui.colors.primary);
                    }
                div domain_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Domains
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.75
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                div content
                    css
                        width 100%
                        height auto
            
            div resources
                $active_view content
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            app.ws.api.get_resources();
                        }, 20);
                    }
                :hide
                    css
                        display none
                #resource_list
                    {
                        resource_list = resource_list.sort(util.sort_compare_newest_first);
                        block.key('resource_list', resource_list);

                        block.child('content').html('');
                        for (var r in resource_list) {
                            var resource_block_new = Block('resource-item', `resource_${resource_list[r]._id.toString()}`).data(resource_list[r]).key('resource_metadata', resource_list[r]);
                            block.child('content').add(resource_block_new);
                        }
                        if (resource_list.length > 2)
                            block.child('content').css('text-align', 'center');
                        else block.child('content').css('text-align', 'left');
                        if (resource_list.length == 0) {
                            var msg = 'No resources found.';
                            block.child('content').html(`<div style="margin: 0 auto; text-align: center; padding-top: 2px;"><span class="noItemsMessage">${msg}</span></div>`);
                        }
                        Block.queries();
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                window.componentHandler.upgradeDom();
                            }, 10);
                        }, 10);
                    }
                #select_resource
                    {
                        //console.log(select_resource);
                        block.key('active_view', 'detail');
                        block.child('content').css('display', 'none')
                            .sibling('detail').css('display', 'block')
                            .data({ resource: select_resource })
                        ;
                        block.child('title').data({ select_resource_name: `${select_resource.name}` });
                        block.child('new_resource_button').css('display', 'none');
                        block.child('resource_filter').css('display', 'none');
                        block.child('close').on('show');
                        block.child('detail').on('update_grid');
                        setTimeout(_ => {
                            Block.queries();
                        }, 10);
                    }
                :deselect_resource
                    {
                        block.key('active_view', 'content');
                        block.child('detail').css('display', 'none')
                            .sibling('content').css('display', 'block')
                        ;
                        block.child('title').on('back');
                        block.child('new_resource_button').css('display', 'inline-block');
                        block.child('resource_filter').css('display', 'block');
                        block.child('close').on('hide');
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                window.componentHandler.upgradeDom();
                            }, 10);
                        }, 5);
                    }
                #update_resource_local
                    {
                        //console.log('update_resource_local', update_resource_local);
                        var resource_list = block.key('resource_list');
                        for (var r in resource_list) {
                            if (resource_list[r]._id == update_resource_local._id) {
                                resource_list[r] = update_resource_local;
                                break;
                            }
                        }
                        block.data({
                            resource_list: resource_list
                        });
                    }
                #update_resource_field
                    {
                        //console.log('update_resource_field', update_resource_field);
                        var resource_list = block.key('resource_list');
                        for (var r in resource_list) {
                            if (resource_list[r]._id == update_resource_field.id) {
                                resource_list[r][update_resource_field.field] = update_resource_field.val;
                                break;
                            }
                        }
                        block.data({
                            resource_list: resource_list
                        });
                    }
                #delete_resource
                    {
                        var resource_info = block.child('detail').key('resource');
                        if (resource_info && resource_info._id == delete_resource) {
                            block.child('close/close_button').on('click');
                            setTimeout(_ => {
                                app.ws.api.get_resources();
                            }, 20);
                        }
                    }
                
                button new_resource_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                    class mdl-button mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                    :click
                        {
                            app.ui.display_modal.new_resource();
                        }
                    {
                        block.css("background-color", app.ui.colors.primary);
                    }
                div resource_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Resources
                    #select_resource_name
                        {
                            block.child('text').html(`Resources&nbsp;&nbsp;/&nbsp;&nbsp;<span class='b600'>${select_resource_name}</span>`);
                        }
                    :back
                        {
                            block.child('text').html('').data('Resources');
                            event.stopPropagation();
                        }
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.7
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                block close
                    css
                        height 40px
                        width 40px
                        position absolute
                        top 29px
                        right 12px
                        display none
                        pointer-events none
                        z-index 50
                    :hide
                        css 
                            display none
                            pointer-events none
                        {
                            event.stopPropagation();
                        }
                    :show
                        css
                            display table
                            pointer-events auto
                        {
                            event.stopPropagation();
                        }
                    button close_button
                        css
                            width 24px
                            heigth 24px
                            border none
                            background-color rgba(255, 255, 255, 0)
                            outline none
                            opacity 0.32
                            cursor pointer
                            border-radius 100%
                            transition opacity 0.2s ease
                        :mouseover
                            css
                                opacity 0.68
                        :mouseout
                            css
                                opacity 0.32
                        :click
                            {
                                block.parent().sibling('detail').on('hide_editors');
                                setTimeout(_ => {
                                    block.parent(1).on('deselect_resource');
                                }, 15);
                            }
                        image x
                            src /img/x_b.png
                            height 24px
                            width 24px
                div content
                    css
                        width 100%
                        height auto
                        text-align center
                        padding-top 15px
                        padding-left 10px
                        padding-right 10px
                        box-sizing border-box
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                        }
                div detail
                    css
                        width 100%
                        height auto
                        text-align left
                        padding-top 0
                        padding-left 2px
                        padding-right 0
                        box-sizing border-box
                        display none
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    $reload_grid yes
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                            if (block.key('reload_grid') === 'yes') {
                                block.key('reload_grid', 'no');
                                block.on('update_grid');
                                setTimeout(_ => {
                                    block.key('reload_grid', 'yes');
                                }, 100);
                            }
                        }
                    :update_grid
                        {
                            //console.log('update_grid');
                            // set up masonry grid
                            $('div.masonry-grid-container').masonry({
                                // options
                                itemSelector: 'div.masonry-grid-container div.dashboard_detail_section',
                                columnWidth: 455
                            });
                            event.stopPropagation();
                        }
                    #resource
                        {
                            block.key('resource', resource);
                            block.data({
                                name: resource.name,
                                slug: resource.slug,
                                link: resource.link,
                                specs: resource.specs,
                                ip: resource.ip
                            });
                        }
                    #name
                        {
                            block.child('subcontent/resource_info/name/value/text').html('').data(`${name}`);
                            block.child('subcontent/resource_info/name/value_editor').attribute('value', `${name}`);
                            block.sibling('title').data({
                                select_resource_name: `${name}`
                            });
                        }
                    #slug
                        {
                            block.child('subcontent/resource_info/slug/value/text').html('').data(`${slug}`);
                            block.child('subcontent/resource_info/slug/value_editor').attribute('value', `${slug}`);
                        }
                    #ip
                        {
                            var ip_alt = ip;
                            var ip_alt_alt = ip_alt;
                            if (ip_alt == '') {
                                ip_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                ip_alt_alt = '#';
                                block.child('subcontent/resource_info/ip/value/text').css('color', '#222');
                            } else block.child('subcontent/resource_info/ip/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                            block.child('subcontent/resource_info/ip/value/text').html(`${ip_alt}`).attribute('href', `${window.location.protocol}//${ip_alt_alt}`);
                            block.child('subcontent/resource_info/ip/value_editor').attribute('value', `${ip}`); 
                        }
                    #link
                        {
                            var link_alt = link;
                            var link_alt_alt = link_alt;
                            if (link_alt == '') {
                                link_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                link_alt_alt = '#';
                                block.child('subcontent/resource_info/link/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/resource_info/link/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                                var length_limit = 37;
                                if (link_alt.length > length_limit) link_alt = link_alt.substring(0, length_limit - 2) + '...';
                            }
                            block.child('subcontent/resource_info/link/value/text').html(`${link_alt}`).attribute('href', `${link_alt_alt}`);
                            block.child('subcontent/resource_info/link/value_editor').attribute('value', `${link}`); 
                        }
                    :hide_editors
                        {
                            //setTimeout(_ => {
                                block.child('subcontent/resource_info/name/value_editor').on('hide');
                                block.child('subcontent/resource_info/slug/value_editor').on('hide');
                                block.child('subcontent/resource_info/ip/value_editor').on('hide');
                                block.child('subcontent/resource_info/link/value_editor').on('hide');
                                block.child('subcontent/resource_info/more_menu').on('hide');
                            //}, 200);
                        }
                    :receive_resource_update
                        {
                            var old_data = block.key('resource');
                            var new_data = data;
                            if (old_data.name != new_data.name) {
                                block.data({ name: new_data.name, });
                                block.child('subcontent/resource_info/name/value_editor').on('hide');
                            }
                            if (old_data.slug != new_data.slug) {
                                block.data({ slug: new_data.slug, });
                                block.child('subcontent/resource_info/slug/value_editor').on('hide');
                            }
                            if (old_data.ip != new_data.ip) {
                                block.data({ ip: new_data.ip, });
                                block.child('subcontent/resource_info/ip/value_editor').on('hide');
                            }
                            if (old_data.link != new_data.link) {
                                block.data({ link: new_data.link, });
                                block.child('subcontent/resource_info/link/value_editor').on('hide');
                            }
                            block.key('resource', new_data);
                        }
                    :send_resource_update
                        {
                            app.ws.api.update_resource(block.key('resource')._id, data);
                            event.stopPropagation();
                        }
                    :delete_resource
                        {
                            //console.log('delete_resource');
                            var resource_info = block.key('resource');
                            if (resource_info) {
                                app.ui.display_modal.generic_confirm("Delete Resource", `Permanently delete resource "${resource_info.name}"?`, (result) => {
                                    if (result) {
                                        var confirm = window.confirm(`This action is not reversible â€” are you sure about deleting resource "${resource_info.name}"?`);
                                        if (confirm) {
                                            setTimeout(_ => {
                                                app.ws.api.delete_resource(resource_info._id);
                                            }, 30);
                                        }
                                        return true;
                                    }
                                });
                            }
                            event.stopPropagation();
                        }
                    div subcontent
                        class masonry-grid-container
                        css
                            padding 1px 1px
                        div resource_info
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Resource
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/board_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div name
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Name
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val Resource Zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        // this is an edit button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                //block.parent(2).data('');
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                //console.log(block.parent(4).key('resource').name);
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').name;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Resource Zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        name: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div slug
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Identifier
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val resource-zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').slug;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder resource-zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        slug: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div ip
                                class value_edge
                                text label
                                    val IP Address
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html 127.0.0.1
                                        href http://127.0.0.1
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').ip;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder 127.0.0.1
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        ip: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div link
                                class value_edge
                                text label
                                    val Console
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://console.aws.amazon.com/ec2/v2/home?...
                                        href https://console.aws.amazon.com/ec2/v2/home?...
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').link;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://projectzero.anuv.me
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        letter-spacing normal
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        link: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                            block image
                                css
                                    height 130px
                                    width 130px
                                    position absolute
                                    top 80px
                                    right 40px
                                    border-radius 7px
                                    opacity 0.99
                                    transition opacity 0.2s ease
                                    cursor pointer
                                    -webkit-box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                    box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                    display none
                                #update
                                    {
                                        block.key('img_path', update);
                                        var data = {
                                            src: '/img/gear_bg.jpg',
                                            css: {
                                                opacity: '0.75'
                                            }
                                        };
                                        if (update && update.trim() != '') {
                                            //console.log(update);
                                            data.src = update;
                                            data.css.opacity = '0.97';
                                        }
                                        block.child('img').data(data);
                                    }
                                #update_invert
                                    {
                                        block.key('img_invert', update_invert);
                                        block.child('edit').css({
                                            'filter': update_invert ? 'invert()' : 'none'
                                        });
                                        block.key('edit_opacity', update_invert ? '1' : '0.6');
                                    }
                                $edit_opacity 0.95
                                :mouseover
                                    css
                                        opacity 0.94
                                    {
                                        block.child('edit').css('opacity', block.key('edit_opacity'));
                                    }
                                :mouseout
                                    css
                                        opacity 0.99
                                    edit
                                        css
                                            opacity 0
                                :click
                                    {
                                        //var url = '';
                                        //if (block.key('img_path'))
                                        //    url = block.key('img_path');
                                        //app.ui.display_modal.edit_project_image(block.parent(2).key('project')._id.toString(), url, block.key('img_invert'));
                                    }
                                image img
                                    src /img/gear_bg.jpg
                                    height 130px
                                    width 130px
                                    css
                                        border-radius 7px
                                        position absolute
                                        top 0
                                        left 0
                                        opacity 0.9
                                image edit
                                    src /img/edit_b.png
                                    height 25px
                                    width 25px
                                    css
                                        margin 0 auto
                                        position relative
                                        z-index 100
                                        opacity 0
                                        transition opacity 0.15s ease
                            block more_menu_button_wrap
                                css
                                    position absolute
                                    height 40px
                                    width 40px
                                    top 20px
                                    right 22px
                                button more_menu_button
                                    css
                                        outline none
                                        border none
                                        background-color rgba(255,255,255,0)
                                        height 33px
                                        width 33px
                                        margin 0 auto
                                        opacity 0.65
                                        padding 0
                                        display block
                                    image img
                                        src /img/more_b.png
                                        height 33px
                                        width 33px
                                        css
                                            margin 0 auto
                                    :click
                                        {
                                            block.parent().sibling('more_menu').on('toggle');
                                        }
                                    :mouseover
                                        css
                                            opacity 0.8
                                    :mouseout
                                        css
                                            opacity 0.65
                            div more_menu
                                $showing no
                                :toggle
                                    {
                                        if (block.key('showing') === 'yes') {
                                            block.on('hide');
                                        } else {
                                            block.on('show');
                                        }
                                    }
                                :show
                                    {
                                        block.key('showing', 'yes');
                                        block.css({ display: 'block' });
                                        event.stopPropagation();
                                    }
                                :hide
                                    {
                                        block.key('showing', 'no');
                                        block.css({ display: 'none' });
                                        event.stopPropagation();
                                    }
                                css
                                    position absolute
                                    height 90px
                                    width 85px
                                    top 0
                                    right -86px
                                    border-radius 4px
                                    border 1px solid #efefef
                                    background-color white
                                    display none
                                    -webkit-box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    font-size 12.5px
                                    letter-spacing 0.8px
                                    opacity 0.98
                                    z-index 200
                                div menu-item-1
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                        border-radius 4px 4px 0 0
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Lorem
                                        :click
                                            {
                                                console.log('Lorem');
                                            }
                                div menu-item-2
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Ipsum
                                        :click
                                            {
                                                console.log('Ipsum');
                                            }
                                div menu-item-3
                                    css
                                        height 30px
                                        border-bottom none
                                        box-sizing border-box
                                        border-radius 0 0 4px 4px
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                            color rgb(209, 36, 36)
                                        html Delete
                                        :click
                                            {
                                                //console.log('Delete');
                                                block.parent(4).on('delete_resource');
                                            }
                        div resource_apps
                            css
                                display none
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Applications
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/tree_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div repo
                                css
                                    display none
                                class value_edge
                                text label
                                    val Repo
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://github.com/u/projectzero
                                        href https://github.com/u/projectzero
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').repo;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://github.com/u/projectzero
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                        letter-spacing normal
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        repo: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                        div resource_code
                            css
                                display none
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Code
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/code_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                        height 80px
                            div repo
                                class value_edge
                                text label
                                    val Repo
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://github.com/u/projectzero
                                        href https://github.com/u/projectzero
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').repo;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://github.com/u/projectzero
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                        letter-spacing normal
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        repo: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div docs
                                class value_edge
                                text label
                                    val Docs
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://projectzero.anuv.me/docs
                                        href https://projectzero.anuv.me/docs
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').docs;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://projectzero.anuv.me/docs
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                        letter-spacing normal
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        docs: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                        div resource_domains
                            css
                                display none
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Domains
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/globe_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div repo
                                css
                                    display none
                                class value_edge
                                text label
                                    val Repo
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://github.com/u/projectzero
                                        href https://github.com/u/projectzero
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                            div end_spacer
                                css
                                    height 15px

            div ideas
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            app.ws.api.get_ideas();
                        }, 20);
                    }
                :hide
                    css
                        display none
                button new_idea_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                    class mdl-button mdl-button mdl-js-button mdl-button--fab mdl-button--mini-fab mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                    {
                        block.css("background-color", app.ui.colors.primary);
                    }
                div idea_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Ideas
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.7
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                div content
                    css
                        width 100%
                        height auto
            