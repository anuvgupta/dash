    *

// app main blockfile

// fold 1-7 for easy editing

// app UI layer
app
    id app
    css
        opacity 0
        transition opacity 0.4s
        width 100%
        height 100%
        margin 0 auto
        box-sizing border-box
        position absolute
        top 0
        left 0

    :ready
        {
            console.log('[block] ready');
        }

    #sign_in_res
        {
            if (sign_in_res.data.token != null) {
                util.cookie('token', `${sign_in_res.data.token}`, '__indefinite__');
            }
            block.data({
                auth_res: {
                    success: sign_in_res.success
                }
            });
        }
    #auth_res
        {
            if (auth_res.success) {
                block.child('login').css('display', 'none');
                block.child('main').css('display', 'block');
                setTimeout(_ => {
                    block.child('main/menu/projects').$().click();
                }, 20);
            } else {
                //console.log('fail');
                block.child('login').css('display', 'table');
                block.child('main').css('display', 'none');
                if (app.ws.api.cookie_login_flag)
                    block.child('login/content/subcontent/error').on('show');
            }
        }

    #new_project_res
        {
            if (new_project_res.success) {
                app.ui.display_modal.new_project_res(`Created project "${new_project_res.data.slug}" (${new_project_res.data.id})`);
            } else {
                app.ui.display_modal.new_project_res(`<span style="color: #a60a0a; opacity: 0.9;">${util.capitalize(new_project_res.message ? new_project_res.message : 'unknown error')}.</span>`);
            }
        }
    #get_projects_res
        {
            if (get_projects_res.success) {
                //console.log(get_projects_res.data.list);
                block.child('main/content/projects').data({
                    project_list: get_projects_res.data.list
                });
            } else {
                app.ui.display_modal.generic_confirm('Load Projects', `Error - ${util.capitalize(get_projects_res.message ? get_projects_res.message : 'unknown error')}`, (result) => {
                    if (result) {
                        setTimeout(_ => {
                            app.ws.api.get_projects();
                        }, 30);
                        return true;
                    }
                });
            }
        }
    #star_project_res
        {
            //console.log(star_project_res.data.id, star_project_res.data.starred);
            block.child('main/content/projects').data({
                star_project: star_project_res.data
            });
        }
    #update_project_res
        {
           var current_project = block.child('main/content/projects/detail').key('project');
           if (current_project && current_project._id == update_project_res.data.id)
               block.child('main/content/projects/detail').on('receive_project_update', update_project_res.data.project);
               block.child('main/content/projects').data({ update_project_local: update_project_res.data.project });
        }
    #delete_project_res
        {
            if (delete_project_res.success === true) {
                block.child('main/content/projects').data({
                    delete_project: delete_project_res.data.id
                });
            }
        }

    #new_resource_res
        {
            if (new_resource_res.success) {
                app.ui.display_modal.new_resource_res(`Created resource "${new_resource_res.data.slug}" (${new_resource_res.data.id})`);
            } else {
                app.ui.display_modal.new_resource_res(`<span style="color: #a60a0a; opacity: 0.9;">${util.capitalize(new_resource_res.message ? new_resource_res.message : 'unknown error')}.</span>`);
            }
        }
    #get_resources_res
        {
            if (get_resources_res.success) {
                //console.log(get_resources_res.data.list);
                block.child('main/content/resources').data({
                    resource_list: get_resources_res.data.list
                });
                block.child('main/content/applications/detail/subcontent/application_info/host').data({
                    resource_list: get_resources_res.data.list
                });
            } else {
                app.ui.display_modal.generic_confirm('Load Resources', `Error - ${util.capitalize(get_resources_res.message ? get_resources_res.message : 'unknown error')}`, (result) => {
                    if (result) {
                        setTimeout(_ => {
                            app.ws.api.get_resources();
                        }, 30);
                        return true;
                    }
                });
            }
        }
    #get_resource_res
        {
            block.data({
                update_resource_res: {
                    success: get_resource_res.success,
                    data: {
                        id: get_resource_res.data.resource._id,
                        resource: get_resource_res.data.resource
                    }
                }
            });
        }
    #update_resource_res
        {
            var current_resource = block.child('main/content/resources/detail').key('resource');
            if (current_resource && current_resource._id == update_resource_res.data.id) {
                block.child('main/content/resources/detail').on('receive_resource_update', update_resource_res.data.resource);
            }
            block.child('main/content/resources').data({ update_resource_local: update_resource_res.data.resource });
        }
    #delete_resource_res
        {
            if (delete_resource_res.success === true) {
                block.child('main/content/resources').data({
                    delete_resource: delete_resource_res.data.id
                });
            }
        }

    #new_application_res
        {
            if (new_application_res.success) {
                app.ui.display_modal.new_application_res(`Created application "${new_application_res.data.slug}" (${new_application_res.data.id})`);
            } else {
                app.ui.display_modal.new_application_res(`<span style="color: #a60a0a; opacity: 0.9;">${util.capitalize(new_application_res.message ? new_application_res.message : 'unknown error')}.</span>`);
            }
        }
    #get_applications_res
        {
            if (get_applications_res.success) {
                //console.log(get_applications_res.data.list);
                block.child('main/content/applications').data({
                    application_list: get_applications_res.data.list
                });
                block.child('main/content/projects/detail/subcontent/project_apps/list').data({
                    application_details: get_applications_res.data.list
                });
                if (get_applications_res.data.hasOwnProperty('launch') && get_applications_res.data.launch != '') {
                    //console.log('LAUNCH APP ' + get_applications_res.data.launch._id);
                    app.ui.block.child('main/content/applications').on('deselect_application');
                    setTimeout(_ => {
                        app.ui.block.child('main/content/applications').data({
                            select_application: get_applications_res.data.launch
                        });
                        setTimeout(_ => {
                            app.ui.block.child('main/menu/applications').on('click');
                            setTimeout(_ => {
                                app.ui.block.child('main/content/applications/detail').on('update_grid');
                            }, 15);
                        }, 20);
                    }, 30);
                }
                if (get_applications_res.data.hasOwnProperty('associate') && get_applications_res.data.associate != '') {
                    //console.log('ASSOCIATE PROJECT ' + get_applications_res.data.associate);
                    app.ui.block.child('main/content/applications').on('deselect_application');
                    setTimeout(_ => {
                        app.ui.display_modal.associate_project_app(get_applications_res.data.associate, get_applications_res.data.list);
                    }, 30);
                }
            } else {
                app.ui.display_modal.generic_confirm('Load Applications', `Error - ${util.capitalize(get_applications_res.message ? get_applications_res.message : 'unknown error')}`, (result) => {
                    if (result) {
                        setTimeout(_ => {
                            app.ws.api.get_applications();
                        }, 30);
                        return true;
                    }
                });
            }
        }
    #update_application_res
        {
            var current_application = block.child('main/content/applications/detail').key('application');
            if (current_application && current_application._id == update_application_res.data.application._id) {
                block.child('main/content/applications/detail').on('receive_application_update', update_application_res.data.application);
            }
            block.child('main/content/applications').data({ update_application_local: update_application_res.data.application });
        }
    #delete_application_res
        {
            if (delete_application_res.success === true) {
                block.child('main/content/applications').data({
                    delete_application: delete_application_res.data.id
                });
            }
        }
    #signal_application_res_daemon_res
        {
            if (signal_application_res_daemon_res.success) {
                var current_application = block.child('main/content/applications/detail').key('application');
                if (current_application && current_application._id == signal_application_res_daemon_res.data.application_id) {
                    block.child('main/content/applications/detail/subcontent/application_process/signal_toast').data({
                        summon: signal_application_res_daemon_res.data.message,
                        color: signal_application_res_daemon_res.data.success === false ? '#b3443b' : '#3b8251'
                    });
                }
            } else console.err(signal_application_res_daemon_res)
        }
    #push_application_proxy_res_daemon_res
        {
            var push_application_proxy_toast_res = push_application_proxy_res_daemon_res;
            if (push_application_proxy_toast_res.success) {
                var current_application = block.child('main/content/applications/detail').key('application');
                if (current_application && current_application._id == push_application_proxy_toast_res.data.application_id) {
                    block.child('main/content/applications/detail/subcontent/application_proxy/signal_toast').data({
                        summon: push_application_proxy_toast_res.data.message,
                        color: push_application_proxy_toast_res.data.success === false ? '#b3443b' : '#3b8251'
                    });
                }
            } else console.err(push_application_proxy_toast_res)
        }
    #push_application_vhost_res_daemon_res
        {
            var push_application_proxy_toast_res = push_application_vhost_res_daemon_res;
            if (push_application_proxy_toast_res.success) {
                var current_application = block.child('main/content/applications/detail').key('application');
                if (current_application && current_application._id == push_application_proxy_toast_res.data.application_id) {
                    block.child('main/content/applications/detail/subcontent/application_static/signal_toast').data({
                        summon: push_application_proxy_toast_res.data.message,
                        color: push_application_proxy_toast_res.data.success === false ? '#b3443b' : '#3b8251'
                    });
                }
            } else console.err(push_application_proxy_toast_res)
        }
    #pull_application_repo_res_daemon_res
        {
            var pull_application_repo_toast_res = pull_application_repo_res_daemon_res;
            if (pull_application_repo_toast_res.success) {
                var current_application = block.child('main/content/applications/detail').key('application');
                if (current_application && current_application._id == pull_application_repo_toast_res.data.application_id) {
                    block.child('main/content/applications/detail/subcontent/application_code/signal_toast').data({
                        summon: pull_application_repo_toast_res.data.message,
                        color: pull_application_repo_toast_res.data.success === false ? '#b3443b' : '#3b8251'
                    });
                }
            } else console.err(pull_application_repo_toast_res)
        }

    #resource_status
        {
            var resource_info = block.child('main/content/resources/detail').key('resource');
            if (resource_info && resource_info._id == resource_status.id) {
                block.child('main/content/resources/detail').data({
                    status: resource_status.status,
                    status_time: resource_status.status_time
                });
            }
            block.child('main/content/resources').data({
                update_resource_fields: {
                    id: resource_status.id,
                    fields: [ 'status', 'status_time' ],
                    vals: [ resource_status.status, resource_status.status_time ]
                }
            });
        }
    #tail_app_stream_line
        {
            var current_application = block.child('main/content/applications/detail').key('application');
            if (current_application && current_application._id == tail_app_stream_line.app_id) {
                block.child('main/content/applications/detail/subcontent/application_process/logs').data({
                    line:  {
                        value: tail_app_stream_line.log_line,
                        timestamp: tail_app_stream_line.now_ts,
                        initial: false,
                    }
                });
            }
        }
    #tail_app_stream_lines
        {
            var current_application = block.child('main/content/applications/detail').key('application');
            if (current_application && current_application._id == tail_app_stream_lines.app_id) {
                tail_app_stream_lines.log_lines = tail_app_stream_lines.log_lines.split('\n');
                for (var l in tail_app_stream_lines.log_lines) {
                    var log_line = tail_app_stream_lines.log_lines[l];
                    block.child('main/content/applications/detail/subcontent/application_process/logs').data({
                        line:  {
                            value: log_line,
                            timestamp: l,
                            initial: true
                        }
                });
                }
            }
        }
    
    #new_domain_res
            {
                if (new_domain_res.success) {
                    app.ui.display_modal.new_domain_res(`Created domain "${new_domain_res.data.domain}" (${new_domain_res.data.id})`);
                } else {
                    app.ui.display_modal.new_domain_res(`<span style="color: #a60a0a; opacity: 0.9;">${util.capitalize(new_domain_res.message ? new_domain_res.message : 'unknown error')}.</span>`);
                }
            }
    #get_domains_res
        {
            if (get_domains_res.success) {
                //console.log(get_domains_res.data.list);
                block.child('main/content/domains').data({
                    domain_list: get_domains_res.data.list
                });
                block.child('main/content/resources/detail/subcontent/resource_domains/list').data({
                    domain_details: get_domains_res.data.list
                });
                block.child('main/content/applications/detail/subcontent/application_domains/list').data({
                    domain_details: get_domains_res.data.list
                });
                if (get_domains_res.data.hasOwnProperty('launch') && get_domains_res.data.launch != '') {
                    //console.log('LAUNCH DOMAIN ' + get_domains_res.data.launch._id);
                    app.ui.block.child('main/content/domains').on('deselect_domain');
                    setTimeout(_ => {
                        app.ui.block.child('main/content/domains').data({
                            select_domain: get_domains_res.data.launch
                        });
                        setTimeout(_ => {
                            app.ui.block.child('main/menu/domains').on('click');
                            setTimeout(_ => {
                                app.ui.block.child('main/content/domains/detail').on('update_grid');
                            }, 15);
                        }, 20);
                    }, 30);
                }
                if (get_domains_res.data.hasOwnProperty('associate_resource') && get_domains_res.data.associate_resource != '') {
                    //console.log('ASSOCIATE RESOURCE ' + get_domains_res.data.associate_resource);
                    app.ui.block.child('main/content/domains').on('deselect_domain');
                    setTimeout(_ => {
                        app.ui.display_modal.associate_resource_domain(get_domains_res.data.associate_resource, get_domains_res.data.list);
                    }, 30);
                }
                if (get_domains_res.data.hasOwnProperty('associate_application') && get_domains_res.data.associate_application != '') {
                    //console.log('ASSOCIATE APPLICATION ' + get_domains_res.data.associate_application);
                    app.ui.block.child('main/content/domains').on('deselect_domain');
                    setTimeout(_ => {
                        app.ui.display_modal.associate_application_domain(get_domains_res.data.associate_application, get_domains_res.data.list);
                    }, 30);
                }
            } else {
                app.ui.display_modal.generic_confirm('Load Domains', `Error - ${util.capitalize(get_domains_res.message ? get_domains_res.message : 'unknown error')}`, (result) => {
                    if (result) {
                        setTimeout(_ => {
                            app.ws.api.get_domains();
                        }, 30);
                        return true;
                    }
                });
            }
        }
    #update_domain_res
        {
           var current_domain = block.child('main/content/domains/detail').key('domain');
           if (current_domain && current_domain._id == update_domain_res.data.id)
               block.child('main/content/domains/detail').on('receive_domain_update', update_domain_res.data.domain);
               block.child('main/content/domains').data({ update_domain_local: update_domain_res.data.domain });
        }
    #delete_domain_res
        {
            if (delete_domain_res.success === true) {
                block.child('main/content/domains').data({
                    delete_domain: delete_domain_res.data.id
                });
            }
        }

    div background
        css
            position absolute
            top 0
            left 0
            width 100%
            height 100%
            box-sizing border-box
            margin 0
            padding 0
            background-image url(img/gear_bg.jpg)
            background-position top right
            background-size auto
            background-repeat repeat
            background-attachment fixed
            opacity 0.05

    block login
        css
            display table
        block content
            css
                height 90%
                width 85%
                max-height 400px
                max-width 490px
                margin 0 auto
                border-radius 8px
                opacity 0.95
                position relative
                // // #1da1f2 #51afe8 #DB2B39 rgba(219, 43, 58, 0.9)
                // -webkit-box-shadow 0px 1px 4px 1px rgba(10,10,10,0.3)
                // -moz-box-shadow 0px 1px 4px 1px rgba(10,10,10,0.3)
                // box-shadow 0px 1px 4px 1px rgba(10,10,10,0.3)
            {
                // block.css("background-color", app.ui.colors.primary);
            }
            block background
                css
                    position absolute
                    top -34px
                    left 0
                    z-index 1
                image image
                    src img/gear_l_b_2-new.png
                    height 460px
                    width 460px
                    css
                        margin 0 auto
                        pointer-events none
                        opacity 0.9
                    {
                        var classname = "";
                        classname += `rotating${util.rand_int(6, 8)}`;
                        classname += (util.rand_int(0, 1) == 0) ? "_n" : "";
                        block.class(`${classname}`);
                    }
                    #color
                        {
                            //console.log(color);
                            //block.css("filter", `brightness(0.65) sepia() saturate(2500%) hue-rotate(${color}deg)`);
                            //block.css("filter", `brightness(0.85)`);
                        }
                    //{
                    //    block.data({
                    //        color: 90
                    //    });
                    //}
            div subcontent
                css
                    text-align center
                    height 250px
                    width 210px
                    margin 7px auto 0
                    position relative
                    z-index 2
                text text
                    val Dash
                    css
                        font-size 80px
                        margin 110px 0 35px 0
                        color white
                        display block
                        font-weight 400
                input password
                    type password
                    placeholder ******
                    css
                        display block
                        text-align center
                        box-sizing border-box
                        width 190px
                        height 35px
                        padding 5px 10px
                        font-size 18px
                        margin 10px auto 5px auto
                        border none
                        outline none
                        border-radius 3px
                        color #444
                        letter-spacing 0.4px
                        font-weight 300
                    :keyup
                        {
                            if (event.keyCode && event.keyCode == 13) {
                                block.sibling("submit").$().click();
                            }
                        }
                button submit
                    class subbutton
                    css
                        display block
                        text-align center
                        box-sizing border-box
                        width 190px
                        height 35px
                        padding 5px 10px
                        font-size 18px
                        cursor pointer
                        margin 2px auto 5px auto
                        border none
                        outline none
                        border-radius 3px
                        color #333
                        letter-spacing 0.4px
                        font-weight 300
                    text text
                        val enter
                    :click
                        {
                            var val = block.sibling("password").$().val();
                            if (val != null && (`${val}`).trim() != "") {
                                val = (`${val}`).trim();
                                app.ws.api.login(val);
                            }
                        }
                text error
                    val incorrect
                    css
                        margin 0
                        opacity 0
                        font-size 20px
                        color white
                        display block
                        font-weight 600
                        font-style italic
                        letter-spacing 0.7px
                        transition opacity 0.1s ease
                    :show
                        css
                            opacity 0.95
                    :hide
                        css
                            opacity 0
                
    div main
        css
            display none
            height 100%
            width 100%
            overflow hidden
        div bar
            css
                box-shadow rgba(50, 50, 50, 0.3) 0px 2px 4px
                width 100%
                position fixed
                left 0
                top 0
                height 72px
                opacity 0.985
                z-index 101
                cursor crosshair
            {
                block.css("background-color", app.ui.colors.primary);
            }
            block icon
                css
                    width 70px
                    margin-left 33px
                    margin-right 16px
                    float left
                    cursor crosshair
                //class mdc-touch-target-wrapper
                //button button
                    //css
                    //    height 54px
                    //    width 54px
                    //    margin 0 auto
                    //    position relative
                    //class mdc-button mdc-button--touch
                    //span ripple
                    //    class mdc-button__ripple
                    //span touch
                    //    class mdc-button__touch
                block wrapper
                    image image
                        src img/cloud_3_b.png
                        height 54px
                        width 54px
                    css
                        filter invert(1)
            block title
                css
                    width 200px
                    float left
                text text
                    val Dash
                    css
                        font-size 49px
                        margin 0
                        color white
                        display block
                        font-weight 400
                        text-align left
                        margin-bottom 1px
                        cursor crosshair
            block logout
                css
                    width 70px
                    height 100%
                    top 0
                    right 10px
                    position absolute
                div img
                    css
                        height 45px
                        width 45px
                        opacity 1
                        cursor pointer
                        transition opacity 0.1s ease
                        margin 0 auto
                    image power
                        src img/power_w.png
                        height 45px
                        width 45px
                    :mouseover
                        css
                            opacity 0.9
                    :mouseout
                        css
                            opacity 1
                    :click
                        {
                            app.ws.api.logout();
                        }
        div menu
            css
                top 0
                left 0
                width 312px 
                //width 343px
                height 100%
                background-color white
                border-right none
                position fixed
                box-shadow 1.5px 0px 4.5px 1px rgba(10,10,10,0.04)
                padding-top 70px
                box-sizing border-box
            menu-item projects
                val Projects
                icon project_b.svg
                icon_size 26px
                //icon dashboard_l_b.png
                :second_click
                    {
                        var projects_block = block.parent().sibling('content').child('projects');
                        if (projects_block.key('active_view') == 'detail') 
                            projects_block.child('close/close_button').on('click');
                    }
            menu-item applications
                val Applications
                icon api_b.png
                :second_click
                    {
                        var applications_block = block.parent().sibling('content').child('applications');
                        if (applications_block.key('active_view') == 'detail') 
                            applications_block.child('close/close_button').on('click');
                    }
            menu-item resources
                val Resources
                icon board_b.png
                :second_click
                    {
                        var projects_block = block.parent().sibling('content').child('resources');
                        if (projects_block.key('active_view') == 'detail')
                            projects_block.child('close/close_button').on('click');
                    }
            menu-item domains
                val Domains
                icon globe_b.png
                :second_click
                    {
                        var domains_block = block.parent().sibling('content').child('domains');
                        if (domains_block.key('active_view') == 'detail')
                            domains_block.child('close/close_button').on('click');
                    }
            menu-item sitemap
                val Sitemap
                icon tree_b.png
            menu-item ideas
                val Ideas
                icon lightbulb_b.png
        div content
            css
                padding-left 1px
                padding-top 75px
                text-align left
            $padding+ 20
            @query window width != 0
                {
                    var padding_plus = parseInt(block.key('padding+'));
                    block.css('padding-left', (block.sibling('menu').$().width() + padding_plus) + 'px');
                    block.css('padding-right', (5 + padding_plus) + 'px');
                }
            
            div projects
                $active_view content
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            //Block.queries();
                        }, 2);
                        setTimeout(_ => {
                            app.ws.api.get_projects();
                        }, 10);
                    }
                :hide
                    css
                        display none
                #project_list
                    {
                        project_list = project_list.sort(util.sort_compare_newest_first);
                        block.key('project_list', project_list);

                        block.child('content').html('');
                        for (var p in project_list) {
                            var project_block_new = Block('project-item', `project_${project_list[p]._id.toString()}`).data(project_list[p]).key('project_metadata', project_list[p]);
                            block.child('content').add(project_block_new);
                        }
                        if (project_list.length > 2)
                            block.child('content').css('text-align', 'center');
                        else block.child('content').css('text-align', 'left');
                        if (project_list.length == 0) {
                            var msg = 'No projects found.';
                            block.child('content').html(`<div style="margin: 20px auto; text-align: center; padding-top: 2px;"><span class="noItemsMessage">${msg}</span></div>`);
                        }
                        //Block.queries();
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                app.ui.mui_upgrade();
                            }, 10);
                        }, 10);
                    }
                #star_project
                    {
                        var ch = block.child(`content/project_${star_project.id}`);
                        if (ch)
                            ch.data({
                                featured: star_project.starred
                            });
                        block.data({
                            update_project_field_local: {
                                id: star_project.id,
                                field: 'featured',
                                val: star_project.starred
                            }
                        });
                        /*
                        var current_project_info = block.child('detail').key('project');
                        if (current_project_info && star_project.id == current_project_info._id) {
                            current_project_info.featured = star_project.starred;
                            block.data({
                                update_project_local: current_project_info
                            });
                        }
                        */
                    }
                #select_project
                    {
                        block.key('active_view', 'detail');
                        block.child('content').css('display', 'none')
                            .sibling('detail').css('display', 'block')
                            .data({ project: select_project })
                        ;
                        block.child('title').data({ select_project_name: `${select_project.name}` });
                        block.child('new_project_button').css('display', 'none');
                        block.child('project_filter').css('display', 'none');
                        block.child('close').on('show');
                        block.child('detail').on('update_grid');
                        setTimeout(_ => {
                            Block.queries();
                        }, 15);
                    }
                :deselect_project
                    {
                        block.key('active_view', 'content');
                        block.child('detail').css('display', 'none')
                            .sibling('content').css('display', 'block')
                        ;
                        block.child('title').on('back');
                        block.child('new_project_button').css('display', 'inline-block');
                        block.child('project_filter').css('display', 'block');
                        block.child('close').on('hide');
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                app.ui.mui_upgrade();
                            }, 10);
                        }, 5);
                    }
                #update_project_local
                    {
                        //console.log('update_project_local', update_project_local);
                        var project_list = block.key('project_list');
                        for (var p in project_list) {
                            if (project_list[p]._id == update_project_local._id) {
                                project_list[p] = update_project_local;
                                break;
                            }
                        }
                        block.data({
                            project_list: project_list
                        });
                    }
                #update_project_field_local
                    {
                        //console.log('update_project_field_local', update_project_field_local);
                        var project_list = block.key('project_list');
                        for (var p in project_list) {
                            if (project_list[p]._id == update_project_field_local.id) {
                                project_list[p][update_project_field_local.field] = update_project_field_local.val;
                                break;
                            }
                        }
                        block.data({
                            project_list: project_list
                        });
                    }
                #delete_project
                    {
                        var project_info = block.child('detail').key('project');
                        if (project_info && project_info._id == delete_project) {
                            block.child('close/close_button').on('click');
                            setTimeout(_ => {
                                app.ws.api.get_projects();
                            }, 20);
                        }
                    }
                button new_project_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                        transition opacity 0.2s ease
                    class mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                            css
                                font-family Source Sans Pro
                                font-size 24px
                    :click
                        {
                            app.ui.display_modal.new_project();
                        }
                    {
                        block.css("background-color", app.ui.colors.primary);
                    }
                div project_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Projects
                    #select_project_name
                        {
                            block.child('text').html(`Projects&nbsp;&nbsp;/&nbsp;&nbsp;<span class='b600'>${select_project_name}</span>`);
                        }
                    :back
                        {
                            block.child('text').html('').data('Projects');
                            event.stopPropagation();
                        }
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.7
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                block close
                    css
                        height 40px
                        width 40px
                        position absolute
                        top 29px
                        right 12px
                        display none
                        pointer-events none
                        z-index 50
                    :hide
                        css 
                            display none
                            pointer-events none
                        {
                            event.stopPropagation();
                        }
                    :show
                        css
                            display table
                            pointer-events auto
                        {
                            event.stopPropagation();
                        }
                    button close_button
                        css
                            width 24px
                            heigth 24px
                            border none
                            background-color rgba(255, 255, 255, 0)
                            outline none
                            opacity 0.32
                            cursor pointer
                            border-radius 100%
                            transition opacity 0.2s ease
                        :mouseover
                            css
                                opacity 0.68
                        :mouseout
                            css
                                opacity 0.32
                        :click
                            {
                                block.parent().sibling('detail').on('hide_editors');
                                setTimeout(_ => {
                                    block.parent(1).on('deselect_project');
                                }, 10);
                            }
                        image x
                            src /img/x_b.png
                            height 24px
                            width 24px
                div content
                    css
                        width 100%
                        height auto
                        text-align center
                        padding-top 15px
                        padding-left 10px
                        padding-right 10px
                        box-sizing border-box
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                        }
                    :status_update
                        {
                            var children = block.children();
                            for (var c in children) {
                                children[c].on('status_update');
                            }
                            event.stopPropagation();
                        }
                div detail
                    css
                        width 100%
                        height auto
                        text-align left
                        padding-top 0
                        padding-left 2px
                        padding-right 0
                        box-sizing border-box
                        display none
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    $reload_grid yes
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                            if (block.key('reload_grid') === 'yes') {
                                block.key('reload_grid', 'no');
                                block.on('update_grid');
                                setTimeout(_ => {
                                    block.key('reload_grid', 'yes');
                                }, 100);
                            }
                        }
                    :update_grid
                        {
                            //console.log('update_grid');
                            // set up masonry grid
                            $('div.masonry-grid-container').masonry({
                                // options
                                itemSelector: 'div.masonry-grid-container div.dashboard_detail_section',
                                columnWidth: app.ui.masonry_grid_size
                            });
                            event.stopPropagation();
                        }
                    #project
                        {
                            console.log(project);
                            block.key('project', project);
                            block.data({
                                name: project.name,
                                slug: project.slug,
                                tagline: project.tagline,
                                description: project.description,
                                public: project.public,
                                major: project.major,
                                featured: project.featured,
                                link: project.link,
                                img: project.img,
                                img_invert: project.img_invert,
                                repo: project.repo,
                                docs: project.docs,
                                applications: project.applications,
                                tech: project.tech,
                                demo_pass: project.demo_pass,
                                demo_pass_show: project.demo_pass_show,
                                type: project.type,
                                platform: project.platform,
                                purpose: project.purpose,
                                icon: project.icon,
                                complete: project.complete,
                                category: project.category
                            });
                        }
                    #name
                        {
                            block.child('subcontent/project_info/name/value/text').html('').data(`${name}`);
                            block.child('subcontent/project_info/name/value_editor').attribute('value', `${name}`);
                            block.sibling('title').data({
                                select_project_name: `${name}`
                            });
                        }
                    #slug
                        {
                            block.child('subcontent/project_info/slug/value/text').html('').data(`${slug}`);
                            block.child('subcontent/project_info/slug/value_editor').attribute('value', `${slug}`);
                        }
                    #tagline
                        {
                            var tagline_alt = tagline;
                            if (tagline_alt == '') tagline_alt = '<span class="text_placeholder">Lorem ipsum dolor sit amet</span>';
                            block.child('subcontent/project_info/tagline/value/text').html(`${tagline_alt}`);
                            block.child('subcontent/project_info/tagline/value_editor').attribute('value', `${tagline}`);
                        }
                    #demo_pass
                        {
                            var demo_pass_alt = demo_pass;
                            if (demo_pass_alt == '') demo_pass_alt = '<span class="text_placeholder">urdead!!</span>';
                            block.child('subcontent/project_demo/demo_pass/value/text').html(`${demo_pass_alt}`);
                            block.child('subcontent/project_demo/demo_pass/value_editor').attribute('value', `${demo_pass}`);
                        }
                    #description
                        {
                            var description_alt = description;
                            if (description_alt == '') description_alt = '<span class="text_placeholder">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span>';
                            block.child('subcontent/project_info/description/value/text').html(`${description_alt}`);
                            block.child('subcontent/project_info/description/value_editor').attribute('value', `${description}`);
                        }
                    #major
                        {
                            block.child('subcontent/project_info/major/value/switch').data({
                                val: major === true ? 'on' : 'off'
                            });
                        }
                    #public
                        {
                            block.child('subcontent/project_demo/public/value/switch').data({
                                val: public === true ? 'on' : 'off'
                            });
                        }
                    #demo_pass_show
                        {
                            block.child('subcontent/project_demo/demo_pass_show/value/switch').data({
                                val: demo_pass_show === true ? 'on' : 'off'
                            });
                        }
                    #featured
                        {
                            block.child('subcontent/project_info/featured/value/switch').data({
                                val: featured === true ? 'on' : 'off'
                            });
                        }
                    #link
                        {
                            var link_alt = link;
                            var link_alt_alt = link_alt;
                            if (link_alt == '') {
                                link_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">offline</span>';
                                link_alt_alt = '#';
                                block.child('subcontent/project_demo/link/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/project_demo/link/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                                var length_limit = 37;
                                if (link_alt.length > length_limit) link_alt = link_alt.substring(0, length_limit - 2) + '...';
                            }
                            block.child('subcontent/project_demo/link/value/text').html(`${link_alt}`).attribute('href', `${link_alt_alt}`);
                            block.child('subcontent/project_demo/link/value_editor').attribute('value', `${link}`); 
                        }
                    #img
                        {
                            block.child('subcontent/project_info/image').data({
                                update: img ? (`${img}`).trim() : ''
                            });
                        }
                    #img_invert
                        {
                            block.child('subcontent/project_info/image').data({
                                update_invert: img_invert
                            });
                        }
                    #icon
                        {
                            block.child('subcontent/project_demo/icon').data({
                                update: icon ? (`${icon}`).trim() : ''
                            });
                        }
                    #repo
                        {
                            //console.log(repo);
                            var repo_alt = repo;
                            var repo_alt_alt = repo_alt;
                            if (repo_alt == '') {
                                repo_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                repo_alt_alt = '#';
                                block.child('subcontent/project_code/repo/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/project_code/repo/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                                var length_limit = 37;
                                if (repo_alt.length > length_limit) repo_alt = repo_alt.substring(0, length_limit - 2) + '...';
                            }
                            block.child('subcontent/project_code/repo/value/text').html(`${repo_alt}`).attribute('href', `${repo_alt_alt}`);
                            block.child('subcontent/project_code/repo/value_editor').attribute('value', `${repo}`); 
                        }
                    #docs
                        {
                            var docs_alt = docs;
                            var docs_alt_alt = docs_alt;
                            if (docs_alt == '') {
                                docs_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                docs_alt_alt = '#';
                                block.child('subcontent/project_code/docs/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/project_code/docs/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                                var length_limit = 37;
                                if (docs_alt.length > length_limit) docs_alt = docs_alt.substring(0, length_limit - 2) + '...';
                            }
                            block.child('subcontent/project_code/docs/value/text').html(`${docs_alt}`).attribute('href', `${docs_alt_alt}`);
                            block.child('subcontent/project_code/docs/value_editor').attribute('value', `${docs}`); 
                        }
                    #applications
                        {
                            //console.log('received project applications', applications);
                            block.child('subcontent/project_apps/list').data({
                                applications: applications
                            });
                        }
                    #tech
                        {
                            var project_info = block.key('project');
                            var tech_primary_block = block.child('subcontent/project_code/tech_primary');
                            var tech_secondary_block = block.child('subcontent/project_code/tech_secondary');
                            var tech_languages_block = block.child('subcontent/project_code/tech_language');

                            // primary
                            if (tech.primary.length > 0 && project_info != null) {
                                tech_primary_block.child('value').css('display', 'table');
                                tech_primary_block.child('value/text').html('');
                                for (var t in tech.primary) {
                                    tech_primary_block.child('value/text').add(Block('div', `tech_primary_${t}`)
                                        .key('tech_item', tech.primary[t])
                                        .key('index', t)
                                        .add(Block('text', 1)
                                            .css({
                                                position: 'relative',
                                                width: 'auto',
                                                fontSize: '23px',
                                            })
                                            .data(`${tech.primary[t]}`)
                                            .add(Block('image', 'img')
                                                .class('tech_delete_button')
                                                .css('display', 'none')
                                                .data({
                                                    src: '/img/x_b.png',
                                                    height: '20px',
                                                    width: '20px',
                                                })
                                                .on('click', (e, b, d) => {
                                                    b.parent(1).on('activate');
                                                    e.stopPropagation();
                                                })
                                            )
                                        )
                                        .on('mouseover', (e, b, d) => {
                                            b.child('text/img').css('display', 'block');
                                        })
                                        .on('mouseout', (e, b, d) => {
                                            b.child('text/img').css('display', 'none');
                                        })
                                        .on('activate', (e, b, d) => {
                                            setTimeout(_ => {
                                                app.ws.api.remove_project_tech(block.key('project')._id, b.key('tech_item'), 'primary');
                                            }, 20);
                                            e.stopPropagation();
                                        })
                                    );
                                }
                            } else if (tech.secondary.length > 0) {
                                tech_primary_block.child('value').css('display', 'none');
                            } else {
                                //tech_primary_block.child('value').css('display', 'table');
                                //tech_primary_block.child('value/text').html('<span class="text_placeholder" style="font-size: 18px;">No technology found.</span>');
                                
                                tech_primary_block.child('value').css('display', 'none');
                                tech_primary_block.child('value/text').html('<span class="text_placeholder" style="font-size: 18px;"></span>');
                            }

                            // secondary
                            if (tech.secondary.length > 0 && project_info != null) {
                                tech_secondary_block.child('value/text').css('display', 'block').html('');
                                tech_secondary_block.css('display', 'block');
                                tech_primary_block.css('margin-bottom', '5px');
                                for (var t in tech.secondary) {
                                    tech_secondary_block.child('value/text').add(Block('div', `tech_secondary_${t}`)
                                        .key('tech_item', tech.secondary[t])
                                        .key('index', t)
                                        .add(Block('text', 1)
                                            .css({
                                                position: 'relative',
                                                width: 'auto',
                                                fontSize: '18px'
                                            })
                                            .data(`${tech.secondary[t]}`)
                                            .add(Block('image', 'img')
                                                .class('tech_delete_button_small')
                                                .css('display', 'none')
                                                .data({
                                                    src: '/img/x_b.png',
                                                    height: '20px',
                                                    width: '20px',
                                                })
                                                .on('click', (e, b, d) => {
                                                    b.parent(1).on('activate');
                                                    e.stopPropagation();
                                                })
                                            )
                                        )
                                        .on('mouseover', (e, b, d) => {
                                            b.child('text/img').css('display', 'block');
                                        })
                                        .on('mouseout', (e, b, d) => {
                                            b.child('text/img').css('display', 'none');
                                        })
                                        .on('activate', (e, b, d) => {
                                            setTimeout(_ => {
                                                app.ws.api.remove_project_tech(block.key('project')._id, b.key('tech_item'), 'secondary');
                                            }, 20);
                                            e.stopPropagation();
                                        })
                                    );
                                }
                            } else {
                                tech_secondary_block.child('value/text').css('display', 'none');
                                tech_secondary_block.css('display', 'none');
                                tech_primary_block.css('margin-bottom', '10px');
                            }

                            // languages
                            if (tech.languages.length > 0 && project_info != null) {
                                tech_languages_block.child('value').css('display', 'table');
                                tech_languages_block.child('value/text').html('');
                                for (var t in tech.languages) {
                                    tech_languages_block.child('value/text').add(Block('div', `tech_language_${t}`)
                                        .key('language_item', tech.languages[t])
                                        .key('index', t)
                                        .add(Block('text', 1)
                                            .css({
                                                position: 'relative',
                                                width: 'auto',
                                                fontSize: '23px',
                                            })
                                            .data(`${tech.languages[t]}`)
                                            .add(Block('image', 'img')
                                                .class('tech_delete_button')
                                                .css('display', 'none')
                                                .data({
                                                    src: '/img/x_b.png',
                                                    height: '20px',
                                                    width: '20px',
                                                })
                                                .on('click', (e, b, d) => {
                                                    b.parent(1).on('activate');
                                                    e.stopPropagation();
                                                })
                                            )
                                        )
                                        .on('mouseover', (e, b, d) => {
                                            b.child('text/img').css('display', 'block');
                                        })
                                        .on('mouseout', (e, b, d) => {
                                            b.child('text/img').css('display', 'none');
                                        })
                                        .on('activate', (e, b, d) => {
                                            setTimeout(_ => {
                                                app.ws.api.remove_project_tech(block.key('project')._id, b.key('language_item'), 'languages');
                                            }, 20);
                                            e.stopPropagation();
                                        })
                                    );
                                }
                            } else {
                                //tech_languages_block.child('value').css('display', 'table');
                                //tech_languages_block.child('value/text').html('<span class="text_placeholder" style="font-size: 18px;">No languages found.</span>');
                                tech_languages_block.child('value').css('display', 'none');
                                tech_languages_block.child('value/text').html('<span class="text_placeholder" style="font-size: 18px;"></span>');
                            }
                        }
                    #type
                        {
                            block.child('subcontent/project_info/type/value/text').data({ choose: `${type}`});
                        }
                    #purpose
                        {
                            block.child('subcontent/project_info/purpose/value/text').data({ choose: `${purpose}`});
                        }
                    #category
                        {
                            block.child('subcontent/project_info/category/value/text').data({ choose: `${category}`});
                        }
                    #platform
                        {
                            block.child('subcontent/project_info/platform/value/text').data({ choose: `${platform}`});
                        }
                    #complete
                        {
                            block.child('subcontent/project_code/complete/value/switch').data({
                                val: complete === true ? 'on' : 'off'
                            });
                        }
                    :hide_editors
                        {
                            //setTimeout(_ => {
                                block.child('subcontent/project_info')
                                    .child('name').child('value_editor').on('hide').parent()
                                    .sibling('slug').child('value_editor').on('hide').parent()
                                    .sibling('tagline').child('value_editor').on('hide').parent()
                                    .sibling('description').child('value_editor').on('hide').parent()
                                .parent().sibling('project_code')
                                    .child('repo').child('value_editor').on('hide').parent()
                                    .sibling('docs').child('value_editor').on('hide').parent()
                                    .sibling('add_tech_item').child('value_editor').on('refresh').parent()
                                .parent().sibling('project_demo')
                                    .child('demo_pass').child('value_editor').on('hide').parent()
                                    .sibling('link').child('value_editor').on('hide').parent()
                                .parent().sibling('project_info')
                                    .child('more_menu').on('hide')
                                ;
                                /*
                                    block.child('subcontent/project_info/name/value_editor').on('hide');
                                    block.child('subcontent/project_info/slug/value_editor').on('hide');
                                    block.child('subcontent/project_info/tagline/value_editor').on('hide');
                                    block.child('subcontent/project_info/description/value_editor').on('hide');
                                    block.child('subcontent/project_info/demo_pass/value_editor').on('hide');
                                    block.child('subcontent/project_info/link/value_editor').on('hide');
                                    block.child('subcontent/project_code/repo/value_editor').on('hide');
                                    block.child('subcontent/project_code/docs/value_editor').on('hide');
                                    block.child('subcontent/project_code/add_tech_item/value_editor').on('refresh');
                                    block.child('subcontent/project_info/more_menu').on('hide');
                                */
                            //}, 200);
                        }
                    :receive_project_update
                        {
                            var old_data = block.key('project');
                            var new_data = data;
                            if (old_data.name != new_data.name) {
                                block.data({ name: new_data.name, });
                                block.child('subcontent/project_info/name/value_editor').on('hide');
                            }
                            if (old_data.slug != new_data.slug) {
                                block.data({ slug: new_data.slug, });
                                block.child('subcontent/project_info/slug/value_editor').on('hide');
                            }
                            if (old_data.tagline != new_data.tagline) {
                                block.data({ tagline: new_data.tagline, });
                                block.child('subcontent/project_info/tagline/value_editor').on('hide');
                            }
                            if (old_data.demo_pass != new_data.demo_pass) {
                                block.data({ demo_pass: new_data.demo_pass, });
                                block.child('subcontent/project_demo/demo_pass/value_editor').on('hide');
                            }
                            if (old_data.description != new_data.description) {
                                block.data({ description: new_data.description, });
                                block.child('subcontent/project_info/description/value_editor').on('hide');
                            }
                            if (old_data.major != new_data.major) {
                                block.data({ major: new_data.major });
                            }
                            if (old_data.public != new_data.public) {
                                block.data({ public: new_data.public });
                            }
                            if (old_data.demo_pass_show != new_data.demo_pass_show) {
                                block.data({ demo_pass_show: new_data.demo_pass_show });
                            }
                            if (old_data.featured != new_data.featured) {
                                block.data({ featured: new_data.featured });
                            }
                            if (old_data.complete != new_data.complete) {
                                block.data({ complete: new_data.complete });
                            }
                            if (old_data.link != new_data.link) {
                                block.data({ link: new_data.link, });
                                block.child('subcontent/project_demo/link/value_editor').on('hide');
                            }
                            if (old_data.type != new_data.type) {
                                block.data({ type: new_data.type, });
                            }
                            if (old_data.platform != new_data.platform) {
                                block.data({ platform: new_data.platform, });
                            }
                            if (old_data.purpose != new_data.purpose) {
                                block.data({ purpose: new_data.purpose, });
                            }
                            if (old_data.category != new_data.category) {
                                block.data({ category: new_data.category, });
                            }
                            if (old_data.img != new_data.img) {
                                block.data({ img: new_data.img, });
                            }
                            if (old_data.img_invert != new_data.img_invert) {
                                block.data({ img_invert: new_data.img_invert, });
                            }
                            if (old_data.icon != new_data.icon) {
                                block.data({ icon: new_data.icon, });
                            }
                            if (old_data.repo != new_data.repo) {
                                block.data({ repo: new_data.repo, });
                                block.child('subcontent/project_code/repo/value_editor').on('hide');
                            }
                            if (old_data.docs != new_data.docs) {
                                block.data({ docs: new_data.docs, });
                                block.child('subcontent/project_code/docs/value_editor').on('hide');
                            }
                            var update_tech = false;
                            if (old_data.tech.primary.length != new_data.tech.primary.length) {
                                update_tech = true;
                                block.child('subcontent/project_code/add_tech_item/value_editor').on('refresh');
                            }
                            if (old_data.tech.secondary.length != new_data.tech.secondary.length) {
                                update_tech = true;
                                block.child('subcontent/project_code/add_tech_item/value_editor').on('refresh');
                            }
                            if (old_data.tech.languages.length != new_data.tech.languages.length) {
                                update_tech = true;
                                block.child('subcontent/project_code/add_language_item/value_editor').on('refresh');
                            }
                            if (update_tech) {
                                block.data({ tech: new_data.tech });
                            }
                            block.data({ applications: new_data.applications });
                            block.key('project', new_data);
                        }
                    :send_project_update
                        {
                            app.ws.api.update_project(block.key('project')._id, data);
                            event.stopPropagation();
                        }
                    :delete_project
                        {
                            //console.log('delete_project');
                            var project_info = block.key('project');
                            if (project_info) {
                                app.ui.display_modal.generic_confirm("Delete Project", `Permanently delete project "${project_info.name}"?`, (result) => {
                                    if (result) {
                                        var confirm = window.confirm(`This action is not reversible  are you sure about deleting project "${project_info.name}"?`);
                                        if (confirm) {
                                            setTimeout(_ => {
                                                app.ws.api.delete_project(project_info._id);
                                            }, 30);
                                        }
                                        return true;
                                    }
                                });
                            }
                            event.stopPropagation();
                        }
                    :add_primary_tech
                        {
                            app.ws.api.update_project_tech(block.key('project')._id, data.new_tech, 'primary');
                            event.stopPropagation();
                        }
                    :add_secondary_tech
                        {
                            app.ws.api.update_project_tech(block.key('project')._id, data.new_tech, 'secondary');
                            event.stopPropagation();
                        }
                    :add_language_tech
                        {
                            app.ws.api.update_project_tech(block.key('project')._id, data.new_language, 'languages');
                            event.stopPropagation();
                        }
                    div subcontent
                        class masonry-grid-container
                        css
                            padding 1px 1px
                        div project_info
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Project
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/project_b.svg
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div name
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Name
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val Project Zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        // this is an edit button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                //block.parent(2).data('');
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                //console.log(block.parent(4).key('project').name);
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').name;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Project Zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        name: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div slug
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Identifier
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val project-zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').slug;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder project-zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        slug: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div tagline
                                class value_edge
                                text label
                                    val Tagline
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    text text
                                        val Lorem ipsum dolor sit amet
                                        class value_text
                                        css
                                            font-size 20px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').tagline;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Lorem ipsum dolor sit amet
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        tagline: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div description
                                class value_edge
                                text label
                                    val Description
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                                        class value_text
                                        css
                                            font-size 17px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').description;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 17px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        description: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div major
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Priority
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val off
                                        label Minor
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                minWidth: '55px',
                                                marginRight: '6px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Major' : 'Minor') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_project_update', {
                                                    major: value
                                                });
                                                event.stopPropagation();
                                            }
                            div featured
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Featured
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Promoted
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                minWidth: '75px',
                                                marginRight: '6px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Promoted' : 'Standard') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_project_update', {
                                                    featured: value
                                                });
                                                event.stopPropagation();
                                            }
                            div platform
                                class value_edge
                                css
                                    width 48%
                                    display inline-block
                                    vertical-align top
                                    margin-bottom 20px
                                text label
                                    val Platform
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    select text
                                        name project_platform_select
                                        class value_select
                                        css
                                            width 95%
                                        :change
                                            {
                                                var platform_val = block.node().value;
                                                block.parent(4).on('send_project_update', {
                                                    platform: platform_val
                                                });
                                            }
                                        #choose
                                            {
                                                var children = block.children();
                                                for (var c in children)
                                                    children[c].node().removeAttribute('selected');
                                                block.child(choose).attribute('selected', 'selected');
                                            }
                                        option none
                                            html None
                                            value none
                                            selected selected
                                        {
                                            for (var t in app.main.config.cloud.project.platforms) {
                                                var platform = app.main.config.cloud.project.platforms[t];
                                                block.add(Block('option', platform[0]).data({
                                                    value: platform[0],
                                                    html: platform[1]
                                                }));
                                            }
                                        }
                            div type
                                class value_edge
                                css
                                    width 48%
                                    display inline-block
                                    vertical-align top
                                    margin-bottom 20px
                                text label
                                    val Type
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    select text
                                        name project_type_select
                                        class value_select
                                        css
                                            width 95%
                                        :change
                                            {
                                                var type_val = block.node().value;
                                                block.parent(4).on('send_project_update', {
                                                    type: type_val
                                                });
                                            }
                                        #choose
                                            {
                                                var children = block.children();
                                                for (var c in children)
                                                    children[c].node().removeAttribute('selected');
                                                block.child(choose).attribute('selected', 'selected');
                                            }
                                        option none
                                            html None
                                            value none
                                            selected selected
                                        {
                                            for (var t in app.main.config.cloud.project.types) {
                                                var type = app.main.config.cloud.project.types[t];
                                                block.add(Block('option', type[0]).data({
                                                    value: type[0],
                                                    html: type[1]
                                                }));
                                            }
                                        }
                            div category
                                class value_edge
                                css
                                    width 48%
                                    display inline-block
                                    vertical-align top
                                    margin-bottom 20px
                                text label
                                    val Category
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    select text
                                        name project_category_select
                                        class value_select
                                        css
                                            width 95%
                                        :change
                                            {
                                                var category_val = block.node().value;
                                                block.parent(4).on('send_project_update', {
                                                    category: category_val
                                                });
                                            }
                                        #choose
                                            {
                                                var children = block.children();
                                                for (var c in children)
                                                    children[c].node().removeAttribute('selected');
                                                block.child(choose).attribute('selected', 'selected');
                                            }
                                        option none
                                            html None
                                            value none
                                            selected selected
                                        {
                                            for (var t in app.main.config.cloud.project.categories) {
                                                var category = app.main.config.cloud.project.categories[t];
                                                block.add(Block('option', category[0]).data({
                                                    value: category[0],
                                                    html: category[1]
                                                }));
                                            }
                                        }
                            div purpose
                                class value_edge
                                css
                                    width 48%
                                    display inline-block
                                    vertical-align top
                                    margin-bottom 20px
                                text label
                                    val Purpose
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    select text
                                        name project_purpose_select
                                        class value_select
                                        css
                                            width 95%
                                        :change
                                            {
                                                var purpose_val = block.node().value;
                                                block.parent(4).on('send_project_update', {
                                                    purpose: purpose_val
                                                });
                                            }
                                        #choose
                                            {
                                                var children = block.children();
                                                for (var c in children)
                                                    children[c].node().removeAttribute('selected');
                                                block.child(choose).attribute('selected', 'selected');
                                            }
                                        option none
                                            html None
                                            value none
                                            selected selected
                                        {
                                            for (var t in app.main.config.cloud.project.purposes) {
                                                var purpose = app.main.config.cloud.project.purposes[t];
                                                block.add(Block('option', purpose[0]).data({
                                                    value: purpose[0],
                                                    html: purpose[1]
                                                }));
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                            block image
                                css
                                    height 130px
                                    width 130px
                                    position absolute
                                    top 80px
                                    right 40px
                                    border-radius 7px
                                    opacity 0.99
                                    transition opacity 0.2s ease
                                    cursor pointer
                                    -webkit-box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                    box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                #update
                                    {
                                        block.key('img_path', update);
                                        var data = {
                                            src: '/img/gear_bg.jpg',
                                            css: {
                                                opacity: '0.75'
                                            }
                                        };
                                        if (update && update.trim() != '') {
                                            //console.log(update);
                                            data.src = update;
                                            data.css.opacity = '0.97';
                                        }
                                        block.child('img').data(data);
                                    }
                                #update_invert
                                    {
                                        block.key('img_invert', update_invert);
                                        block.child('edit').css({
                                            'filter': update_invert ? 'invert()' : 'none'
                                        });
                                        block.key('edit_opacity', update_invert ? '1' : '0.6');
                                    }
                                $edit_opacity 0.95
                                :mouseover
                                    css
                                        opacity 0.94
                                    {
                                        block.child('edit').css('opacity', block.key('edit_opacity'));
                                    }
                                :mouseout
                                    css
                                        opacity 0.99
                                    edit
                                        css
                                            opacity 0
                                :click
                                    {
                                        var url = '';
                                        if (block.key('img_path'))
                                            url = block.key('img_path');
                                        app.ui.display_modal.edit_project_image(block.parent(2).key('project')._id.toString(), url, block.key('img_invert'));
                                    }
                                image img
                                    src /img/gear_bg.jpg
                                    height 130px
                                    width 130px
                                    css
                                        border-radius 7px
                                        position absolute
                                        top 0
                                        left 0
                                        opacity 0.9
                                image edit
                                    src /img/edit_b.png
                                    height 25px
                                    width 25px
                                    css
                                        margin 0 auto
                                        position relative
                                        z-index 100
                                        opacity 0
                                        transition opacity 0.15s ease
                            block more_menu_button_wrap
                                css
                                    position absolute
                                    height 40px
                                    width 40px
                                    top 20px
                                    right 22px
                                button more_menu_button
                                    css
                                        outline none
                                        border none
                                        background-color rgba(255,255,255,0)
                                        height 33px
                                        width 33px
                                        margin 0 auto
                                        opacity 0.65
                                        padding 0
                                        display block
                                    image img
                                        src /img/more_b.png
                                        height 33px
                                        width 33px
                                        css
                                            margin 0 auto
                                    :click
                                        {
                                            block.parent().sibling('more_menu').on('toggle');
                                        }
                                    :mouseover
                                        css
                                            opacity 0.8
                                    :mouseout
                                        css
                                            opacity 0.65
                            div more_menu
                                $showing no
                                :toggle
                                    {
                                        if (block.key('showing') === 'yes') {
                                            block.on('hide');
                                        } else {
                                            block.on('show');
                                        }
                                    }
                                :show
                                    {
                                        block.key('showing', 'yes');
                                        block.css({ display: 'block' });
                                        event.stopPropagation();
                                    }
                                :hide
                                    {
                                        block.key('showing', 'no');
                                        block.css({ display: 'none' });
                                        event.stopPropagation();
                                    }
                                css
                                    position absolute
                                    height 90px
                                    width 85px
                                    top 0
                                    right -85px
                                    border-radius 4px
                                    border 1px solid #efefef
                                    background-color white
                                    display none
                                    -webkit-box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    font-size 12.5px
                                    letter-spacing 0.8px
                                    opacity 0.98
                                    z-index 200
                                div menu-item-1
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                        border-radius 4px 4px 0 0
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Lorem
                                        :click
                                            {
                                                console.log('Lorem');
                                            }
                                div menu-item-2
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Ipsum
                                        :click
                                            {
                                                console.log('Ipsum');
                                            }
                                div menu-item-3
                                    css
                                        height 30px
                                        border-bottom none
                                        box-sizing border-box
                                        border-radius 0 0 4px 4px
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                            color rgb(209, 36, 36)
                                        html Delete
                                        :click
                                            {
                                                //console.log('Delete');
                                                block.parent(4).on('delete_project');
                                            }
                        div project_code
                            class dashboard_detail_section
                            css
                                min-height 100px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Code
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/code_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                    height 80px
                            div repo
                                class value_edge
                                text label
                                    val Repository
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://github.com/u/projectzero
                                        href https://github.com/u/projectzero
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').repo;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://github.com/u/projectzero
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                        letter-spacing normal
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        repo: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div complete
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Status
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val off
                                        label Building
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                //minWidth: '55px',
                                                //marginRight: '6px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Complete' : 'Building') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_project_update', {
                                                    complete: value
                                                });
                                                event.stopPropagation();
                                            }
                            div tech_primary
                                class value_edge
                                css
                                    margin-bottom 1px
                                text label
                                    val Technology
                                    class label_desc
                                    css
                                        margin-bottom 0px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        html No technology found.
                                        class value_text
                                        css
                                            font-size 23px
                                            line-height 31px
                                            letter-spacing 1.2px
                            div tech_secondary
                                class value_edge
                                css
                                    margin-bottom 20px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        html No secondary technology found.
                                        class value_text
                                        css
                                            font-size 18px
                                            line-height 21px
                                            letter-spacing 1.2px
                            div add_tech_item
                                class value_edge
                                css
                                    margin-bottom 20px
                                    position relative
                                text label
                                    val Add Tech
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                        display none
                                div primary
                                    css
                                        position absolute
                                        right 0
                                        top 0
                                        height 100%
                                        width 40%
                                        //padding-top 25px
                                    input check
                                        type checkbox
                                        name tech_primary_check
                                        value primary
                                        checked checked
                                        css
                                            position relative
                                            margin-left 18px
                                            cursor pointer
                                            top 2px
                                        :input
                                            {
                                                block.parent().sibling('value_editor').key('section', (block.node().checked ? 'primary' : 'secondary'));
                                            }
                                    label label
                                        for tech_primary_check
                                        html Primary
                                        css
                                            padding-left 6px
                                input value_editor
                                    class value_editor
                                    placeholder Tensorflow, Arduino, ...
                                    $section primary
                                    css
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        //width 95%
                                        width 60%
                                        font-size 16px
                                        letter-spacing 1.2px
                                    :hide
                                        {
                                            block.css('display', 'none'); //.sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :refresh
                                        {
                                            block.node().value = '';
                                            block.node().blur();
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var section = block.key('section');
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on(`add_${section}_tech`, {
                                                        new_tech: value
                                                    });
                                                }
                                                //setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('refresh');
                                            }
                                        }
                            div tech_language
                                class value_edge
                                css
                                    margin-bottom 8px
                                text label
                                    val Language
                                    class label_desc
                                    css
                                        margin-bottom 0px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        html No languages found.
                                        class value_text
                                        css
                                            font-size 23px
                                            line-height 31px
                                            letter-spacing 1.2px
                            div add_language_item
                                class value_edge
                                css
                                    margin-bottom 20px
                                    position relative
                                text label
                                    val Add Language
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                        display none
                                input value_editor
                                    class value_editor
                                    placeholder Python, JavaScript, C++, ...
                                    css
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        //width 95%
                                        width 60%
                                        font-size 16px
                                        letter-spacing 1.2px
                                    :hide
                                        {
                                            block.css('display', 'none'); //.sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :refresh
                                        {
                                            block.node().value = '';
                                            block.node().blur();
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var section = block.key('section');
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on(`add_language_tech`, {
                                                        new_language: value
                                                    });
                                                }
                                                //setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('refresh');
                                            }
                                        }
                            div docs
                                class value_edge
                                text label
                                    val Documentation
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://projectzero.anuv.me/docs
                                        href https://projectzero.anuv.me/docs
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').docs;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://projectzero.anuv.me/docs
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                        letter-spacing normal
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        docs: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                            div end_spacer_again
                                css
                                    height 7px
                        div project_demo
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Demo
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/public_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div public
                                class value_edge
                                css
                                    width 48%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Visibility
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Public
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                minWidth: '55px',
                                                marginRight: '6px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Public' : 'Private') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_project_update', {
                                                    public: value
                                                });
                                                event.stopPropagation();
                                            }
                            div link
                                class value_edge
                                text label
                                    val Demo
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://projectzero.anuv.me
                                        href https://projectzero.anuv.me
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').link;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://projectzero.anuv.me
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        letter-spacing normal
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        link: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div demo_pass
                                class value_edge
                                css
                                    width 48%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Password
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    text text
                                        val urdead!!
                                        class value_text
                                        css
                                            font-size 20px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('project').demo_pass;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder urdead!!
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_project_update', {
                                                        demo_pass: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div demo_pass_show
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Display
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val off
                                        label Hide
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                minWidth: '75px',
                                                marginRight: '6px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Show' : 'Hide') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_project_update', {
                                                    demo_pass_show: value
                                                });
                                                event.stopPropagation();
                                            }
                            div end_spacer
                                css
                                    height 15px
                            block icon
                                css
                                    height 80px
                                    width 80px
                                    position absolute
                                    top 80px
                                    right 50px
                                    border-radius 4px
                                    opacity 0.99
                                    transition opacity 0.2s ease
                                    cursor pointer
                                    //-webkit-box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                    //box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                #update
                                    {
                                        block.key('img_path', update);
                                        var data = {
                                            src: '/img/gear_bg.jpg',
                                            css: {
                                                opacity: '0.75'
                                            }
                                        };
                                        if (update && update.trim() != '') {
                                            //console.log(update);
                                            data.src = update;
                                            data.css.opacity = '0.97';
                                        }
                                        block.child('img').data(data);
                                    }
                                $edit_opacity 0.95
                                :mouseover
                                    css
                                        opacity 0.94
                                    {
                                        block.child('edit').css('opacity', block.key('edit_opacity'));
                                    }
                                :mouseout
                                    css
                                        opacity 0.99
                                    edit
                                        css
                                            opacity 0
                                :click
                                    {
                                        var url = '';
                                        if (block.key('img_path'))
                                            url = block.key('img_path');
                                        app.ui.display_modal.edit_project_icon(block.parent(2).key('project')._id.toString(), url);
                                    }
                                image img
                                    src /img/gear_bg.jpg
                                    height 80px
                                    width 80px
                                    css
                                        border-radius 7px
                                        position absolute
                                        top 0
                                        left 0
                                        opacity 0.9
                                image edit
                                    src /img/edit_b.png
                                    height 25px
                                    width 25px
                                    css
                                        margin 0 auto
                                        position relative
                                        z-index 100
                                        opacity 0
                                        transition opacity 0.15s ease
                        div project_apps
                            class dashboard_detail_section
                            css
                                min-height 100px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Applications
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/api_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                    height 80px
                            div associate
                                css
                                    position absolute
                                    top 23px
                                    right 25px
                                    width 40px
                                    height 40px
                                block plus
                                    css
                                        opacity 0.6
                                        transition opacity 0.2s ease
                                    :mouseover
                                        css
                                            opacity 0.9
                                    :mouseout
                                        css
                                            opacity 0.6
                                    image image
                                        src /img/add_b.png
                                        height 30px
                                        width 30px
                                        css
                                            cursor pointer
                                        :click
                                            {

                                                var project = app.ui.block.child('main/content/projects/detail').key('project');
                                                if (project) {
                                                    setTimeout(_ => {
                                                        app.ws.api.get_applications(null, project._id);
                                                    }, 10);
                                                }
                                                event.stopPropagation();
                                            }
                            div list
                                css
                                    //background-color red
                                    width 100%
                                    max-height 250px
                                    height auto
                                    min-height 45px
                                    overflow-x none
                                    overflow-y auto
                                #manage
                                    {
                                        setTimeout(_ => {
                                            app.ws.api.get_applications(manage);
                                        }, 30);
                                    }
                                #del
                                    {
                                        app.ui.display_modal.generic_confirm("Update Project", `Deassociate app "${del.app_name}" from this project?`, (result) => {
                                            if (result) {
                                                setTimeout(_ => {
                                                    app.ws.api.deassociate_project_app(block.parent(2).key('project')._id, del.app_id);
                                                }, 10);
                                                return true;
                                            }
                                        });
                                    }
                                #link
                                    {
                                        setTimeout(_ => {
                                            app.ws.api.link_project_demo(block.parent(2).key('project')._id, link);
                                        }, 10);
                                    }
                                #application_details
                                    {
                                        var children = block.children();
                                        for (var c in children) {
                                            for (var a in application_details) {
                                                var application_detail = application_details[a];
                                                if (application_detail._id == children[c].key('id')) {
                                                    children[c].data(application_detail)
                                                }
                                            }
                                        }
                                    }
                                #applications
                                    {
                                        if (applications == undefined || !applications)
                                            applications = [];
                                        //console.log(applications);
                                        if (applications.length <= 0) {
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'center',
                                                    paddingTop: '15px',
                                                    paddingBottom: '10px',
                                                    minHeight: '45px',
                                                    borderTop: 'none',
                                                })
                                                .add(Block('text', 1)
                                                    .html('No applications associated with project.')
                                                    .css({
                                                        letterSpacing: '1.3px',
                                                        fontSize: '16px',
                                                        color: '#333',
                                                        fontStyle: 'italic',
                                                    })
                                                )
                                            ;
                                        } else {
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'left',
                                                    paddingTop: '0',
                                                    paddingBottom: '0',
                                                    minHeight: '105px',
                                                    borderTop: '1px solid #f6f6f6',
                                                })
                                            ;
                                            var first = true;
                                            for (var a in applications) {
                                                var application = applications[a];
                                                block.add(Block('project-application-list-item', `project_app_${application}`)
                                                    .data({
                                                        _id: application,
                                                        first: first
                                                    })
                                                );
                                                first = false;
                                            }
                                        }
                                        block.parent(2).on('update_grid');
                                        setTimeout(_ => {
                                            Block.queries();
                                        }, 10);
                                        setTimeout(_ => {
                                            app.ws.api.get_applications();
                                        }, 10);
                                    }
                            div end_spacer
                                css
                                    height 40px
            
            div applications
                $active_view content
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            app.ws.api.get_applications();
                        }, 20);
                    }
                :hide
                    css
                        display none
                #application_list
                    {
                        application_list = application_list.sort(util.sort_compare_newest_first);
                        block.key('application_list', application_list);

                        block.child('content').html('');
                        for (var a in application_list) {
                            var application_block_new = Block('application-item', `application_${application_list[a]._id.toString()}`).data(application_list[a]).key('application_metadata', application_list[a]);
                            block.child('content').add(application_block_new);
                        }
                        if (application_list.length > 2)
                            block.child('content').css('text-align', 'center');
                        else block.child('content').css('text-align', 'left');
                        if (application_list.length == 0) {
                            var msg = 'No applications found.';
                            block.child('content').html(`<div style="margin: 20px auto; text-align: center; padding-top: 2px;"><span class="noItemsMessage">${msg}</span></div>`);
                        }
                        Block.queries();
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                app.ui.mui_upgrade();
                            }, 10);
                        }, 10);
                    }
                #select_application
                    {
                        //console.log(select_application);
                        block.key('active_view', 'detail');
                        block.child('content').css('display', 'none')
                            .sibling('detail').css('display', 'block')
                            .data({ application: select_application })
                        ;
                        block.child('title').data({ select_application_name: `${select_application.name}` });
                        block.child('new_application_button').css('display', 'none');
                        block.child('application_filter').css('display', 'none');
                        block.child('close').on('show');
                        block.child('detail').on('update_grid');
                        setTimeout(_ => {
                            app.ws.api.get_resources();
                        }, 10);
                        setTimeout(_ => {
                            app.ws.api.signal_application(select_application._id, 'tail');
                        }, 20);
                        setTimeout(_ => {
                            app.ws.api.get_application_status(select_application._id);
                        }, 20);
                        setTimeout(_ => {
                            Block.queries();
                        }, 30);
                    }
                :deselect_application
                    {
                        //console.log('deselect_application');
                        if (block.key('active_view') != 'content') {
                            block.key('active_view', 'content');
                            block.child('detail').css('display', 'none')
                                .sibling('content').css('display', 'block')
                            ;
                            block.child('title').on('back');
                            block.child('new_application_button').css('display', 'inline-block');
                            block.child('application_filter').css('display', 'block');
                            block.child('close').on('hide');
                            block.child('detail/subcontent/application_process/logs/log_output').on('reset');
                            setTimeout(_ => {
                                app.ws.api.signal_application(block.child('detail').key('application')._id, 'untail');
                            }, 20);
                            setTimeout(_ => {
                                Block.queries();
                                setTimeout(_ => {
                                    app.ui.mui_upgrade();
                                }, 10);
                            }, 5);
                        }
                    }
                #update_application_local
                    {
                        //console.log('update_application_local', update_application_local);
                        var application_list = block.key('application_list');
                        for (var a in application_list) {
                            if (application_list[a]._id == update_application_local._id) {
                                application_list[a] = update_application_local;
                                break;
                            }
                        }
                        block.data({
                            application_list: application_list
                        });
                    }
                #update_application_field
                    {
                        //console.log('update_application_field', update_application_field);
                        var application_list = block.key('application_list');
                        for (var a in application_list) {
                            if (application_list[a]._id == update_application_field.id) {
                                application_list[a][update_application_field.field] = update_application_field.val;
                                break;
                            }
                        }
                        block.data({
                            application_list: application_list
                        });
                    }
                #delete_application
                    {
                        var application_info = block.child('detail').key('application');
                        if (application_info && application_info._id == delete_application) {
                            block.child('close/close_button').on('click');
                            setTimeout(_ => {
                                app.ws.api.get_applications();
                            }, 20);
                        }
                    }
                button new_application_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                    class mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                    :click
                        {
                            app.ui.display_modal.new_application();
                        }
                    {
                        block.css("background-color", app.ui.colors.primary);
                    }
                div application_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Applications
                    #select_application_name
                        {
                            block.child('text').html(`Applications&nbsp;&nbsp;/&nbsp;&nbsp;<span class='b600'>${select_application_name}</span>`);
                        }
                    :back
                        {
                            block.child('text').html('').data('Applications');
                            event.stopPropagation();
                        }
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.75
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                block close
                    css
                        height 40px
                        width 40px
                        position absolute
                        top 29px
                        right 12px
                        display none
                        pointer-events none
                        z-index 50
                    :hide
                        css 
                            display none
                            pointer-events none
                        {
                            event.stopPropagation();
                        }
                    :show
                        css
                            display table
                            pointer-events auto
                        {
                            event.stopPropagation();
                        }
                    button close_button
                        css
                            width 24px
                            heigth 24px
                            border none
                            background-color rgba(255, 255, 255, 0)
                            outline none
                            opacity 0.32
                            cursor pointer
                            border-radius 100%
                            transition opacity 0.2s ease
                        :mouseover
                            css
                                opacity 0.68
                        :mouseout
                            css
                                opacity 0.32
                        :click
                            {
                                block.parent().sibling('detail').on('hide_editors');
                                setTimeout(_ => {
                                    block.parent(1).on('deselect_application');
                                }, 10);
                            }
                        image x
                            src /img/x_b.png
                            height 24px
                            width 24px
                div content
                    css
                        width 100%
                        height auto
                        text-align center
                        padding-top 15px
                        padding-left 10px
                        padding-right 10px
                        box-sizing border-box
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                        }
                div detail
                    css
                        width 100%
                        height auto
                        text-align left
                        padding-top 0
                        padding-left 2px
                        padding-right 0
                        box-sizing border-box
                        display none
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    $reload_grid yes
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                            if (block.key('reload_grid') === 'yes') {
                                block.key('reload_grid', 'no');
                                block.on('update_grid');
                                setTimeout(_ => {
                                    block.key('reload_grid', 'yes');
                                }, 100);
                            }
                        }
                    :update_grid
                        {
                            //console.log('update_grid');
                            // set up masonry grid
                            $('div.masonry-grid-container').masonry({
                                // options
                                itemSelector: 'div.masonry-grid-container div.dashboard_detail_section',
                                columnWidth: app.ui.masonry_grid_size
                            });
                            event.stopPropagation();
                        }
                    #application
                        {
                            block.key('application', application);
                            application.environment.__port__ = application.port;
                            block.data({
                                name: application.name,
                                slug: application.slug,
                                description: application.description,
                                port: application.port,
                                host: application.host,
                                ecosystem: application.ecosystem,
                                environment: application.environment,
                                domains: application.domains,
                                primary_domain: application.primary_domain,
                                memory: application.memory,
                                status: application.status,
                                status_time: application.status_time,
                                proxy: application.proxy,
                                code: application.code,
                            });
                        }
                    #name
                        {
                            block.child('subcontent/application_info/name/value/text').html('').data(`${name}`);
                            block.child('subcontent/application_info/name/value_editor').attribute('value', `${name}`);
                            block.sibling('title').data({
                                select_application_name: `${name}`
                            });
                        }
                    #slug
                        {
                            block.child('subcontent/application_info/slug/value/text').html('').data(`${slug}`);
                            block.child('subcontent/application_info/slug/value_editor').attribute('value', `${slug}`);
                        }
                    #description
                        {
                            var description_alt = description;
                            if (description_alt == '') description_alt = '<span class="text_placeholder">Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</span>';
                            block.child('subcontent/application_info/description/value/text').html(`${description_alt}`);
                            block.child('subcontent/application_info/description/value_editor').attribute('value', `${description}`);
                        }
                    #port
                        {
                            //console.log(port);
                            var port_alt = `:${port}`;
                            if (port === null || port == "") {
                                port = '80';
                                port_alt = '<span class="text_placeholder">:80</span>';
                            }
                            block.child('subcontent/application_proxy/path_port_wrap/port/value/text').html(`${port_alt}`);
                            block.child('subcontent/application_proxy/path_port_wrap/port/value_editor').attribute('value', `${port}`);
                        }
                    #host
                        {
                            block.child('subcontent/application_info/host/value/text').data({ choose: `${host}`});
                        }
                    #ecosystem
                        {
                            var cwd = ecosystem.cwd;
                            var cwd_alt = cwd;
                            if (cwd_alt == '') cwd_alt = '<span class="text_placeholder">/var/www/application-zero</span>';
                            block.child('subcontent/application_ecosystem/cwd/value/text').html(`${cwd_alt}`);
                            block.child('subcontent/application_ecosystem/cwd/value_editor').attribute('value', `${cwd}`);

                            var static_dir = ecosystem.static_dir;
                            var static_dir_alt = static_dir;
                            if (static_dir_alt == '') static_dir_alt = '<span class="text_placeholder">/var/www/application-zero/html</span>';
                            block.child('subcontent/application_static/static_dir/value/text').html(`${static_dir_alt}`);
                            block.child('subcontent/application_static/static_dir/value_editor').attribute('value', `${static_dir}`);

                            var script = ecosystem.script;
                            var script_alt = script;
                            if (script_alt == '') script_alt = '<span class="text_placeholder">application-zero.sh</span>';
                            block.child('subcontent/application_ecosystem/script/value/text').html(`${script_alt}`);
                            block.child('subcontent/application_ecosystem/script/value_editor').attribute('value', `${script}`);

                            var interpreter = ecosystem.interpreter;
                            var interpreter_alt = interpreter;
                            if (interpreter_alt == '') interpreter_alt = '<span class="text_placeholder">#!/bin/bash</span>';
                            block.child('subcontent/application_ecosystem/interpreter/value/text').html(`${interpreter_alt}`);
                            block.child('subcontent/application_ecosystem/interpreter/value_editor').attribute('value', `${interpreter}`);

                            var out_file = ecosystem.out_file;
                            var out_file_alt = out_file;
                            if (out_file_alt == '') out_file_alt = '<span class="text_placeholder">application-zero.log</span>';
                            block.child('subcontent/application_ecosystem/out_file/value/text').html(`${out_file_alt}`);
                            block.child('subcontent/application_ecosystem/out_file/value_editor').attribute('value', `${out_file}`);

                            var error_file = ecosystem.error_file;
                            var error_file_alt = error_file;
                            if (error_file_alt == '') error_file_alt = '<span class="text_placeholder">application-zero.log</span>';
                            block.child('subcontent/application_ecosystem/error_file/value/text').html(`${error_file_alt}`);
                            block.child('subcontent/application_ecosystem/error_file/value_editor').attribute('value', `${error_file}`);

                            var max_memory_restart = ecosystem.max_memory_restart;
                            var max_memory_restart_alt = max_memory_restart;
                            if (max_memory_restart_alt == '') max_memory_restart_alt = '<span class="text_placeholder">5M</span>';
                            block.child('subcontent/application_ecosystem/max_memory_restart/value/text').html(`${max_memory_restart_alt}`);
                            block.child('subcontent/application_ecosystem/max_memory_restart/value_editor').attribute('value', `${max_memory_restart}`);

                            var restart_delay = ecosystem.restart_delay;
                            var restart_delay_alt = `${restart_delay}ms`;
                            if (restart_delay == '') restart_delay_alt = '<span class="text_placeholder">500ms</span>';
                            block.child('subcontent/application_ecosystem/restart_delay/value/text').html(`${restart_delay_alt}`);
                            block.child('subcontent/application_ecosystem/restart_delay/value_editor').attribute('value', `${restart_delay}`);

                            // cluster_mode
                            block.child('subcontent/application_ecosystem/cluster_mode/value/switch').data({
                                val: ecosystem.cluster_mode === true ? 'on' : 'off'
                            });

                            var args = ecosystem.args;
                            var args_alt = `${args}`;
                            if (args_alt == '') args_alt = '<span class="text_placeholder">--flagA arg0 arg1 arg2</span>';
                            block.child('subcontent/application_ecosystem/args/value/text').html(`${args_alt}`);
                            block.child('subcontent/application_ecosystem/args/value_editor').attribute('value', `${args}`);
                        }
                    #environment
                        {
                            //console.log('received application environment', environment);
                            block.child('subcontent/application_environment/list').data({
                                environment: environment
                            });
                        }
                    #domains
                        {
                            //console.log('received application domains', domains);
                            block.child('subcontent/application_domains/list').data({
                                domains: domains
                            });
                        }
                    #primary_domain
                        {
                            block.child('subcontent/application_domains/list').data({
                                primary: primary_domain
                            });
                        }
                    #memory
                        {
                            var b = block.child('subcontent/application_process/status');
                            b.key('memory', memory);
                            b.on('status_update');
                        }
                    #status
                        {
                            var b = block.child('subcontent/application_process/status');
                            b.key('status', status);
                            b.on('status_update');
                        }
                    #status_time
                        {
                            //console.log(status_time);
                            block.child('subcontent/application_process/status').key('status_time', status_time).on('status_update');
                        }
                    #proxy
                        {
                            // proxy enable
                            block.child('subcontent/application_proxy').data({
                                enabled: proxy.enable === true
                            });

                            // www
                            block.child('subcontent/application_proxy/www/value/switch').data({
                                val: proxy.www === true ? 'on' : 'off'
                            });
                            // htaccess_deny
                            block.child('subcontent/application_proxy/htaccess_deny/value/switch').data({
                                val: proxy.htaccess_deny === true ? 'on' : 'off'
                            });
                            // https_enable
                            block.child('subcontent/application_proxy/https_enable/value/switch').data({
                                val: proxy.https_enable === true ? 'on' : 'off'
                            });
                            // https_force
                            block.child('subcontent/application_proxy/https_force/value/switch').data({
                                val: proxy.https_force === true ? 'on' : 'off'
                            });
                            
                            // ws_enable
                            block.child('subcontent/application_proxy/ws_enable/value/switch').data({
                                val: proxy.ws_enable === true ? 'on' : 'off'
                            });
                            // ws_enable_path
                            //console.log(proxy);
                            var ws_enable_path_alt = `/${proxy.ws_enable_path}`;
                            if (proxy.ws_enable_path == '') ws_enable_path_alt = '<span class="text_placeholder">/socket</span>';
                            block.child('subcontent/application_proxy/ws_enable_path/value/text').html(`${ws_enable_path_alt}`);
                            block.child('subcontent/application_proxy/ws_enable_path/value_editor').attribute('value', `${proxy.ws_enable_path}`);
                            
                            // path
                            var path_alt = `/${proxy.path}`;
                            if (proxy.path == '') path_alt = '<span class="text_placeholder">/</span>';
                            block.child('subcontent/application_proxy/path_port_wrap/path/value/text').html(`${path_alt}`);
                            block.child('subcontent/application_proxy/path_port_wrap/path/value_editor').attribute('value', `${proxy.path}`);

                            // apache_vhost
                            block.child('subcontent/application_static/apache_vhost/value/switch').data({
                                val: proxy.apache_vhost === true ? 'on' : 'off'
                            });
                        }
                    #code
                        {
                            //console.log(code);
                            // repo
                            var repo_alt = code.repo;
                            var repo_alt_alt = repo_alt;
                            if (repo_alt == '') {
                                repo_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                repo_alt_alt = '#';
                                block.child('subcontent/application_code/repo/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/application_code/repo/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                            }
                            block.child('subcontent/application_code/repo/value/text').html(`${repo_alt}`).attribute('href', `${repo_alt_alt}`);
                            block.child('subcontent/application_code/repo/value_editor').attribute('value', `${code.repo}`); 

                            // branch
                            var branch_alt = `${code.branch}`;
                            if (code.branch == '') branch_alt = '<span class="text_placeholder">N/A</span>';
                            block.child('subcontent/application_code/branch/value/text').html(`${branch_alt}`);
                            block.child('subcontent/application_code/branch/value_editor').attribute('value', `${code.branch}`);

                            // path
                            var path = code.path;
                            var path_alt = path;
                            if (path_alt == '') path_alt = '<span class="text_placeholder">.</span>';
                            block.child('subcontent/application_code/path/value/text').html(`${path_alt}`);
                            block.child('subcontent/application_code/path/value_editor').attribute('value', `${code.path}`);

                        }
                    :status_update
                        {
                            block.child('subcontent/application_process/status').on('status_update');
                            event.stopPropagation();
                        }
                    :hide_editors
                        {
                            //setTimeout(_ => {
                                block.child('subcontent/application_info/name/value_editor').on('hide')
                                    .parent().sibling('slug').child('value_editor').on('hide')
                                    .parent().sibling('description').child('value_editor').on('hide')
                                    .parent()
                                .parent().sibling('application_proxy')
                                    .child('path_port_wrap')
                                    .child('port').child('value_editor').on('hide')
                                    .parent().sibling('path').child('value_editor').on('hide')
                                    .parent(1)
                                .parent().sibling('application_ecosystem')
                                    .child('cwd').child('value_editor').on('hide')
                                    //.parent().sibling('static_dir').child('value_editor').on('hide')
                                    .parent().sibling('args').child('value_editor').on('hide')
                                    .parent().sibling('out_file').child('value_editor').on('hide')
                                    .parent().sibling('error_file').child('value_editor').on('hide')
                                    .parent().sibling('script').child('value_editor').on('hide')
                                    .parent().sibling('interpreter').child('value_editor').on('hide')
                                    .parent().sibling('max_memory_restart').child('value_editor').on('hide')
                                    .parent().sibling('restart_delay').child('value_editor').on('hide')
                                    .parent()
                                .parent().sibling('application_process')
                                    .child('signal_toast').on('hide')
                                .parent().sibling('application_proxy')
                                    .child('signal_toast').on('hide')
                                .parent().sibling('application_static')
                                    .child('static_dir').child('value_editor').on('hide').parent()
                                .parent().sibling('application_info')
                                    .child('more_menu').on('hide')
                                ;
                            //}, 200);

                            /*
                                block.child('subcontent/application_ecosystem/cwd/value_editor').on('hide');
                                block.child('subcontent/application_ecosystem/args/value_editor').on('hide');
                                block.child('subcontent/application_ecosystem/out_file/value_editor').on('hide');
                                block.child('subcontent/application_ecosystem/error_file/value_editor').on('hide');
                                block.child('subcontent/application_ecosystem/script/value_editor').on('hide');
                                block.child('subcontent/application_ecosystem/interpreter/value_editor').on('hide');
                                block.child('subcontent/application_ecosystem/max_memory_restart/value_editor').on('hide');
                                block.child('subcontent/application_ecosystem/restart_delay/value_editor').on('hide');
                                block.child('subcontent/application_static/static_dir/value_editor').on('hide');
                                block.child('subcontent/application_process/signal_toast').on('hide');
                                block.child('subcontent/application_proxy/signal_toast').on('hide');
                                //block.child('subcontent/application_proxy/https_cert/value_editor').on('hide');
                                //block.child('subcontent/application_proxy/https_cert_key/value_editor').on('hide');
                                block.child('subcontent/application_info/more_menu').on('hide');
                            */
                        }
                    :receive_application_update
                        {
                            //console.log('receive_application_update', data);
                            var old_data = block.key('application');
                            var new_data = data;
                            if (old_data.name != new_data.name) {
                                block.data({ name: new_data.name, });
                                block.child('subcontent/application_info/name/value_editor').on('hide');
                            }
                            if (old_data.slug != new_data.slug) {
                                block.data({ slug: new_data.slug, });
                                block.child('subcontent/application_info/slug/value_editor').on('hide');
                            }
                            if (old_data.description != new_data.description) {
                                block.data({ description: new_data.description, });
                                block.child('subcontent/application_info/description/value_editor').on('hide');
                            }
                            if (old_data.port != new_data.port) {
                                block.data({ port: new_data.port, });
                                block.child('subcontent/application_proxy/path_port_wrap/port/value_editor').on('hide');
                            }
                            if (old_data.host != new_data.host) {
                                block.data({ host: new_data.host, });
                                block.child('subcontent/application_info/host/value').on('hide');
                                setTimeout(_ => {
                                    app.ws.api.signal_application(new_data._id, 'tail');
                                    app.ws.api.get_application_status(new_data._id);
                                }, 50);
                            }
                            if (old_data.memory != new_data.memory) {
                                block.data({ memory: new_data.memory });
                            }
                            if (old_data.status != new_data.status) {
                                block.data({ status: new_data.status });
                            }
                            if (old_data.status_time != new_data.status_time) {
                                block.data({ status_time: new_data.status_time });
                            }
                            //if (!new_data.environment) new_data.environment = {};
                            new_data.environment.__port__ = new_data.port;
                            if (JSON.stringify(old_data.environment) != JSON.stringify(new_data.environment)) {
                                block.data({ environment: new_data.environment, });
                                block.child('subcontent/application_environment/list').on('hide_editors');
                            }
                            var update_ecosystem = false;
                            if (old_data.ecosystem.cwd != new_data.ecosystem.cwd) {
                                update_ecosystem = true;
                                block.child('subcontent/application_ecosystem/cwd/value_editor').on('hide');
                            }
                            if (old_data.ecosystem.static_dir != new_data.ecosystem.static_dir) {
                                update_ecosystem = true;
                                block.child('subcontent/application_static/static_dir/value_editor').on('hide');
                            }
                            if (old_data.ecosystem.script != new_data.ecosystem.script) {
                                update_ecosystem = true;
                                block.child('subcontent/application_ecosystem/script/value_editor').on('hide');
                            }
                            if (old_data.ecosystem.interpreter != new_data.ecosystem.interpreter) {
                                update_ecosystem = true;
                                block.child('subcontent/application_ecosystem/interpreter/value_editor').on('hide');
                            }
                            if (old_data.ecosystem.out_file != new_data.ecosystem.out_file) {
                                update_ecosystem = true;
                                block.child('subcontent/application_ecosystem/out_file/value_editor').on('hide');
                            }
                            if (old_data.ecosystem.error_file != new_data.ecosystem.error_file) {
                                update_ecosystem = true;
                                block.child('subcontent/application_ecosystem/error_file/value_editor').on('hide');
                            }
                            if (old_data.ecosystem.max_memory_restart != new_data.ecosystem.max_memory_restart) {
                                update_ecosystem = true;
                                block.child('subcontent/application_ecosystem/max_memory_restart/value_editor').on('hide');
                            }
                            if (old_data.ecosystem.restart_delay != new_data.ecosystem.restart_delay) {
                                update_ecosystem = true;
                                block.child('subcontent/application_ecosystem/restart_delay/value_editor').on('hide');
                            }
                            if (old_data.ecosystem.cluster_mode != new_data.ecosystem.cluster_mode) {
                                update_ecosystem = true;
                            }
                            if (old_data.ecosystem.args != new_data.ecosystem.args) {
                                update_ecosystem = true;
                                block.child('subcontent/application_ecosystem/args/value_editor').on('hide');
                            }
                            if (update_ecosystem)
                                block.data({ ecosystem: new_data.ecosystem, });
                            var update_proxy = false;
                            if (old_data.proxy.enable != new_data.proxy.enable) {
                                update_proxy = true;
                            }
                            if (old_data.proxy.www != new_data.proxy.www) {
                                update_proxy = true;
                            }
                            if (old_data.proxy.htaccess_deny != new_data.proxy.htaccess_deny) {
                                update_proxy = true;
                            }
                            if (old_data.proxy.https_enable != new_data.proxy.https_enable) {
                                update_proxy = true;
                            }
                            if (old_data.proxy.https_force != new_data.proxy.https_force) {
                                update_proxy = true;
                            }
                            if (old_data.proxy.ws_enable != new_data.proxy.ws_enable) {
                                update_proxy = true;
                            }
                            if (old_data.proxy.ws_enable_path != new_data.proxy.ws_enable_path) {
                                update_proxy = true;
                                block.child('subcontent/application_proxy/ws_enable_path/value_editor').on('hide');
                            }
                            if (old_data.proxy.apache_vhost != new_data.proxy.apache_vhost) {
                                update_proxy = true;
                            }
                            if (old_data.proxy.path != new_data.proxy.path) {
                                update_proxy = true;
                                block.child('subcontent/application_proxy/path_port_wrap/path/value_editor').on('hide');
                            }
                            if (update_proxy) block.data({ proxy: new_data.proxy, });
                            var update_code = true;
                            if (old_data.code.repo != new_data.code.repo) {
                                update_code = true;
                            }
                            if (old_data.code.branch != new_data.code.branch) {
                                update_code = true;
                            }
                            if (old_data.code.path != new_data.code.path) {
                                update_code = true;
                            }
                            if (update_code) block.data({ code: new_data.code, });
                            if (new_data.hasOwnProperty('domains') && (!old_data.hasOwnProperty('domains') || JSON.stringify(old_data.domains) != JSON.stringify(new_data.domains))) 
                                block.data({ domains: new_data.domains });
                            if (new_data.hasOwnProperty('primary_domain') && new_data.primary_domain != old_data.primary_domain) 
                                block.data({ primary_domain: new_data.primary_domain });
                            block.key('application', new_data);
                        }
                    :send_application_update
                        {
                            app.ws.api.update_application(block.key('application')._id, data);
                            event.stopPropagation();
                        }
                    :delete_application
                        {
                            //console.log('delete_application');
                            var application_info = block.key('application');
                            //console.log(application_info);
                            if (application_info) {
                                app.ui.display_modal.generic_confirm("Delete Application", `Permanently delete application "${application_info.name}"?`, (result) => {
                                    if (result) {
                                        var confirm = window.confirm(`This action is not reversible  are you sure about deleting application "${application_info.name}"?`);
                                        if (confirm) {
                                            setTimeout(_ => {
                                                app.ws.api.delete_application(application_info._id);
                                            }, 30);
                                        }
                                        return true;
                                    }
                                });
                            }
                            event.stopPropagation();
                        }
                    div subcontent
                        class masonry-grid-container
                        css
                            padding 1px 1px
                        div application_info
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Application
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/api_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div name
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Name
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val Application Zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        // this is an edit button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                //block.parent(2).data('');
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                //console.log(block.parent(4).key('application').name);
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').name;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Application Zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        name: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div slug
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Identifier
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val application-zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').slug;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder application-zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        slug: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div description
                                class value_edge
                                text label
                                    val Description
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                                        class value_text
                                        css
                                            font-size 17px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').description;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 17px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        description: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div host
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Host
                                    class label_desc
                                #resource_list
                                    {
                                        block.child('value').data({
                                            resource_list: resource_list
                                        });
                                    }
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    :hide
                                        {
                                            block.child('text').node().blur();
                                            event.stopPropagation();
                                        }
                                    select text
                                        name application_host_select
                                        class value_select
                                        :change
                                            {
                                                var type_val = block.node().value;
                                                block.parent(4).on('send_application_update', {
                                                    host: type_val
                                                });
                                            }
                                        #choose
                                            {
                                                //console.log('choose', choose);
                                                var children = block.children();
                                                //console.log(children);
                                                for (var c in children)
                                                    children[c].node().removeAttribute('selected');
                                                block.key('last_chosen', choose);
                                                if (block.child(choose) == null) {
                                                    block.child('none').attribute('selected', 'selected');
                                                } else block.child(choose).attribute('selected', 'selected');
                                            }
                                        option none
                                            html None
                                            value none
                                            selected selected
                                    #resource_list
                                        {
                                            //console.log('resource list');
                                            block.child('text').html('');
                                            block.child('text').add(Block('option', 'none').data({
                                                value: 'none',
                                                html: 'None'
                                            }));
                                            for (var r in resource_list) {
                                                var resource = resource_list[r];
                                                //console.log(resource);
                                                block.child('text').add(Block('option', resource._id).data({
                                                    value: resource._id,
                                                    html: resource.name
                                                }));
                                            }
                                            var last_chosen = block.child('text').key('last_chosen');
                                            if (last_chosen != null && block.child('text').child(last_chosen) != null) {
                                                block.child('text').child(last_chosen).attribute('selected', 'selected');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                            block more_menu_button_wrap
                                css
                                    position absolute
                                    height 40px
                                    width 40px
                                    top 20px
                                    right 22px
                                button more_menu_button
                                    css
                                        outline none
                                        border none
                                        background-color rgba(255,255,255,0)
                                        height 33px
                                        width 33px
                                        margin 0 auto
                                        opacity 0.65
                                        padding 0
                                        display block
                                    image img
                                        src /img/more_b.png
                                        height 33px
                                        width 33px
                                        css
                                            margin 0 auto
                                    :click
                                        {
                                            block.parent().sibling('more_menu').on('toggle');
                                        }
                                    :mouseover
                                        css
                                            opacity 0.8
                                    :mouseout
                                        css
                                            opacity 0.65
                            div more_menu
                                $showing no
                                :toggle
                                    {
                                        if (block.key('showing') === 'yes') {
                                            block.on('hide');
                                        } else {
                                            block.on('show');
                                        }
                                    }
                                :show
                                    {
                                        block.key('showing', 'yes');
                                        block.css({ display: 'block' });
                                        event.stopPropagation();
                                    }
                                :hide
                                    {
                                        block.key('showing', 'no');
                                        block.css({ display: 'none' });
                                        event.stopPropagation();
                                    }
                                css
                                    position absolute
                                    height 90px
                                    width 85px
                                    top 0
                                    right -85px
                                    border-radius 4px
                                    border 1px solid #efefef
                                    background-color white
                                    display none
                                    -webkit-box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    font-size 12.5px
                                    letter-spacing 0.8px
                                    opacity 0.98
                                    z-index 200
                                div menu-item-1
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                        border-radius 4px 4px 0 0
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Lorem
                                        :click
                                            {
                                                console.log('Lorem');
                                            }
                                div menu-item-2
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Ipsum
                                        :click
                                            {
                                                console.log('Ipsum');
                                            }
                                div menu-item-3
                                    css
                                        height 30px
                                        border-bottom none
                                        box-sizing border-box
                                        border-radius 0 0 4px 4px
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                            color rgb(209, 36, 36)
                                        html Delete
                                        :click
                                            {
                                                //console.log('Delete');
                                                block.parent(4).on('delete_application');
                                            }
                        div application_process
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Process
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/gear_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div status
                                class value_edge
                                css
                                    margin-bottom 20px
                                :status_update
                                    {
                                        var memory_usage = block.key('memory');
                                        var status_code = block.key('status');
                                        var status_time = block.key('status_time');
                                        var status_final_text = "Status some time ago";
                                        var status_final_color = app.ui.colors.status.default;
                                        //console.log(Date.now() - status_time);
                                        //console.log(util.duration_desc(status_time));
                                        if (status_code != null && status_time != null) {
                                            status_final_text = status_code.charAt(0).toUpperCase() + status_code.slice(1) + " " + (status_code == "online" && (Date.now() - status_time < 5000) ? "now" : util.duration_desc(status_time));
                                            status_final_color = app.ui.get_status_color(status_code);
                                        }
                                        block.child('value/labels/status/text').html('').data(status_final_text);
                                        block.child('value/light/circle').css('background-color', status_final_color);
                                        //console.log('memory_usage',memory_usage);
                                        if (memory_usage == null) memory_usage = '0';
                                        memory_usage += 'mb';
                                        block.child('value/labels/memory/text').html('').data(memory_usage);
                                        event.stopPropagation();
                                    }
                                text label
                                    val Status
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                div value
                                    class value_text_wrap
                                    css
                                        height 32px
                                        width 100%
                                    block light
                                        css
                                            width 30px
                                            height 100%
                                            float left
                                        div circle
                                            css
                                                border-radius 100%
                                                height 17px
                                                width 17px
                                                background-color #ddd
                                                border 1px solid #eee
                                                margin 0 0 0 auto
                                    div labels
                                        css
                                            width 83%
                                            height 100%
                                            float left
                                            padding-left 18px
                                            box-sizing border-box
                                        block status
                                            css
                                                height 100%
                                                width 80%
                                                display inline-table
                                                vertical-align middle
                                            text text
                                                val Status some time ago
                                                css
                                                    display block
                                                    text-align left
                                                    font-size 14px
                                                    color #888
                                                    font-style italic
                                                    //padding-top 2px
                                        block memory
                                            css
                                                height 100%
                                                width 20%
                                                display inline-table
                                                vertical-align middle
                                            text text
                                                val 0mb
                                                css
                                                    display block
                                                    text-align right
                                                    font-size 15px
                                                    color #777
                                                    //font-style italic
                                                    //padding-top 2px
                            div signals
                                class value_edge
                                css
                                    width 99%
                                    margin-bottom 10px
                                text label
                                    val Signals
                                    class label_desc
                                block start
                                    css
                                        width 29%
                                        display inline-table
                                        vertical-align top
                                        height 50px
                                    div start_wrap
                                        css
                                            height 80%
                                            width 80%
                                            margin 0 auto
                                        block label_wrap
                                            css
                                                display inline-table
                                                width calc(100% - 38px)
                                                font-size 20px
                                            text text
                                                val Start
                                                css
                                                    cursor default
                                        block image_wrap
                                            css
                                                width 38px
                                                display inline-table
                                            image image
                                                src /img/play_b.png
                                                height 38px
                                                width 38px
                                                css
                                                    opacity 0.7
                                                    transition opacity 0.2s ease
                                                    cursor pointer
                                                :mouseover
                                                    css
                                                        opacity 0.95
                                                :mouseout
                                                    css
                                                        opacity 0.7
                                                :click
                                                    {
                                                        var application_id = block.parent(6).key('application')._id;
                                                        app.ws.api.signal_application(application_id, 'start');
                                                    }
                                block restart
                                    css
                                        width 40%
                                        display inline-table
                                        vertical-align top
                                        height 50px
                                    div restart_wrap
                                        css
                                            height 80%
                                            width 80%
                                            margin 0 auto
                                        block label_wrap
                                            css
                                                display inline-table
                                                width calc(100% - 36px)
                                                font-size 20px
                                            text text
                                                val Restart
                                                css
                                                    cursor default
                                        block image_wrap
                                            css
                                                width 36px
                                                display inline-table
                                            image image
                                                src /img/restart_b.png
                                                height 36px
                                                width 36px
                                                css
                                                    opacity 0.7
                                                    transition opacity 0.2s ease
                                                    cursor pointer
                                                :mouseover
                                                    css
                                                        opacity 0.95
                                                :mouseout
                                                    css
                                                        opacity 0.7
                                                :click
                                                    {
                                                        var application_id = block.parent(6).key('application')._id;
                                                        app.ws.api.signal_application(application_id, 'restart');
                                                    }
                                block stop
                                    css
                                        width 30%
                                        display inline-table
                                        vertical-align top
                                        height 50px
                                    div stop_wrap
                                        css
                                            height 80%
                                            width 80%
                                            margin 0 auto
                                        block label_wrap
                                            css
                                                display inline-table
                                                width calc(100% - 38px)
                                                font-size 20px
                                            text text
                                                val Stop
                                                css
                                                    cursor default
                                        block image_wrap
                                            css
                                                width 38px
                                                display inline-table
                                            image image
                                                src /img/stop_b.png
                                                height 38px
                                                width 38px
                                                css
                                                    opacity 0.7
                                                    transition opacity 0.2s ease
                                                    cursor pointer
                                                :mouseover
                                                    css
                                                        opacity 0.95
                                                :mouseout
                                                    css
                                                        opacity 0.7
                                                :click
                                                    {
                                                        var application_id = block.parent(6).key('application')._id;
                                                        app.ws.api.signal_application(application_id, 'stop');
                                                    }
                            div logs
                                class value_edge
                                css
                                    position relative
                                text label
                                    val Logs
                                    class label_desc
                                #line
                                    {
                                        block.child('log_output').add(Block('div', 'line_' + line.timestamp)
                                            .class((line.hasOwnProperty('initial') && line.initial === true) ? 'application_log_output_line_initial' : 'application_log_output_line')
                                            //.html(`${line.value}`)
                                            .add(Block('text', 1).html(`${line.value}`).css({
                                                height: line.value == '' ? '8px' : 'auto',
                                                display: line.value == '' ? 'block' : 'inline-block',
                                            }))
                                            .on('release', (e, b, d) => {
                                                setTimeout(_ => {
                                                    b.css('background-color', 'rgba(50,50,50,0)');
                                                }, 50);
                                            })
                                            .on('release')
                                        );
                                        setTimeout(_ => {
                                            $log_output = block.child('log_output').$();
                                            $log_output.scrollTop($log_output[0].scrollHeight);
                                        }, 55);
                                    }
                                div log_refresh
                                    css
                                        position absolute
                                        top 0
                                        right 1px
                                        height 20px
                                        width 20px
                                        border-radius 90%
                                        opacity 0.4
                                        cursor pointer
                                        transition opacity 0.2s ease
                                    image image
                                        src /img/refresh_b.png
                                        height 20px
                                        width 20px
                                    :mouseover
                                        css
                                            opacity 0.8
                                    :mouseout
                                        css
                                            opacity 0.4
                                    :click
                                        {
                                            block.sibling('log_output').on('reset');
                                            var app_info = block.parent(3).key('application');
                                            setTimeout(_ => {
                                                setTimeout(_ => {
                                                    app.ws.api.signal_application(app_info._id, 'tail');
                                                }, 20);
                                                setTimeout(_ => {
                                                    app.ws.api.get_application_status(app_info._id);
                                                }, 20);
                                                setTimeout(_ => {
                                                    Block.queries();
                                                }, 30);
                                            }, 20);
                                        }
                                div log_output
                                    class application_log_output
                                    css
                                        overflow-y auto
                                        overflow-x hidden
                                        min-height 220px
                                        height 350px
                                        width 100%
                                        background-color #f9f9f9
                                        border-radius 4px
                                        border 1px solid #eee
                                        margin-top 6px
                                        //overflow-wrap break-word
                                        //word-break break-all
                                        box-sizing border-box
                                        padding 8px 12px
                                        -webkit-overflow-scrolling touch
                                    :reset
                                        {
                                            block.html('').add(Block('div', 'placeholder_line')
                                                .class('application_log_output_line_initial')
                                                .css({
                                                    'font-style': 'italic',
                                                    'text-decoration': 'underline',
                                                    //'font-weight': '600',
                                                    'letter-spacing': '0.7px',
                                                    'background-color': 'rgba(50,50,50,0)'
                                                })
                                                .add(Block('text', 1)
                                                    .data('Stream application logs.')
                                                )
                                            );
                                            event.stopPropagation();
                                        }
                                    {
                                        block.on('reset');
                                    }
                            div signal_toast
                                css
                                    position absolute
                                    top 5px
                                    right 18px
                                    width 200px
                                    background-color #333
                                    opacity 0
                                    border-radius 3px
                                    height 40px
                                    -webkit-box-shadow 2px 2px 5px 2px rgba(44, 44, 44, 0.2)
                                    box-shadow 2px 2px 5px 2px rgba(44, 44, 44, 0.2)
                                    transition opacity 0.2s ease, top 0.25s ease, background-color 0.1s ease
                                    cursor pointer
                                #color
                                    {
                                        block.css('background-color', `${color}`);
                                    }
                                #val
                                    {
                                        block.child('content/text').html(val);
                                    }
                                #summon
                                    {
                                        const _b = block;
                                        _b.data(summon);
                                        _b.on('show');
                                        setTimeout(_ => {
                                            _b.on('hide');
                                        }, 5000);
                                    }
                                :show
                                    css
                                        top 22px
                                        opacity 0.9
                                    {
                                        block.key('toggled', 'yes');
                                        event.stopPropagation();
                                    }
                                :hide
                                    css
                                        top 5px
                                        opacity 0
                                    {
                                        block.key('toggled', 'no');
                                        event.stopPropagation();
                                    }
                                $toggled no
                                :toggle
                                    {
                                        if (block.key('toggled') == 'no') {
                                            block.on('show');
                                        } else {
                                            block.on('hide');
                                        }
                                        event.stopPropagation();
                                    }
                                :click
                                    {
                                        block.on('toggle');
                                    }
                                block content
                                    text text
                                        val This is a toast!
                                        css
                                            color white
                                            letter-spacing 0.1px
                                            cursor pointer
                            div end_spacer
                                css
                                    height 15px
                        div application_ecosystem
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Ecosystem
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/ethernet_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div cwd
                                class value_edge
                                text label
                                    val Directory
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val /var/www/application-zero
                                        class value_text
                                        css
                                            font-size 17px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').ecosystem.cwd;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder /var/www/application-zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 17px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'ecosystem.cwd': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div script
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Script
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val application-zero.sh
                                        class value_text
                                        css
                                            font-size 22px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').ecosystem.script;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder application-zero.sh
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                        font-size 22px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'ecosystem.script': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div interpreter
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Interpreter
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val #!/bin/bash
                                        class value_text
                                        css
                                            font-size 20px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').ecosystem.interpreter;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder #!/bin/bash
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                        font-size 20px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'ecosystem.interpreter': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div args
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Arguments
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val --flagA arg0 arg1 arg2
                                        class value_text
                                        css
                                            font-size 20px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').ecosystem.args;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder --flagA arg0 arg1 arg2
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                        font-size 20px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'ecosystem.args': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            {
                                var wrapperA = Block('div', 'wrapperA');
                                block.__add(wrapperA).setAdd(wrapperA);
                            }
                            div out_file
                                class value_edge
                                css
                                    margin-bottom 20px
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Output Log
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val application-zero.log
                                        class value_text
                                        css
                                            font-size 19px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').ecosystem.out_file;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder application-zero.log
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                        font-size 19px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'ecosystem.out_file': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div error_file
                                class value_edge
                                css
                                    margin-bottom 20px
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Error Log
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val application-zero.log
                                        class value_text
                                        css
                                            font-size 19px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').ecosystem.error_file;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder application-zero.log
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                        font-size 19px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'ecosystem.error_file': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            {
                                var wrapperB = Block('div', 'wrapperB');
                                block.__add(wrapperB).setAdd(wrapperB);
                            }
                            div max_memory_restart
                                class value_edge
                                css
                                    margin-bottom 20px
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Memory Limit
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val 5M
                                        class value_text
                                        css
                                            font-size 22px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').ecosystem.max_memory_restart;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder 5M
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                        font-size 22px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'ecosystem.max_memory_restart': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div restart_delay
                                class value_edge
                                css
                                    margin-bottom 20px
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Restart Delay
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val 500ms
                                        class value_text
                                        css
                                            font-size 22px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').ecosystem.restart_delay;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder 500ms
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                        font-size 22px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'ecosystem.restart_delay': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div cluster_mode
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Exec Mode
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Cluster
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                //minWidth: '55px',
                                                marginRight: '10px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Cluster' : 'Fork') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_application_update', {
                                                    'ecosystem.cluster_mode': value
                                                });
                                                event.stopPropagation();
                                            }
                            div end_spacer
                                css
                                    height 15px
                        div application_proxy
                            class dashboard_detail_section
                            css
                                min-height 100px
                            #enabled
                                {
                                    var proxy_display_val = enabled === true ? 'inline-block' : 'none';
                                    block.child('www').css('display', proxy_display_val)
                                        .sibling('https_enable').css('display', proxy_display_val)
                                        .sibling('htaccess_deny').css('display', proxy_display_val)
                                        .sibling('https_force').css('display', proxy_display_val)
                                        .sibling('ws_enable').css('display', proxy_display_val)
                                        .sibling('ws_enable_path').css('display', proxy_display_val)
                                        .sibling('ws_enable').css('display', proxy_display_val)
                                        .sibling('ws_enable_path').css('display', proxy_display_val)
                                        .sibling('path_port_wrap').child('path').css('display', proxy_display_val)
                                    ;
                                    block.child('enable/switch').data({
                                        val: enabled === true ? 'on' : 'off'
                                    });
                                    block.child('save_button_wrap').css({
                                        opacity: (enabled === true ? '1' : '0.6'),
                                        pointerEvents: (enabled === true ? 'auto' : 'none')
                                    });
                                }
                            block enable
                                css
                                    position absolute
                                    top 16px
                                    right 75px
                                    width auto
                                    height 50px
                                    z-index 99
                                switch switch
                                    val on
                                    label On
                                    css
                                        margin 0
                                        transform scale(0.85)
                                    {
                                        block.child('label').css({
                                            minWidth: '25px',
                                            marginRight: '10px',
                                            fontWeight: '300'
                                        });
                                    }
                                    :modified
                                        {
                                            //console.log('updated to ' + block.key('state'));
                                            var value = block.key('state') === true;
                                            block.data({ label: (value ? 'On' : 'Off') });
                                            if (data.hasOwnProperty('locked') && data.locked == true) return;
                                            block.parent(3).on('send_application_update', {
                                                'proxy.enable': value
                                            });
                                            if (value === false) {
                                                setTimeout(_ => {
                                                    app.ws.api.remove_application_proxy(block.parent(3).key('application')._id);
                                                }, 20);
                                            } else {
                                                setTimeout(_ => {
                                                    app.ws.api.push_application_proxy(block.parent(3).key('application')._id);
                                                }, 20);
                                            }
                                            event.stopPropagation();
                                        }
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Proxy
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/nginx_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                    height 80px
                            div path_port_wrap
                                css
                                    height auto
                                    vertical-align top
                                div port
                                    class value_edge
                                    css
                                        margin-bottom 20px
                                        vertical-align top
                                        display inline-block
                                        box-sizing border-box
                                        width 50%
                                    text label
                                        val Port
                                        class label_desc
                                        css
                                            margin-bottom 3px
                                    block value
                                        {
                                            block.__child('content').css('text-align', 'left');
                                        }
                                        class value_text_wrap
                                        css
                                            height 25.2px
                                        text text
                                            val :80
                                            class value_text
                                            css
                                                font-size 21px
                                        :mouseover
                                            {
                                                if (block.child('edit_button').key('showing') == 'off')
                                                    block.child('edit_button').on('show');
                                            }
                                        :mouseout
                                            {
                                                if (block.child('edit_button').key('showing') == 'on')
                                                    block.child('edit_button').on('hide');
                                            }
                                        edit-button edit_button
                                            // this is an edit button
                                            css
                                                margin-left 12px
                                                padding-top 4px
                                            :click
                                                {
                                                    //block.parent(2).data('');
                                                    block.parent().css('display', 'none')
                                                        .sibling('value_editor').css('display', 'block');
                                                    //console.log(block.parent(4).key('application').port);
                                                    block.parent().sibling('value_editor').node().value = block.parent(5).key('application').port;
                                                    setTimeout(_ => {
                                                        block.parent().sibling('value_editor').node().select();
                                                    }, 15);
                                                }
                                    input value_editor
                                        class value_editor
                                        placeholder 80
                                        css
                                            display none
                                            height 27px
                                            margin-top -2px
                                            margin-left -2px
                                            margin-bottom 2px
                                            width 75%
                                            font-size 21px
                                        :hide
                                            {
                                                block.css('display', 'none').sibling('value').css('display', 'table');
                                                event.stopPropagation();
                                            }
                                        :keyup
                                            {
                                                if (event.keyCode == 13) {
                                                    // enter
                                                    var value = block.node().value;
                                                    if (!value) value = '';
                                                    /*
                                                    if (value === '') value = null;
                                                    else value = parseInt((`${value}`).trim());
                                                    if (value == null || (value != NaN && value >= 0)) {
                                                        block.parent(3).on('send_application_update', {
                                                            'port': value
                                                        });
                                                    }
                                                    */
                                                    value = (`${value}`).trim();
                                                    //if (value.length > 0) {
                                                        block.parent(3).on('send_application_update', {
                                                            'port': value
                                                        });
                                                    //}
                                                    setTimeout(_ => { block.on('hide'); }, 250);
                                                } else if (event.keyCode == 27) {
                                                    // escape
                                                    block.on('hide');
                                                }
                                            }
                                div path
                                    class value_edge
                                    css
                                        margin-bottom 20px
                                        vertical-align top
                                        display inline-block
                                        box-sizing border-box
                                        width 50%
                                    text label
                                        val Endpoint
                                        class label_desc
                                    block value
                                        {
                                            block.__child('content').css('text-align', 'left');
                                        }
                                        class value_text_wrap
                                        css
                                            height 25.2px
                                        text text
                                            val /
                                            class value_text
                                            css
                                                font-size 20px
                                        :mouseover
                                            {
                                                if (block.child('edit_button').key('showing') == 'off')
                                                    block.child('edit_button').on('show');
                                            }
                                        :mouseout
                                            {
                                                if (block.child('edit_button').key('showing') == 'on')
                                                    block.child('edit_button').on('hide');
                                            }
                                        edit-button edit_button
                                            css
                                                margin-left 12px
                                                padding-top 4px
                                            :click
                                                {
                                                    block.parent().css('display', 'none')
                                                        .sibling('value_editor').css('display', 'block');
                                                    block.parent().sibling('value_editor').node().value = block.parent(5).key('application').proxy.path;
                                                    setTimeout(_ => {
                                                        block.parent().sibling('value_editor').node().select();
                                                    }, 15);
                                                }
                                    input value_editor
                                        class value_editor
                                        placeholder api
                                        css
                                            display none
                                            height 27px
                                            margin-top -2.5px
                                            margin-left -2px
                                            margin-bottom 2.5px
                                            width 75%
                                            font-size 20px
                                        :hide
                                            {
                                                block.css('display', 'none').sibling('value').css('display', 'table');
                                                event.stopPropagation();
                                            }
                                        :keyup
                                            {
                                                if (event.keyCode == 13) {
                                                    // enter
                                                    var value = block.node().value;
                                                    if (!value) value = '';
                                                    value = (`${value}`).trim();
                                                    //if (value.length > 0) {
                                                        block.parent(3).on('send_application_update', {
                                                            'proxy.path': value
                                                        });
                                                    //}
                                                    setTimeout(_ => { block.on('hide'); }, 250);
                                                } else if (event.keyCode == 27) {
                                                    // escape
                                                    block.on('hide');
                                                }
                                            }
                            div www
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val WWW Alias
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Aliased
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                //minWidth: '55px',
                                                marginRight: '10px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Alias' : 'None') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_application_update', {
                                                    'proxy.www': value
                                                });
                                                event.stopPropagation();
                                            }
                            div https_enable
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val HTTPS Enable
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Enable
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                //minWidth: '55px',
                                                marginRight: '10px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Enable' : 'Disable') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_application_update', {
                                                    'proxy.https_enable': value
                                                });
                                                event.stopPropagation();
                                            }
                            div htaccess_deny
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val HTAccess Deny 
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Deny
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                minWidth: '75px',
                                                marginRight: '6px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Deny' : 'Allow') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_application_update', {
                                                    'proxy.htaccess_deny': value
                                                });
                                                event.stopPropagation();
                                            }
                            div https_force
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val HTTPS Force
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Force
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                minWidth: '75px',
                                                marginRight: '6px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Force' : 'Pass') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_application_update', {
                                                    'proxy.https_force': value
                                                });
                                                event.stopPropagation();
                                            }
                            div ws_enable
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val WebSocket Endpoint
                                    class label_desc
                                    css
                                        padding-bottom 8px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Forward
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                //minWidth: '55px',
                                                marginRight: '10px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Forward' : 'Block') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_application_update', {
                                                    'proxy.ws_enable': value
                                                });
                                                event.stopPropagation();
                                            }
                            div ws_enable_path
                                class value_edge
                                css
                                    display inline-block
                                text label
                                    val Endpoint
                                    class label_desc
                                    css
                                        margin-bottom 10px
                                        opacity 0
                                        pointer-events none
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val socket
                                        class value_text
                                        css
                                            font-size 19px
                                            word-break break-all
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').proxy.ws_enable_path;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder socket
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 19px
                                        width 95%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'proxy.ws_enable_path': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div signal_toast
                                css
                                    position absolute
                                    top 5px
                                    right 78px
                                    width 180px
                                    background-color #333
                                    opacity 0
                                    border-radius 3px
                                    height 40px
                                    -webkit-box-shadow 2px 2px 5px 2px rgba(44, 44, 44, 0.2)
                                    box-shadow 2px 2px 5px 2px rgba(44, 44, 44, 0.2)
                                    transition opacity 0.2s ease, top 0.25s ease, background-color 0.1s ease
                                    cursor pointer
                                    z-index 100
                                    pointer-events none
                                #color
                                    {
                                        block.css('background-color', `${color}`);
                                    }
                                #val
                                    {
                                        block.child('content/text').html(val);
                                    }
                                #summon
                                    {
                                        const _b = block;
                                        _b.data(summon);
                                        _b.on('show');
                                        setTimeout(_ => {
                                            _b.on('hide');
                                        }, 5000);
                                    }
                                :show
                                    css
                                        top 22px
                                        opacity 0.9
                                        pointer-events auto
                                    {
                                        block.key('toggled', 'yes');
                                        event.stopPropagation();
                                    }
                                :hide
                                    css
                                        top 5px
                                        opacity 0
                                        pointer-events none
                                    {
                                        block.key('toggled', 'no');
                                        event.stopPropagation();
                                    }
                                $toggled no
                                :toggle
                                    {
                                        if (block.key('toggled') == 'no') {
                                            block.on('show');
                                        } else {
                                            block.on('hide');
                                        }
                                        event.stopPropagation();
                                    }
                                :click
                                    {
                                        block.on('toggle');
                                    }
                                block content
                                    text text
                                        val This is a toast!
                                        css
                                            color white
                                            letter-spacing 0.1px
                                            cursor pointer
                            div end_spacer
                                css
                                    height 20px
                            block save_button_wrap
                                css
                                    position absolute
                                    height 40px
                                    width 40px
                                    top 20px
                                    right 23px
                                button save_button
                                    css
                                        outline none
                                        border none
                                        background-color rgba(255,255,255,0)
                                        height 30px
                                        width 30px
                                        margin 0 auto
                                        opacity 0.6
                                        padding 0
                                        display block
                                        transition opacity 0.2s ease
                                    image img
                                        src /img/save_b.png
                                        height 30px
                                        width 30px
                                        css
                                            margin 0 auto
                                    :click
                                        {
                                            setTimeout(_ => {
                                                app.ws.api.push_application_proxy(block.parent(3).key('application')._id);
                                            }, 20);
                                        }
                                    :mouseover
                                        css
                                            opacity 0.75
                                    :mouseout
                                        css
                                            opacity 0.6
                        div application_environment
                            class dashboard_detail_section
                            css
                                min-height 160px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Environment
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/braces_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div add_field
                                css
                                    position absolute
                                    top 23px
                                    right 25px
                                    width 40px
                                    height 40px
                                block plus
                                    css
                                        opacity 0.6
                                        transition opacity 0.2s ease
                                    :mouseover
                                        css
                                            opacity 0.9
                                    :mouseout
                                        css
                                            opacity 0.6
                                    image image
                                        src /img/add_b.png
                                        height 30px
                                        width 30px
                                        css
                                            cursor pointer
                                        :click
                                            {
                                                var env_local = block.parent(1).sibling('list').key('environment_local');
                                                var new_key_name = 'field-' + Object.keys(env_local).length;
                                                for (var z = 1; env_local.hasOwnProperty(new_key_name); z++)
                                                    new_key_name += '-' + z;
                                                var new_field_val = 'value-' + Object.keys(env_local).length * 5;
                                                block.parent(1).sibling('list').on('update', {
                                                    key: new_key_name,
                                                    val: new_field_val,
                                                    from: '',
                                                });
                                                event.stopPropagation();
                                            }
                            div list
                                css
                                    //background-color red
                                    width 100%
                                    max-height 250px
                                    height auto
                                    min-height 45px
                                    overflow-x none
                                    overflow-y auto
                                {
                                    block.key('environment_local', {});
                                }
                                #environment
                                    {
                                        if (environment) {
                                            var env_copy = JSON.parse(JSON.stringify(environment));
                                            delete env_copy['__port__'];
                                            block.key('environment_local',  env_copy);
                                            //console.log(env_copy);
                                        }
                                        var port = null;
                                        var port_sck = null;
                                        if (environment.hasOwnProperty('__port__')) {
                                            if (environment.__port__) {
                                                if (environment.__port__.includes('/')) {
                                                    port = environment.__port__.split('/');
                                                    port_sck = parseInt(port[1]);
                                                    port = parseInt(port[0]);
                                                } else port = parseInt(environment.__port__);
                                            }
                                            delete environment['__port__'];
                                        }
                                        if (port !== null) environment['PORT'] = port;
                                        if (port_sck !== null) environment['PORT_SCK'] = port_sck;
                                        //console.log(environment, port, port_sck);
                                        //console.log(Object.keys(environment).length);
                                        if (Object.keys(environment).length <= 0) {
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'center',
                                                    paddingTop: '15px',
                                                    paddingBottom: '10px',
                                                    minHeight: '45px',
                                                    borderTop: 'none',
                                                })
                                                .add(Block('text', 1)
                                                    .html('No environment variables for application.')
                                                    .css({
                                                        letterSpacing: '1.3px',
                                                        fontSize: '16px',
                                                        color: '#333',
                                                        fontStyle: 'italic',
                                                    })
                                                )
                                            ;
                                        } else {
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'left',
                                                    paddingTop: '0',
                                                    paddingBottom: '0',
                                                    minHeight: '105px',
                                                    borderTop: '1px solid #f6f6f6',
                                                })
                                            ;
                                            var first = true;
                                            for (var env_key in environment) {
                                                var env_value = environment[env_key];
                                                block.add(Block('application-environment-list-item', `app_env_${env_key}`)
                                                    .data({ env_key: env_key, env_value: env_value }).data({
                                                        first: first
                                                    })
                                                );
                                                first = false;
                                            }
                                        }
                                        block.parent(2).on('update_grid');
                                        setTimeout(_ => {
                                            Block.queries();
                                        }, 10);
                                    }
                                :rename
                                    {
                                        var env_local = block.key('environment_local');
                                        if (data.from !== data.to) {
                                            console.log('rename value "' + data.from + '" to "' + data.to + '"');
                                            env_local[data.to] = env_local[data.from];
                                            delete env_local[data.from];
                                            block.parent(2).on('send_application_update', {
                                                environment: env_local
                                            });
                                        }
                                        event.stopPropagation();
                                    }
                                :remove
                                    {
                                        var env_local = block.key('environment_local');
                                        console.log('remove value "' + data.key + '"');
                                        delete env_local[data.key];
                                        block.parent(2).on('send_application_update', {
                                            environment: env_local
                                        });
                                        event.stopPropagation();
                                    }
                                :update
                                    {
                                        var env_local = block.key('environment_local');
                                        console.log('update value ' + data.key + ' from "' + data.from + '" to "' + data.val + '"');
                                        env_local[data.key] = data.val;
                                        block.parent(2).on('send_application_update', {
                                            environment: env_local
                                        });
                                        event.stopPropagation();
                                    }
                                :hide_editors
                                    {
                                        var children = block.children();
                                        for (var c in children)
                                            children[c].on('hide_editor');
                                        event.stopPropagation();
                                    }
                            div end_spacer
                                css
                                    height 15px
                        div application_code
                            class dashboard_detail_section
                            css
                                min-height 100px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Code
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/code_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                    height 80px
                            div repo
                                class value_edge
                                text label
                                    val Repository
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://github.com/u/applicationzero
                                        href https://github.com/u/applicationzero
                                        class value_text
                                        target _blank
                                        css
                                            font-size 18px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').code.repo;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://github.com/u/applicationzero
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 18px
                                        width 90%
                                        letter-spacing normal
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'code.repo': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div branch
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Branch
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val master
                                        class value_text
                                        css
                                            font-size 20px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').code.branch;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder master
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                        font-size 20px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'code.branch': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div path
                                class value_edge
                                text label
                                    val Package Path
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val .
                                        class value_text
                                        css
                                            font-size 17px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').code.path;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder .
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 17px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'code.path': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div signal_toast
                                css
                                    position absolute
                                    top 5px
                                    right 78px
                                    width 180px
                                    background-color #333
                                    opacity 0
                                    border-radius 3px
                                    height 40px
                                    -webkit-box-shadow 2px 2px 5px 2px rgba(44, 44, 44, 0.2)
                                    box-shadow 2px 2px 5px 2px rgba(44, 44, 44, 0.2)
                                    transition opacity 0.2s ease, top 0.25s ease, background-color 0.1s ease
                                    cursor pointer
                                    z-index 100
                                    pointer-events none
                                #color
                                    {
                                        block.css('background-color', `${color}`);
                                    }
                                #val
                                    {
                                        block.child('content/text').html(val);
                                    }
                                #summon
                                    {
                                        const _b = block;
                                        _b.data(summon);
                                        _b.on('show');
                                        setTimeout(_ => {
                                            _b.on('hide');
                                        }, 5000);
                                    }
                                :show
                                    css
                                        top 22px
                                        opacity 0.9
                                        pointer-events auto
                                    {
                                        block.key('toggled', 'yes');
                                        event.stopPropagation();
                                    }
                                :hide
                                    css
                                        top 5px
                                        opacity 0
                                        pointer-events none
                                    {
                                        block.key('toggled', 'no');
                                        event.stopPropagation();
                                    }
                                $toggled no
                                :toggle
                                    {
                                        if (block.key('toggled') == 'no') {
                                            block.on('show');
                                        } else {
                                            block.on('hide');
                                        }
                                        event.stopPropagation();
                                    }
                                :click
                                    {
                                        block.on('toggle');
                                    }
                                block content
                                    text text
                                        val This is a toast!
                                        css
                                            color white
                                            letter-spacing 0.1px
                                            cursor pointer
                            div end_spacer
                                css
                                    height 15px
                            div end_spacer_again
                                css
                                    height 7px
                            block remove_button_wrap
                                css
                                    position absolute
                                    height 40px
                                    width 40px
                                    top 20px
                                    right 62px
                                button remove_button
                                    css
                                        outline none
                                        border none
                                        background-color rgba(255,255,255,0)
                                        height 30px
                                        width 30px
                                        margin 0 auto
                                        opacity 0.6
                                        padding 0
                                        display block
                                        transition opacity 0.2s ease
                                    image img
                                        src /img/x_b.png
                                        height 30px
                                        width 30px
                                        css
                                            margin 0 auto
                                    :click
                                        {
                                            setTimeout(_ => {
                                                app.ws.api.remove_application_repo(block.parent(3).key('application')._id);
                                            }, 20);
                                        }
                                    :mouseover
                                        css
                                            opacity 0.75
                                    :mouseout
                                        css
                                            opacity 0.6
                            block save_button_wrap
                                css
                                    position absolute
                                    height 40px
                                    width 40px
                                    top 20px
                                    right 23px
                                button save_button
                                    css
                                        outline none
                                        border none
                                        background-color rgba(255,255,255,0)
                                        height 30px
                                        width 30px
                                        margin 0 auto
                                        opacity 0.6
                                        padding 0
                                        display block
                                        transition opacity 0.2s ease
                                    image img
                                        src /img/download_b.png
                                        height 30px
                                        width 30px
                                        css
                                            margin 0 auto
                                    :click
                                        {
                                            setTimeout(_ => {
                                                app.ws.api.pull_application_repo(block.parent(3).key('application')._id);
                                            }, 20);
                                        }
                                    :mouseover
                                        css
                                            opacity 0.75
                                    :mouseout
                                        css
                                            opacity 0.6
                        div application_domains
                            class dashboard_detail_section
                            css
                                min-height 100px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Domains
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/globe_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                    height 80px
                            div associate
                                css
                                    position absolute
                                    top 23px
                                    right 25px
                                    width 40px
                                    height 40px
                                block plus
                                    css
                                        opacity 0.6
                                        transition opacity 0.2s ease
                                    :mouseover
                                        css
                                            opacity 0.9
                                    :mouseout
                                        css
                                            opacity 0.6
                                    image image
                                        src /img/add_b.png
                                        height 30px
                                        width 30px
                                        css
                                            cursor pointer
                                        :click
                                            {

                                                var application = app.ui.block.child('main/content/applications/detail').key('application');
                                                if (application) {
                                                    setTimeout(_ => {
                                                        app.ws.api.get_domains(null, null, application._id);
                                                    }, 10);
                                                }
                                                event.stopPropagation();
                                            }
                            div list
                                css
                                    //background-color red
                                    width 100%
                                    max-height 250px
                                    height auto
                                    min-height 45px
                                    overflow-x none
                                    overflow-y auto
                                #manage
                                    {
                                        setTimeout(_ => {
                                            app.ws.api.get_domains(manage);
                                        }, 30);
                                    }
                                #link
                                    {
                                        //console.log(link);
                                        setTimeout(_ => {
                                            block.parent(2).on('send_application_update', {
                                                primary_domain: `${link}`
                                            });
                                        }, 10);
                                    }
                                #link_sub
                                    {
                                        //console.log('link_sub', link_sub);
                                        //setTimeout(_ => {
                                            block.parent(2).on('send_application_update', {
                                                primary_domain: `${link_sub.id}${link_sub.sub == '' ? '' : '.'}${link_sub.sub}`
                                            });
                                        //}, 10);
                                    }
                                #del
                                    {
                                        app.ui.display_modal.generic_confirm("Update Application", `Deassociate domain "${del.domain_sub === '' ? '' : del.domain_sub + '.'}${del.domain_name}" from this application?`, (result) => {
                                            if (result) {
                                                setTimeout(_ => {
                                                    app.ws.api.deassociate_application_domain(block.parent(2).key('application')._id, del.domain_string);
                                                }, 10);
                                                return true;
                                            }
                                        });
                                    }
                                #update_item
                                    {
                                        var domains = JSON.parse(JSON.stringify(block.parent(2).key('application').domains));
                                        var primary_domain = block.parent(2).key('application').primary_domain;
                                        update_item.idx = parseInt(update_item.idx);
                                        var domain_old = domains[update_item.idx];
                                        domains[update_item.idx] = `${update_item.id}${update_item.sub === '' ? '' : '.' + update_item.sub}`;
                                        var update_obj = {};
                                        if (domain_old === primary_domain) {
                                            update_obj['primary_domain'] = domains[update_item.idx];
                                        }
                                        update_obj['domains'] = domains;
                                        setTimeout(_ => {
                                            block.parent(2).on('send_application_update', update_obj);
                                        }, 10);
                                    }
                                #primary
                                    {
                                        block.key('primary', primary);
                                        //console.log('PRIMARY', primary);
                                        var children = block.children();
                                        var domain_id = primary.split('.')[0];
                                        for (var c in children) {
                                            //console.log(children[c].mark());
                                            if (primary != '' && (children[c].mark() == `application_domain_${primary}` || children[c].mark().includes(`application_domain_${primary}_`))) {
                                                children[c].data({
                                                    selected: true,
                                                });
                                            } else {
                                                children[c].data({
                                                    selected: false,
                                                });
                                            }
                                        }
                                    }
                                #domain_details
                                    {
                                        var children = block.children();
                                        for (var d in domain_details) {
                                            for (var c in children) {
                                                var domain_detail = domain_details[d];
                                                //console.log(children[c].key('id'), domain_detail._id);
                                                if (domain_detail._id == children[c].key('id')) {
                                                    children[c].data(domain_detail)
                                                }
                                            }
                                        }
                                    }
                                #domains
                                    {
                                        if (domains == undefined || !domains)
                                            domains = [];
                                        //console.log('domain update', domains);
                                        if (domains.length <= 0) {
                                            block.data({'clear_children': {}});
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'center',
                                                    paddingTop: '15px',
                                                    paddingBottom: '10px',
                                                    minHeight: '45px',
                                                    borderTop: 'none',
                                                })
                                                .add(Block('text', 1)
                                                    .html('No domains associated with application.')
                                                    .css({
                                                        letterSpacing: '1.3px',
                                                        fontSize: '16px',
                                                        color: '#333',
                                                        fontStyle: 'italic',
                                                    })
                                                )
                                            ;
                                        } else {
                                            block.data({'clear_children': {}});
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'left',
                                                    paddingTop: '0',
                                                    paddingBottom: '0',
                                                    minHeight: '105px',
                                                    borderTop: '1px solid #f6f6f6',
                                                })
                                            ;
                                            var primary_domain = block.key('primary');
                                            var first = true;
                                            for (var d in domains) {
                                                var domain_string = domains[d];
                                                var domain_id = domain_string;
                                                var domain_sub = '';
                                                if (domain_string.includes('.')) {
                                                    domain_id = domain_string.split('.')[0];
                                                    domain_sub = domain_string.slice(domain_string.indexOf('.') + 1);
                                                }
                                                var primary_domain_sel = primary_domain && (primary_domain === domain_string);
                                                block.add(Block('application-domain-list-item', `application_domain_${domains[d]}_${d}`)
                                                    .data({
                                                        idx: d,
                                                        _id: domain_id,
                                                        sub: domain_sub,
                                                        domain_string: domains[d],
                                                        selected: primary_domain_sel,
                                                        first: first,
                                                    })
                                                );
                                                first = false;
                                            }
                                        }
                                        block.parent(2).on('update_grid');
                                        setTimeout(_ => {
                                            Block.queries();
                                        }, 10);
                                        setTimeout(_ => {
                                            app.ws.api.get_domains();
                                        }, 10);
                                    }
                                #clear_children
                                    {
                                        var children = block.children();
                                        for (var c in children) {
                                            block.remove(c);
                                        }
                                    }
                            div end_spacer
                                css
                                    height 40px
                        div application_static
                            class dashboard_detail_section
                            css
                                min-height 100px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Static
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/xampp_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div apache_vhost
                                class value_edge
                                css
                                    width 50%
                                    display inline-block
                                    vertical-align top
                                text label
                                    val Apache VirtualHost
                                    class label_desc
                                    css
                                        padding-bottom 8px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    switch switch
                                        val on
                                        label Enable
                                        css
                                            margin 0
                                        {
                                            block.child('label').css({
                                                //minWidth: '55px',
                                                marginRight: '10px',
                                                fontWeight: '300'
                                            });
                                        }
                                        :modified
                                            {
                                                //console.log('updated to ' + block.key('state'));
                                                var value = block.key('state') === true;
                                                block.data({ label: (value ? 'Enable' : 'Disable') });
                                                if (data.hasOwnProperty('locked') && data.locked == true) return;
                                                block.parent(4).on('send_application_update', {
                                                    'proxy.apache_vhost': value
                                                });
                                                if (value === false) {
                                                    setTimeout(_ => {
                                                        app.ws.api.remove_application_vhost(block.parent(4).key('application')._id);
                                                    }, 20);
                                                } else {
                                                    setTimeout(_ => {
                                                        app.ws.api.push_application_vhost(block.parent(4).key('application')._id);
                                                    }, 20);
                                                }
                                                event.stopPropagation();
                                            }
                            div static_dir
                                class value_edge
                                text label
                                    val Static Root
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val /var/www/application-zero/html
                                        class value_text
                                        css
                                            font-size 17px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('application').ecosystem.static_dir;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder /var/www/application-zero/html
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 17px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_application_update', {
                                                        'ecosystem.static_dir': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div signal_toast
                                css
                                    position absolute
                                    top 5px
                                    right 18px
                                    width 200px
                                    background-color #333
                                    opacity 0
                                    border-radius 3px
                                    height 40px
                                    -webkit-box-shadow 2px 2px 5px 2px rgba(44, 44, 44, 0.2)
                                    box-shadow 2px 2px 5px 2px rgba(44, 44, 44, 0.2)
                                    transition opacity 0.2s ease, top 0.25s ease, background-color 0.1s ease
                                    cursor pointer
                                #color
                                    {
                                        block.css('background-color', `${color}`);
                                    }
                                #val
                                    {
                                        block.child('content/text').html(val);
                                    }
                                #summon
                                    {
                                        const _b = block;
                                        _b.data(summon);
                                        _b.on('show');
                                        setTimeout(_ => {
                                            _b.on('hide');
                                        }, 5000);
                                    }
                                :show
                                    css
                                        top 22px
                                        opacity 0.9
                                    {
                                        block.key('toggled', 'yes');
                                        event.stopPropagation();
                                    }
                                :hide
                                    css
                                        top 5px
                                        opacity 0
                                    {
                                        block.key('toggled', 'no');
                                        event.stopPropagation();
                                    }
                                $toggled no
                                :toggle
                                    {
                                        if (block.key('toggled') == 'no') {
                                            block.on('show');
                                        } else {
                                            block.on('hide');
                                        }
                                        event.stopPropagation();
                                    }
                                :click
                                    {
                                        block.on('toggle');
                                    }
                                block content
                                    text text
                                        val This is a toast!
                                        css
                                            color white
                                            letter-spacing 0.1px
                                            cursor pointer
                            div end_spacer
                                css
                                    height 15px
                        
            div domains
                $active_view content
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            app.ws.api.get_domains();
                        }, 20);
                    }
                :hide
                    css
                        display none
                #domain_list
                    {
                        //console.log('DOMAIN LIST');
                        domain_list = domain_list.sort(util.sort_compare_newest_first);
                        block.key('domain_list', domain_list);

                        block.child('content').html('');
                        for (var a in domain_list) {
                            var domain_block_new = Block('domain-item', `domain_${domain_list[a]._id.toString()}`).data(domain_list[a]).key('domain_metadata', domain_list[a]);
                            block.child('content').add(domain_block_new);
                        }
                        if (domain_list.length > 2)
                            block.child('content').css('text-align', 'center');
                        else block.child('content').css('text-align', 'left');
                        if (domain_list.length == 0) {
                            var msg = 'No domains found.';
                            block.child('content').html(`<div style="margin: 20px auto; text-align: center; padding-top: 2px;"><span class="noItemsMessage">${msg}</span></div>`);
                        }
                        Block.queries();
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                app.ui.mui_upgrade();
                            }, 10);
                        }, 10);
                    }
                #select_domain
                    {
                        //console.log(select_domain);
                        block.key('active_view', 'detail');
                        block.child('content').css('display', 'none')
                            .sibling('detail').css('display', 'block')
                            .data({ domain: select_domain })
                        ;
                        block.child('title').data({ select_domain_name: `${select_domain.domain}` });
                        block.child('new_domain_button').css('display', 'none');
                        block.child('domain_filter').css('display', 'none');
                        block.child('close').on('show');
                        block.child('detail').on('update_grid');
                        //setTimeout(_ => {
                        //    app.ws.api.get_resources();
                        //}, 10);
                        setTimeout(_ => {
                            Block.queries();
                        }, 30);
                    }
                :deselect_domain
                    {
                        //console.log('deselect_domain');
                        if (block.key('active_view') != 'content') {
                            block.key('active_view', 'content');
                            block.child('detail').css('display', 'none')
                                .sibling('content').css('display', 'block')
                            ;
                            block.child('title').on('back');
                            block.child('new_domain_button').css('display', 'inline-block');
                            block.child('domain_filter').css('display', 'block');
                            block.child('close').on('hide');
                            setTimeout(_ => {
                                Block.queries();
                                setTimeout(_ => {
                                    app.ui.mui_upgrade();
                                }, 10);
                            }, 5);
                        }
                    }
                #update_domain_local
                    {
                        //console.log('update_domain_local', update_domain_local);
                        var domain_list = block.key('domain_list');
                        for (var a in domain_list) {
                            if (domain_list[a]._id == update_domain_local._id) {
                                domain_list[a] = update_domain_local;
                                break;
                            }
                        }
                        block.data({
                            domain_list: domain_list
                        });
                    }
                #update_domain_field
                    {
                        //console.log('update_domain_field', update_domain_field);
                        var domain_list = block.key('domain_list');
                        for (var a in domain_list) {
                            if (domain_list[a]._id == update_domain_field.id) {
                                domain_list[a][update_domain_field.field] = update_domain_field.val;
                                break;
                            }
                        }
                        block.data({
                            domain_list: domain_list
                        });
                    }
                #delete_domain
                    {
                        var domain_info = block.child('detail').key('domain');
                        if (domain_info && domain_info._id == delete_domain) {
                            block.child('close/close_button').on('click');
                            setTimeout(_ => {
                                app.ws.api.get_domains();
                            }, 20);
                        }
                    }
                button new_domain_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                    class mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                    :click
                        {
                            app.ui.display_modal.new_domain();
                        }
                    {
                        block.css("background-color", app.ui.colors.primary);
                    }
                div domain_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Domains
                    #select_domain_name
                        {
                            block.child('text').html(`Domains&nbsp;&nbsp;/&nbsp;&nbsp;<span class='b600'>${select_domain_name}</span>`);
                        }
                    :back
                        {
                            block.child('text').html('').data('Domains');
                            event.stopPropagation();
                        }
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.75
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                block close
                    css
                        height 40px
                        width 40px
                        position absolute
                        top 29px
                        right 12px
                        display none
                        pointer-events none
                        z-index 50
                    :hide
                        css 
                            display none
                            pointer-events none
                        {
                            event.stopPropagation();
                        }
                    :show
                        css
                            display table
                            pointer-events auto
                        {
                            event.stopPropagation();
                        }
                    button close_button
                        css
                            width 24px
                            heigth 24px
                            border none
                            background-color rgba(255, 255, 255, 0)
                            outline none
                            opacity 0.32
                            cursor pointer
                            border-radius 100%
                            transition opacity 0.2s ease
                        :mouseover
                            css
                                opacity 0.68
                        :mouseout
                            css
                                opacity 0.32
                        :click
                            {
                                block.parent().sibling('detail').on('hide_editors');
                                setTimeout(_ => {
                                    block.parent(1).on('deselect_domain');
                                }, 10);
                            }
                        image x
                            src /img/x_b.png
                            height 24px
                            width 24px
                div content
                    css
                        width 100%
                        height auto
                        text-align center
                        padding-top 15px
                        padding-left 10px
                        padding-right 10px
                        box-sizing border-box
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                        }
                div detail
                    css
                        width 100%
                        height auto
                        text-align left
                        padding-top 0
                        padding-left 2px
                        padding-right 0
                        box-sizing border-box
                        display none
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    $reload_grid yes
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                            if (block.key('reload_grid') === 'yes') {
                                block.key('reload_grid', 'no');
                                block.on('update_grid');
                                setTimeout(_ => {
                                    block.key('reload_grid', 'yes');
                                }, 100);
                            }
                        }
                    :update_grid
                        {
                            //console.log('update_grid');
                            // set up masonry grid
                            $('div.masonry-grid-container').masonry({
                                // options
                                itemSelector: 'div.masonry-grid-container div.dashboard_detail_section',
                                columnWidth: app.ui.masonry_grid_size
                            });
                            event.stopPropagation();
                        }
                    #domain
                        {
                            block.key('domain', domain);
                            block.data({
                                domain_name: domain.domain,
                                twoLevel: domain.twoLevel,
                                topLevel: domain.topLevel,
                                subdomains: domain.subdomains,
                                certificates: domain.certificates
                            });
                        }
                    #domain_name
                        {
                            block.child('subcontent/domain_info/domain/value/text').html('').data(`${domain_name}`);
                            block.child('subcontent/domain_info/domain/value_editor').attribute('value', `${domain_name}`);
                            block.sibling('title').data({
                                select_domain_name: `${domain_name}`
                            });
                        }
                    #twoLevel
                        {
                            block.child('subcontent/domain_info/twoLevel/value/text').html('').data(`${twoLevel}`);
                            block.child('subcontent/domain_info/twoLevel/value_editor').attribute('value', `${twoLevel}`);
                        }
                    #topLevel
                        {
                            block.child('subcontent/domain_info/topLevel/value/text').html('').data(`${topLevel}`);
                            block.child('subcontent/domain_info/topLevel/value_editor').attribute('value', `${topLevel}`);
                        }
                    #subdomains
                        {
                            var domain_info = block.key('domain');
                            var subdomains_block = block.child('subcontent/domain_sub/subdomains');
                            if (subdomains.length > 0 && domain_info != null) {
                                subdomains_block.child('value/text').html('');
                                for (var s in subdomains) {
                                    subdomains_block.child('value/text').add(Block('div', `subdomain_${s}`)
                                        .key('subdomain', subdomains[s])
                                        .key('index', s)
                                        .add(Block('text', 1)
                                            .css({
                                                position: 'relative',
                                                width: 'auto'
                                            })
                                            .data(`${subdomains[s]}.${domain_info.domain}`)
                                            .add(Block('image', 'img')
                                                .class('subdomain_delete_button')
                                                .css('display', 'none')
                                                .data({
                                                    src: '/img/x_b.png',
                                                    height: '20px',
                                                    width: '20px',
                                                })
                                                .on('click', (e, b, d) => {
                                                    b.parent(1).on('activ8');
                                                })
                                            )
                                        )
                                        .on('mouseover', (e, b, d) => {
                                            b.child('text/img').css('display', 'block');
                                        })
                                        .on('mouseout', (e, b, d) => {
                                            b.child('text/img').css('display', 'none');
                                        })
                                        .on('activ8', (e, b, d) => {
                                            setTimeout(_ => {
                                                app.ws.api.remove_domain_subdomain(block.key('domain')._id, b.key('subdomain'));
                                            }, 20);
                                            e.stopPropagation();
                                        })
                                    );
                                }
                            } else {
                                subdomains_block.child('value/text').html('<span class="text_placeholder" style="font-size: 18px;">No subdomains found.</span>');
                            }
                        }
                    #certificates
                        {
                            block.child('subcontent/domain_certs/list').data({
                                certificates: certificates
                            });
                        }
                    :hide_editors
                        {
                            //setTimeout(_ => {
                                block.child('subcontent/domain_info/domain/value_editor').on('hide');
                                block.child('subcontent/domain_info/twoLevel/value_editor').on('hide');
                                block.child('subcontent/domain_info/topLevel/value_editor').on('hide');
                                //block.child('subcontent/domain_sub/add_subdomain/value_editor').on('refresh');
                                block.child('subcontent/domain_info/more_menu').on('hide');
                            //}, 200);
                        }
                    :receive_domain_update
                        {
                            //console.log('receive_domain_update', data);
                            var old_data = block.key('domain');
                            var new_data = data;
                            if (old_data.domain != new_data.domain) {
                                block.data({ domain_name: new_data.domain, });
                                block.child('subcontent/domain_info/domain/value_editor').on('hide');
                            }
                            if (old_data.twoLevel != new_data.twoLevel) {
                                block.data({ twoLevel: new_data.twoLevel, });
                                block.child('subcontent/domain_info/twoLevel/value_editor').on('hide');
                            }
                            if (old_data.topLevel != new_data.topLevel) {
                                block.data({ topLevel: new_data.topLevel, });
                                block.child('subcontent/domain_info/topLevel/value_editor').on('hide');
                            }
                            //if (old_data.subdomains.length != new_data.subdomains.length) {
                                block.data({ subdomains: new_data.subdomains, });
                                block.child('subcontent/domain_sub/add_subdomain/value_editor').on('refresh');
                            //}
                            block.data({ certificates: new_data.certificates, });
                            block.key('domain', new_data);
                        }
                    :send_domain_update
                        {
                            app.ws.api.update_domain(block.key('domain')._id, data);
                            event.stopPropagation();
                        }
                    :add_subdomain
                        {
                            app.ws.api.update_domain_subdomains(block.key('domain')._id, data.new_subdomain);
                            event.stopPropagation();
                        }
                    :delete_domain
                        {
                            //console.log('delete_domain');
                            var domain_info = block.key('domain');
                            //console.log(domain_info);
                            if (domain_info) {
                                app.ui.display_modal.generic_confirm("Delete domain", `Permanently delete domain "${domain_info.domain}"?`, (result) => {
                                    if (result) {
                                        var confirm = window.confirm(`This action is not reversible  are you sure about deleting domain "${domain_info.domain}"?`);
                                        if (confirm) {
                                            setTimeout(_ => {
                                                app.ws.api.delete_domain(domain_info._id);
                                            }, 30);
                                        }
                                        return true;
                                    }
                                });
                            }
                            event.stopPropagation();
                        }
                    div subcontent
                        class masonry-grid-container
                        css
                            padding 1px 1px
                        div domain_info
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Domain
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/globe_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div domain
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Domain
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val domain.com
                                        class value_text
                                        css
                                            font-size 26px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        // this is an edit button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                //block.parent(2).data('');
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                //console.log(block.parent(4).key('domain').domain);
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('domain').domain;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder domain.com
                                    css
                                        display none
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 55%
                                        font-size 26px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_domain_update', {
                                                        domain: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div twoLevel
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Second Level
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val domain
                                        class value_text
                                        css
                                            font-size 26px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('domain').twoLevel;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder domain
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                        font-size 26px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_domain_update', {
                                                        twoLevel: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div topLevel
                                class value_edge
                                text label
                                    val Top Level
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val com
                                        class value_text
                                        css
                                            font-size 26px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('domain').topLevel;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder com
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 90%
                                        font-size 26px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_domain_update', {
                                                        topLevel: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                            block more_menu_button_wrap
                                css
                                    position absolute
                                    height 40px
                                    width 40px
                                    top 20px
                                    right 22px
                                button more_menu_button
                                    css
                                        outline none
                                        border none
                                        background-color rgba(255,255,255,0)
                                        height 33px
                                        width 33px
                                        margin 0 auto
                                        opacity 0.65
                                        padding 0
                                        display block
                                    image img
                                        src /img/more_b.png
                                        height 33px
                                        width 33px
                                        css
                                            margin 0 auto
                                    :click
                                        {
                                            block.parent().sibling('more_menu').on('toggle');
                                        }
                                    :mouseover
                                        css
                                            opacity 0.8
                                    :mouseout
                                        css
                                            opacity 0.65
                            div more_menu
                                $showing no
                                :toggle
                                    {
                                        if (block.key('showing') === 'yes') {
                                            block.on('hide');
                                        } else {
                                            block.on('show');
                                        }
                                    }
                                :show
                                    {
                                        block.key('showing', 'yes');
                                        block.css({ display: 'block' });
                                        event.stopPropagation();
                                    }
                                :hide
                                    {
                                        block.key('showing', 'no');
                                        block.css({ display: 'none' });
                                        event.stopPropagation();
                                    }
                                css
                                    position absolute
                                    height 90px
                                    width 85px
                                    top 0
                                    right -85px
                                    border-radius 4px
                                    border 1px solid #efefef
                                    background-color white
                                    display none
                                    -webkit-box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    font-size 12.5px
                                    letter-spacing 0.8px
                                    opacity 0.98
                                    z-index 200
                                div menu-item-1
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                        border-radius 4px 4px 0 0
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Lorem
                                        :click
                                            {
                                                console.log('Lorem');
                                            }
                                div menu-item-2
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Ipsum
                                        :click
                                            {
                                                console.log('Ipsum');
                                            }
                                div menu-item-3
                                    css
                                        height 30px
                                        border-bottom none
                                        box-sizing border-box
                                        border-radius 0 0 4px 4px
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                            color rgb(209, 36, 36)
                                        html Delete
                                        :click
                                            {
                                                //console.log('Delete');
                                                block.parent(4).on('delete_domain');
                                            }
                        div domain_sub
                            class dashboard_detail_section
                            css
                                min-height 200px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Subdomains
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/domain_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div subdomains
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Subdomains
                                    class label_desc
                                    css
                                        margin-bottom 0px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val sub.domain.com
                                        class value_text
                                        css
                                            font-size 23px
                                            line-height 31px
                                            letter-spacing 1.2px
                            div add_subdomain
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Add Subdomain
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                input value_editor
                                    class value_editor
                                    placeholder sub.domain.com
                                    css
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 55%
                                        font-size 24px
                                        letter-spacing 1.2px
                                    :hide
                                        {
                                            block.css('display', 'none'); //.sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :refresh
                                        {
                                            block.node().value = '';
                                            block.node().blur();
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('add_subdomain', {
                                                        new_subdomain: value
                                                    });
                                                }
                                                //setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('refresh');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                        div domain_certs
                            class dashboard_detail_section
                            css
                                min-height 175px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Certificates
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/lock_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div add_certificate
                                css
                                    position absolute
                                    top 24px
                                    right 25px
                                    width 40px
                                    height 40px
                                block plus
                                    css
                                        opacity 0.6
                                        transition opacity 0.2s ease
                                    :mouseover
                                        css
                                            opacity 0.9
                                    :mouseout
                                        css
                                            opacity 0.6
                                    image image
                                        src /img/add_b.png
                                        height 30px
                                        width 30px
                                        css
                                            cursor pointer
                                        :click
                                            {

                                                var domain = app.ui.block.child('main/content/domains/detail').key('domain');
                                                if (domain) {
                                                    setTimeout(_ => {
                                                        app.ws.api.add_domain_certificate(domain._id);
                                                    }, 10);
                                                }
                                                event.stopPropagation();
                                            }
                            div list
                                css
                                    width 100%
                                    max-height 350px
                                    height auto
                                    min-height 45px
                                    overflow-x none
                                    overflow-y auto
                                #del
                                    {
                                        del = parseInt(del);
                                        app.ui.display_modal.generic_confirm("Update Domain", `Remove certificate #${del + 1} from this domain?`, (result) => {
                                            if (result) {
                                                setTimeout(_ => {
                                                    app.ws.api.remove_domain_certificate(block.parent(2).key('domain')._id, del);
                                                }, 10);
                                                return true;
                                            }
                                        });
                                    }
                                #update_item
                                    {
                                        //console.log(update_item);
                                        var id = parseInt(update_item.id);
                                        var update = update_item.update;
                                        setTimeout(_ => {
                                            app.ws.api.update_domain_certificate(block.parent(2).key('domain')._id, id, update);
                                        }, 10);
                                        event.stopPropagation();
                                    }
                                #certificates
                                    {
                                        if (certificates == undefined || !certificates)
                                            certificates = [];
                                        //console.log(certificates);
                                        if (certificates.length <= 0) {
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'center',
                                                    paddingTop: '15px',
                                                    paddingBottom: '10px',
                                                    minHeight: '45px',
                                                    borderTop: 'none',
                                                })
                                                .add(Block('text', 1)
                                                    .html('No certificates associated with domain.')
                                                    .css({
                                                        letterSpacing: '1.3px',
                                                        fontSize: '16px',
                                                        color: '#333',
                                                        fontStyle: 'italic',
                                                    })
                                                )
                                            ;
                                        } else {
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'left',
                                                    paddingTop: '0',
                                                    paddingBottom: '0',
                                                    minHeight: '105px',
                                                    borderTop: '1px solid #f6f6f6',
                                                })
                                            ;
                                            var domain_info = block.parent(2).key('domain');
                                            var first = true;
                                            for (var c in certificates) {
                                                block.add(Block('domain-certificate-list-item', `domain_cert_${c}`)
                                                    .data(Object.assign({
                                                        _id: c, first: first, domain: domain_info.domain,
                                                        subdomains_available: domain_info.subdomains,
                                                    }, certificates[c]))
                                                );
                                                first = false;
                                            }
                                        }
                                        block.parent(2).on('update_grid');
                                        setTimeout(_ => {
                                            Block.queries();
                                        }, 10);
                                    }
                            div end_spacer
                                css
                                    height 15px
                            
            div resources
                $active_view content
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            app.ws.api.get_resources();
                        }, 20);
                    }
                :hide
                    css
                        display none
                #resource_list
                    {
                        resource_list = resource_list.sort(util.sort_compare_newest_first);
                        block.key('resource_list', resource_list);

                        block.child('content').html('');
                        for (var r in resource_list) {
                            var resource_block_new = Block('resource-item', `resource_${resource_list[r]._id.toString()}`).data(resource_list[r]).key('resource_metadata', resource_list[r]);
                            block.child('content').add(resource_block_new);
                        }
                        if (resource_list.length > 2)
                            block.child('content').css('text-align', 'center');
                        else block.child('content').css('text-align', 'left');
                        if (resource_list.length == 0) {
                            var msg = 'No resources found.';
                            block.child('content').html(`<div style="margin: 20px auto; text-align: center; padding-top: 2px;"><span class="noItemsMessage">${msg}</span></div>`);
                        }
                        Block.queries();
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                app.ui.mui_upgrade();
                            }, 10);
                        }, 10);
                    }
                #select_resource
                    {
                        //console.log(select_resource);
                        block.key('active_view', 'detail');
                        block.child('content').css('display', 'none')
                            .sibling('detail').css('display', 'block')
                            .data({ resource: select_resource })
                        ;
                        block.child('title').data({ select_resource_name: `${select_resource.name}` });
                        block.child('new_resource_button').css('display', 'none');
                        block.child('resource_filter').css('display', 'none');
                        block.child('close').on('show');
                        block.child('detail').on('update_grid');
                        setTimeout(_ => {
                            app.ws.api.get_resource(select_resource._id);
                        }, 20);
                        setTimeout(_ => {
                            Block.queries();
                        }, 10);
                    }
                :deselect_resource
                    {
                        block.key('active_view', 'content');
                        block.child('detail').css('display', 'none')
                            .sibling('content').css('display', 'block')
                        ;
                        block.child('title').on('back');
                        block.child('new_resource_button').css('display', 'inline-block');
                        block.child('resource_filter').css('display', 'block');
                        block.child('close').on('hide');
                        setTimeout(_ => {
                            Block.queries();
                            setTimeout(_ => {
                                app.ui.mui_upgrade();
                            }, 10);
                        }, 5);
                    }
                #update_resource_local
                    {
                        //console.log('update_resource_local', update_resource_local);
                        var resource_list = block.key('resource_list');
                        for (var r in resource_list) {
                            if (resource_list[r]._id == update_resource_local._id) {
                                resource_list[r] = update_resource_local;
                                break;
                            }
                        }
                        block.data({
                            resource_list: resource_list
                        });
                    }
                #update_resource_field
                    {
                        //console.log('update_resource_field', update_resource_field);
                        var resource_list = block.key('resource_list');
                        if (resource_list) {
                            for (var r in resource_list) {
                                if (resource_list[r]._id == update_resource_field.id) {
                                    resource_list[r][update_resource_field.field] = update_resource_field.val;
                                    break;
                                }
                            }
                            block.data({
                                resource_list: resource_list
                            });
                        }
                    }
                #update_resource_fields
                    {
                        //console.log('update_resource_fields', update_resource_fields);
                        var resource_list = block.key('resource_list');
                        if (resource_list) {
                            for (var r in resource_list) {
                                //console.log(resource_list[r]);
                                if (resource_list[r]._id == update_resource_fields.id) {
                                    for (var f in update_resource_fields.fields) {
                                        resource_list[r][update_resource_fields.fields[f]] = update_resource_fields.vals[f];
                                    }
                                    //console.log(resource_list[r]);
                                    break;
                                }
                            }
                            block.data({
                                resource_list: resource_list
                            });
                        }
                    }
                #delete_resource
                    {
                        var resource_info = block.child('detail').key('resource');
                        if (resource_info && resource_info._id == delete_resource) {
                            block.child('close/close_button').on('click');
                            setTimeout(_ => {
                                app.ws.api.get_resources();
                            }, 20);
                        }
                    }
                button new_resource_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                    class mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                    :click
                        {
                            app.ui.display_modal.new_resource();
                        }
                    {
                        block.css("background-color", app.ui.colors.primary);
                    }
                div resource_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Resources
                    #select_resource_name
                        {
                            block.child('text').html(`Resources&nbsp;&nbsp;/&nbsp;&nbsp;<span class='b600'>${select_resource_name}</span>`);
                        }
                    :back
                        {
                            block.child('text').html('').data('Resources');
                            event.stopPropagation();
                        }
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.7
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                block close
                    css
                        height 40px
                        width 40px
                        position absolute
                        top 29px
                        right 12px
                        display none
                        pointer-events none
                        z-index 50
                    :hide
                        css 
                            display none
                            pointer-events none
                        {
                            event.stopPropagation();
                        }
                    :show
                        css
                            display table
                            pointer-events auto
                        {
                            event.stopPropagation();
                        }
                    button close_button
                        css
                            width 24px
                            heigth 24px
                            border none
                            background-color rgba(255, 255, 255, 0)
                            outline none
                            opacity 0.32
                            cursor pointer
                            border-radius 100%
                            transition opacity 0.2s ease
                        :mouseover
                            css
                                opacity 0.68
                        :mouseout
                            css
                                opacity 0.32
                        :click
                            {
                                block.parent().sibling('detail').on('hide_editors');
                                setTimeout(_ => {
                                    block.parent(1).on('deselect_resource');
                                }, 15);
                            }
                        image x
                            src /img/x_b.png
                            height 24px
                            width 24px
                div content
                    css
                        width 100%
                        height auto
                        text-align center
                        padding-top 15px
                        padding-left 10px
                        padding-right 10px
                        box-sizing border-box
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                        }
                    :status_update
                        {
                            var children = block.children();
                            for (var c in children) {
                                children[c].on('status_update');
                            }
                            event.stopPropagation();
                        }
                div detail
                    css
                        width 100%
                        height auto
                        text-align left
                        padding-top 0
                        padding-left 2px
                        padding-right 0
                        box-sizing border-box
                        display none
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
                    $reload_grid yes
                    @query window width != 0
                        {
                            block.css('height', (window.innerHeight - block.$().offset().top - 14) + 'px');
                            if (block.key('reload_grid') === 'yes') {
                                block.key('reload_grid', 'no');
                                block.on('update_grid');
                                setTimeout(_ => {
                                    block.key('reload_grid', 'yes');
                                }, 100);
                            }
                        }
                    :update_grid
                        {
                            //console.log('update_grid');
                            // set up masonry grid
                            $('div.masonry-grid-container').masonry({
                                // options
                                itemSelector: 'div.masonry-grid-container div.dashboard_detail_section',
                                columnWidth: app.ui.masonry_grid_size
                            });
                            event.stopPropagation();
                        }
                    #resource
                        {
                            block.key('resource', resource);
                            var resource_update = {
                                name: resource.name,
                                slug: resource.slug,
                                link: resource.link,
                                specs: resource.specs,
                                ip: resource.ip,
                                private_ip: resource.private_ip,
                                provider: resource.provider,
                                type: resource.type,
                                daemon_key: resource.daemon_key,
                                primary_domain: resource.primary_domain,
                                status: resource.status,
                                status_time: resource.status_time,
                                software: resource.software,
                                domains: resource.domains
                            };
                            if (resource.hasOwnProperty('applications'))
                                resource_update.applications = resource.applications;
                            block.data(resource_update);
                        }
                    #name
                        {
                            block.child('subcontent/resource_info/name/value/text').html('').data(`${name}`);
                            block.child('subcontent/resource_info/name/value_editor').attribute('value', `${name}`);
                            block.sibling('title').data({
                                select_resource_name: `${name}`
                            });
                        }
                    #slug
                        {
                            block.child('subcontent/resource_info/slug/value/text').html('').data(`${slug}`);
                            block.child('subcontent/resource_info/slug/value_editor').attribute('value', `${slug}`);
                        }
                    #ip
                        {
                            var ip_alt = ip;
                            var ip_alt_alt = ip_alt;
                            if (ip_alt == '') {
                                ip_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                ip_alt_alt = '#';
                                block.child('subcontent/resource_info/ip/value/text').css('color', '#222');
                            } else block.child('subcontent/resource_info/ip/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                            block.child('subcontent/resource_info/ip/value/text').html(`${ip_alt}`).attribute('href', `${window.location.protocol}//${ip_alt_alt}`);
                            block.child('subcontent/resource_info/ip/value_editor').attribute('value', `${ip}`); 
                        }
                    #private_ip
                        {
                            var private_ip_alt = private_ip;
                            var private_ip_alt_alt = private_ip_alt;
                            if (private_ip_alt == '') {
                                private_ip_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                private_ip_alt_alt = '#';
                                block.child('subcontent/resource_info/private_ip/value/text').css('color', '#222');
                            } else block.child('subcontent/resource_info/private_ip/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                            block.child('subcontent/resource_info/private_ip/value/text').html(`${private_ip_alt}`).attribute('href', `${window.location.protocol}//${private_ip_alt_alt}`);
                            block.child('subcontent/resource_info/private_ip/value_editor').attribute('value', `${private_ip}`); 
                        }
                    #link
                        {
                            var link_alt = link;
                            var link_alt_alt = link_alt;
                            if (link_alt == '') {
                                link_alt = '<span class="text_placeholder" style="letter-spacing:0.8px;">N/A</span>';
                                link_alt_alt = '#';
                                block.child('subcontent/resource_info/link/value/text').css('color', '#222');
                            } else {
                                block.child('subcontent/resource_info/link/value/text').css('color', 'rgba(10, 115, 242, 0.95)');
                                var length_limit = 37;
                                if (link_alt.length > length_limit) link_alt = link_alt.substring(0, length_limit - 2) + '...';
                            }
                            block.child('subcontent/resource_info/link/value/text').html(`${link_alt}`).attribute('href', `${link_alt_alt}`);
                            block.child('subcontent/resource_info/link/value_editor').attribute('value', `${link}`); 
                        }
                    #specs
                        {
                            // cpu
                            block.child('subcontent/resource_specs/cpu/value/text').html('').data(`${specs.cpu} CPU${specs.cpu == 1 ? '' : 's'}`);
                            block.child('subcontent/resource_specs/cpu/value_editor').attribute('value', `${specs.cpu}`);
                            // memory
                            block.child('subcontent/resource_specs/memory/value/text').html('').data(`${specs.memory}GB RAM`);
                            block.child('subcontent/resource_specs/memory/value_editor').attribute('value', `${specs.memory}`);
                            // storage
                            block.child('subcontent/resource_specs/storage/value/text').html('').data(`${specs.storage}GB SSD`);
                            block.child('subcontent/resource_specs/storage/value_editor').attribute('value', `${specs.storage}`);
                            // location
                            var location_alt = specs.location;
                            if (location_alt == '') location_alt = '<span class="text_placeholder">N/A</span>';
                            block.child('subcontent/resource_specs/location/value/text').html(`${location_alt}`);
                            block.child('subcontent/resource_specs/location/value_editor').attribute('value', `${specs.location}`);
                        }
                    #provider
                        {
                            block.child('subcontent/resource_info/provider/value/text').data({ choose: `${provider}`});
                        }
                    #type
                        {
                            block.child('subcontent/resource_specs/type/value/text').data({ choose: `${type}`});
                        }
                    #daemon_key
                        {
                            block.child('subcontent/resource_daemon/daemon_key/value/text').html('').data(`${daemon_key}`);
                            block.child('subcontent/resource_daemon/daemon_key/value_editor').attribute('value', `${daemon_key}`);
                        }
                    #status
                        {
                            //console.log(status);
                            block.child('subcontent/resource_daemon/status').key('status', status).on('status_update');
                        }
                    #status_time
                        {
                            //console.log(status_time);
                            block.child('subcontent/resource_daemon/status').key('status_time', status_time).on('status_update');
                        }
                    #applications
                        {
                            //console.log('received resource applications', applications);
                            block.child('subcontent/resource_apps/list').data({
                                applications: applications
                            });
                        }
                    #primary_domain
                        {
                            block.child('subcontent/resource_domains/list').data({
                                primary: primary_domain
                            });
                        }
                    #domains
                        {
                            //console.log('received resource domains', domains);
                            block.child('subcontent/resource_domains/list').data({
                                domains: domains
                            });
                        }
                    #software
                        {
                            // app_root
                            var app_root_alt = software.app_root;
                            if (app_root_alt == '') app_root_alt = '<span class="text_placeholder">~/dash</span>';
                            block.child('subcontent/resource_software/app_root/value/text').html(`${app_root_alt}`);
                            block.child('subcontent/resource_software/app_root/value_editor').attribute('value', `${software.app_root}`);
                            // nginx_root
                            var nginx_root_alt = software.nginx_root;
                            if (nginx_root_alt == '') nginx_root_alt = '<span class="text_placeholder">/etc/nginx</span>';
                            block.child('subcontent/resource_software/nginx_root/value/text').html(`${nginx_root_alt}`);
                            block.child('subcontent/resource_software/nginx_root/value_editor').attribute('value', `${software.nginx_root}`);
                            // apache_root
                            var apache_root_alt = software.apache_root;
                            if (apache_root_alt == '') apache_root_alt = '<span class="text_placeholder">/etc/apache2</span>';
                            block.child('subcontent/resource_software/apache_root/value/text').html(`${apache_root_alt}`);
                            block.child('subcontent/resource_software/apache_root/value_editor').attribute('value', `${software.apache_root}`);
                            // nginx_port
                            var nginx_port_alt = `:${software.nginx_port}`;
                            if (nginx_port_alt == ':' || software.nginx_port == 0) nginx_port_alt = '<span class="text_placeholder">:80</span>';
                            block.child('subcontent/resource_software/nginx_port/value/text').html(`${nginx_port_alt}`);
                            block.child('subcontent/resource_software/nginx_port/value_editor').attribute('value', `${software.nginx_port}`);
                            // apache_port
                            var apache_port_alt = `:${software.apache_port}`;
                            if (apache_port_alt == ':' || software.apache_port == 0) apache_port_alt = '<span class="text_placeholder">:80</span>';
                            block.child('subcontent/resource_software/apache_port/value/text').html(`${apache_port_alt}`);
                            block.child('subcontent/resource_software/apache_port/value_editor').attribute('value', `${software.apache_port}`);
                            // www_root
                            var www_root_alt = software.www_root;
                            if (www_root_alt == '') www_root_alt = '<span class="text_placeholder">/var/www</span>';
                            block.child('subcontent/resource_software/www_root/value/text').html(`${www_root_alt}`);
                            block.child('subcontent/resource_software/www_root/value_editor').attribute('value', `${software.www_root}`);
                        }
                    :status_update
                        {
                            block.child('subcontent/resource_daemon/status').on('status_update');
                            event.stopPropagation();
                        }
                    :hide_editors
                        {
                            //setTimeout(_ => {
                                block.child('subcontent/resource_info/name/value_editor').on('hide');
                                block.child('subcontent/resource_info/slug/value_editor').on('hide');
                                block.child('subcontent/resource_info/ip/value_editor').on('hide');
                                block.child('subcontent/resource_info/private_ip/value_editor').on('hide');
                                block.child('subcontent/resource_info/link/value_editor').on('hide');
                                block.child('subcontent/resource_specs/cpu/value_editor').on('hide');
                                block.child('subcontent/resource_specs/memory/value_editor').on('hide');
                                block.child('subcontent/resource_specs/storage/value_editor').on('hide');
                                block.child('subcontent/resource_specs/location/value_editor').on('hide');
                                block.child('subcontent/resource_software/app_root/value_editor').on('hide');
                                block.child('subcontent/resource_software/nginx_root/value_editor').on('hide');
                                block.child('subcontent/resource_software/nginx_port/value_editor').on('hide');
                                block.child('subcontent/resource_software/apache_root/value_editor').on('hide');
                                block.child('subcontent/resource_software/apache_port/value_editor').on('hide');
                                block.child('subcontent/resource_software/www_root/value_editor').on('hide');
                                block.child('subcontent/resource_daemon/daemon_key/value_editor').on('hide');
                                block.child('subcontent/resource_info/more_menu').on('hide');
                            //}, 200);
                        }
                    :receive_resource_update
                        {
                            var old_data = block.key('resource');
                            var new_data = data;
                            if (old_data.name != new_data.name) {
                                block.data({ name: new_data.name, });
                                block.child('subcontent/resource_info/name/value_editor').on('hide');
                            }
                            if (old_data.slug != new_data.slug) {
                                block.data({ slug: new_data.slug, });
                                block.child('subcontent/resource_info/slug/value_editor').on('hide');
                            }
                            if (old_data.ip != new_data.ip) {
                                block.data({ ip: new_data.ip, });
                                block.child('subcontent/resource_info/ip/value_editor').on('hide');
                            }
                            if (old_data.private_ip != new_data.private_ip) {
                                block.data({ private_ip: new_data.private_ip, });
                                block.child('subcontent/resource_info/private_ip/value_editor').on('hide');
                            }
                            if (old_data.link != new_data.link) {
                                block.data({ link: new_data.link, });
                                block.child('subcontent/resource_info/link/value_editor').on('hide');
                            }
                            var update_specs = false;
                            if (old_data.specs.cpu != new_data.specs.cpu) {
                                update_specs = true;
                                block.child('subcontent/resource_specs/cpu/value_editor').on('hide');
                            }
                            if (old_data.specs.memory != new_data.specs.memory) {
                                update_specs = true;
                                block.child('subcontent/resource_specs/memory/value_editor').on('hide');
                            }
                            if (old_data.specs.storage != new_data.specs.storage) {
                                update_specs = true;
                                block.child('subcontent/resource_specs/storage/value_editor').on('hide');
                            }
                            if (old_data.specs.location != new_data.specs.location) {
                                update_specs = true;
                                block.child('subcontent/resource_specs/location/value_editor').on('hide');
                            }
                            if (update_specs)
                                block.data({ specs: new_data.specs, });
                            if (old_data.provider != new_data.provider) {
                                block.data({ provider: new_data.provider, });
                                block.child('subcontent/resource_info/provider/value_editor').on('hide');
                            }
                            if (old_data.type != new_data.type) {
                                block.data({ type: new_data.type, });
                                block.child('subcontent/resource_specs/type/value_editor').on('hide');
                            }
                            if (old_data.daemon_key != new_data.daemon_key) {
                                block.data({ daemon_key: new_data.daemon_key, });
                                block.child('subcontent/resource_daemon/daemon_key/value_editor').on('hide');
                            }
                            if (old_data.status != new_data.status) {
                                block.data({ status: new_data.status });
                            }
                            if (old_data.status_time != new_data.status_time) {
                                block.data({ status_time: new_data.status_time });
                            }
                            var update_software = false;
                            if (old_data.software.app_root != new_data.software.app_root) {
                                update_software = true;
                                block.child('subcontent/resource_software/app_root/value_editor').on('hide');
                            }
                            if (old_data.software.nginx_root != new_data.software.nginx_root) {
                                update_software = true;
                                block.child('subcontent/resource_software/nginx_root/value_editor').on('hide');
                            }
                            if (old_data.software.apache_root != new_data.software.apache_root) {
                                update_software = true;
                                block.child('subcontent/resource_software/apache_root/value_editor').on('hide');
                            }
                            if (old_data.software.nginx_port != new_data.software.nginx_port) {
                                update_software = true;
                                block.child('subcontent/resource_software/nginx_port/value_editor').on('hide');
                            }
                            if (old_data.software.apache_port != new_data.software.apache_port) {
                                update_software = true;
                                block.child('subcontent/resource_software/apache_port/value_editor').on('hide');
                            }
                            if (old_data.software.www_root != new_data.software.www_root) {
                                update_software = true;
                                block.child('subcontent/resource_software/www_root/value_editor').on('hide');
                            }
                            if (update_software)
                                block.data({ software: new_data.software, });
                            if (new_data.hasOwnProperty('applications')) 
                                block.data({ applications: new_data.applications });
                            if (new_data.hasOwnProperty('domains') && (!old_data.hasOwnProperty('domains') || JSON.stringify(old_data.domains) != JSON.stringify(new_data.domains))) 
                                block.data({ domains: new_data.domains });
                            if (new_data.hasOwnProperty('primary_domain') && new_data.primary_domain != old_data.primary_domain) 
                                block.data({ primary_domain: new_data.primary_domain });
                            block.key('resource', new_data);
                        }
                    :send_resource_update
                        {
                            app.ws.api.update_resource(block.key('resource')._id, data);
                            event.stopPropagation();
                        }
                    :delete_resource
                        {
                            //console.log('delete_resource');
                            var resource_info = block.key('resource');
                            if (resource_info) {
                                app.ui.display_modal.generic_confirm("Delete Resource", `Permanently delete resource "${resource_info.name}"?`, (result) => {
                                    if (result) {
                                        var confirm = window.confirm(`This action is not reversible  are you sure about deleting resource "${resource_info.name}"?`);
                                        if (confirm) {
                                            setTimeout(_ => {
                                                app.ws.api.delete_resource(resource_info._id);
                                            }, 30);
                                        }
                                        return true;
                                    }
                                });
                            }
                            event.stopPropagation();
                        }
                    div subcontent
                        class masonry-grid-container
                        css
                            padding 1px 1px
                        div resource_info
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Resource
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/board_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div name
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Name
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val Resource Zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        // this is an edit button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                //block.parent(2).data('');
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                //console.log(block.parent(4).key('resource').name);
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').name;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Resource Zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        name: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div slug
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Identifier
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val resource-zero
                                        class value_text
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').slug;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder resource-zero
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        slug: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div ip
                                class value_edge
                                text label
                                    val External IP
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html 142.250.189.174
                                        href http://142.250.189.174
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                            letter-spacing 0.6px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').ip;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder 142.250.189.174
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 80%
                                        //letter-spacing normal
                                        letter-spacing 0.6px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        ip: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div private_ip
                                class value_edge
                                text label
                                    val Internal IP
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html 127.0.0.1
                                        href http://127.0.0.1
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                            letter-spacing 0.6px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').private_ip;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder 127.0.0.1
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        width 80%
                                        //letter-spacing normal
                                        letter-spacing 0.6px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        private_ip: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div provider
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Provider
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    select text
                                        name resource_provider_select
                                        class value_select
                                        :change
                                            {
                                                var provider_val = block.node().value;
                                                block.parent(4).on('send_resource_update', {
                                                    provider: provider_val
                                                });
                                            }
                                        #choose
                                            {
                                                var children = block.children();
                                                for (var c in children)
                                                    children[c].node().removeAttribute('selected');
                                                block.child(choose).attribute('selected', 'selected');
                                            }
                                        option none
                                            html None
                                            value none
                                            selected selected
                                        {
                                            for (var p in app.main.config.cloud.providers) {
                                                var provider = app.main.config.cloud.providers[p];
                                                block.add(Block('option', provider[0]).data({
                                                    value: provider[0],
                                                    html: provider[1]
                                                }));
                                            }
                                        }
                            div link
                                class value_edge
                                text label
                                    val Console
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                        padding-left 1px
                                    a text
                                        html https://console.aws.amazon.com/ec2/v2/home?...
                                        href https://console.aws.amazon.com/ec2/v2/home?...
                                        class value_text
                                        target _blank
                                        css
                                            font-size 20px
                                            font-weight 300
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 5px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').link;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder https://projectzero.anuv.me
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 20px
                                        letter-spacing normal
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        link: value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                            block image
                                css
                                    height 130px
                                    width 130px
                                    position absolute
                                    top 80px
                                    right 40px
                                    border-radius 7px
                                    opacity 0.99
                                    transition opacity 0.2s ease
                                    cursor pointer
                                    -webkit-box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                    box-shadow 1px 1px 2px 1px rgba(94,94,94,0.05)
                                    display none
                                #update
                                    {
                                        block.key('img_path', update);
                                        var data = {
                                            src: '/img/gear_bg.jpg',
                                            css: {
                                                opacity: '0.75'
                                            }
                                        };
                                        if (update && update.trim() != '') {
                                            //console.log(update);
                                            data.src = update;
                                            data.css.opacity = '0.97';
                                        }
                                        block.child('img').data(data);
                                    }
                                #update_invert
                                    {
                                        block.key('img_invert', update_invert);
                                        block.child('edit').css({
                                            'filter': update_invert ? 'invert()' : 'none'
                                        });
                                        block.key('edit_opacity', update_invert ? '1' : '0.6');
                                    }
                                $edit_opacity 0.95
                                :mouseover
                                    css
                                        opacity 0.94
                                    {
                                        block.child('edit').css('opacity', block.key('edit_opacity'));
                                    }
                                :mouseout
                                    css
                                        opacity 0.99
                                    edit
                                        css
                                            opacity 0
                                :click
                                    {
                                        //var url = '';
                                        //if (block.key('img_path'))
                                        //    url = block.key('img_path');
                                        //app.ui.display_modal.edit_project_image(block.parent(2).key('project')._id.toString(), url, block.key('img_invert'));
                                    }
                                image img
                                    src /img/gear_bg.jpg
                                    height 130px
                                    width 130px
                                    css
                                        border-radius 7px
                                        position absolute
                                        top 0
                                        left 0
                                        opacity 0.9
                                image edit
                                    src /img/edit_b.png
                                    height 25px
                                    width 25px
                                    css
                                        margin 0 auto
                                        position relative
                                        z-index 100
                                        opacity 0
                                        transition opacity 0.15s ease
                            block more_menu_button_wrap
                                css
                                    position absolute
                                    height 40px
                                    width 40px
                                    top 20px
                                    right 22px
                                button more_menu_button
                                    css
                                        outline none
                                        border none
                                        background-color rgba(255,255,255,0)
                                        height 33px
                                        width 33px
                                        margin 0 auto
                                        opacity 0.65
                                        padding 0
                                        display block
                                    image img
                                        src /img/more_b.png
                                        height 33px
                                        width 33px
                                        css
                                            margin 0 auto
                                    :click
                                        {
                                            block.parent().sibling('more_menu').on('toggle');
                                        }
                                    :mouseover
                                        css
                                            opacity 0.8
                                    :mouseout
                                        css
                                            opacity 0.65
                            div more_menu
                                $showing no
                                :toggle
                                    {
                                        if (block.key('showing') === 'yes') {
                                            block.on('hide');
                                        } else {
                                            block.on('show');
                                        }
                                    }
                                :show
                                    {
                                        block.key('showing', 'yes');
                                        block.css({ display: 'block' });
                                        event.stopPropagation();
                                    }
                                :hide
                                    {
                                        block.key('showing', 'no');
                                        block.css({ display: 'none' });
                                        event.stopPropagation();
                                    }
                                css
                                    position absolute
                                    height 90px
                                    width 85px
                                    top 0
                                    right -85px
                                    border-radius 4px
                                    border 1px solid #efefef
                                    background-color white
                                    display none
                                    -webkit-box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    box-shadow 1px 1px 4px 1px rgba(74,74,74,0.06)
                                    font-size 12.5px
                                    letter-spacing 0.8px
                                    opacity 0.98
                                    z-index 200
                                div menu-item-1
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                        border-radius 4px 4px 0 0
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Lorem
                                        :click
                                            {
                                                console.log('Lorem');
                                            }
                                div menu-item-2
                                    css
                                        height 30px
                                        border-bottom 1px solid #eee
                                        box-sizing border-box
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                        html Ipsum
                                        :click
                                            {
                                                console.log('Ipsum');
                                            }
                                div menu-item-3
                                    css
                                        height 30px
                                        border-bottom none
                                        box-sizing border-box
                                        border-radius 0 0 4px 4px
                                    button button
                                        class menu-button
                                        css
                                            height 100%
                                            width 100%
                                            color rgb(209, 36, 36)
                                        html Delete
                                        :click
                                            {
                                                //console.log('Delete');
                                                block.parent(4).on('delete_resource');
                                            }
                        div resource_software
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Software
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/code_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                        height 80px
                            div app_root
                                class value_edge
                                text label
                                    val App Root
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val ~/dash
                                        class value_text
                                        css
                                            font-size 17px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').software.app_root;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder ~/dash
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 17px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'software.app_root': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            {
                                var wrapperA = Block('div', 'wrapperA');
                                block.__add(wrapperA).setAdd(wrapperA);
                            }
                            div nginx_root
                                class value_edge
                                css
                                    margin-bottom 20px
                                    vertical-align top
                                    display inline-block
                                    box-sizing border-box
                                    width 50%
                                text label
                                    val NGINX Root
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val /etc/nginx
                                        class value_text
                                        css
                                            font-size 17px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').software.nginx_root;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder /etc/nginx
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 17px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'software.nginx_root': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div nginx_port
                                class value_edge
                                css
                                    margin-bottom 20px
                                    vertical-align top
                                    display inline-block
                                    box-sizing border-box
                                    width 50%
                                text label
                                    val NGINX Port
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val :80
                                        class value_text
                                        css
                                            font-size 20px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        // this is an edit button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                //block.parent(2).data('');
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                //console.log(block.parent(4).key('resource').software.nginx_port);
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').software.nginx_port;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder 80
                                    css
                                        display none
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 75%
                                        font-size 20px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                /*
                                                if (value === '') value = null;
                                                else value = parseInt((`${value}`).trim());
                                                if (value == null || (value != NaN && value >= 0)) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'software.nginx_port': value
                                                    });
                                                }
                                                */
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'software.nginx_port': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            {
                                var wrapperB = Block('div', 'wrapperB');
                                block.__add(wrapperB).setAdd(wrapperB);
                            }
                            div apache_root
                                class value_edge
                                css
                                    margin-bottom 20px
                                    vertical-align top
                                    display inline-block
                                    box-sizing border-box
                                    width 50%
                                text label
                                    val Apache Root
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val /etc/apache2
                                        class value_text
                                        css
                                            font-size 17px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').software.apache_root;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder /etc/apache2
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 17px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'software.apache_root': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div apache_port
                                class value_edge
                                css
                                    margin-bottom 20px
                                    vertical-align top
                                    display inline-block
                                    box-sizing border-box
                                    width 50%
                                text label
                                    val Apache Port
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val :80
                                        class value_text
                                        css
                                            font-size 20px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        // this is an edit button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                //block.parent(2).data('');
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                //console.log(block.parent(4).key('resource').software.apache_port);
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').software.apache_port;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder 80
                                    css
                                        display none
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 75%
                                        font-size 20px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                /*
                                                if (value === '') value = null;
                                                else value = parseInt((`${value}`).trim());
                                                if (value == null || (value != NaN && value >= 0)) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'software.apache_port': value
                                                    });
                                                }
                                                */
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'software.apache_port': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            {
                                block.removeAddBlock();
                            }
                            div www_root
                                class value_edge
                                text label
                                    val WWW Root
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val /var/www
                                        class value_text
                                        css
                                            font-size 17px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 14px
                                            padding-top 3px
                                            height 17px
                                            width 17px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').software.www_root;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder /var/www
                                    css
                                        display none
                                        height 27px
                                        margin-top -1px
                                        margin-left -2px
                                        margin-bottom 2px
                                        font-size 17px
                                        width 90%
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'software.www_root': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                        div resource_specs
                            class dashboard_detail_section
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Hardware
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/memory_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                        height 80px
                            div cpu
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Core
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val 0 CPUs
                                        class value_text
                                        css
                                            font-size 21px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        // this is an edit button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                //block.parent(2).data('');
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                //console.log(block.parent(4).key('resource').specs.cpu);
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').specs.cpu;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder 0
                                    css
                                        display none
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 55%
                                        font-size 21px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = parseInt((`${value}`).trim());
                                                if (value != NaN && value >= 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'specs.cpu': value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div memory
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Memory
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val 0GB RAM
                                        class value_text
                                        css
                                            font-size 21px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').specs.memory;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder 0
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                        font-size 21px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = parseInt((`${value}`).trim());
                                                if (value != NaN && value >= 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'specs.memory': value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div storage
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Storage
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val 0GB SSD
                                        class value_text
                                        css
                                            font-size 21px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').specs.storage;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder 0
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 55%
                                        font-size 21px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = parseInt((`${value}`).trim());
                                                if (value != NaN && value >= 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'specs.storage': value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div location
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Location
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val Ohio (us-east-2a)
                                        class value_text
                                        css
                                            font-size 20px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').specs.location;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder Ohio (us-east-2a)
                                    css
                                        display none
                                        height 27px
                                        margin-top -2.5px
                                        margin-left -2px
                                        margin-bottom 2.5px
                                        width 80%
                                        font-size 20px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                //if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        'specs.location': value
                                                    });
                                                //}
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div type
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Type
                                    class label_desc
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    select text
                                        name resource_type_select
                                        class value_select
                                        :change
                                            {
                                                var type_val = block.node().value;
                                                block.parent(4).on('send_resource_update', {
                                                    type: type_val
                                                });
                                            }
                                        #choose
                                            {
                                                var children = block.children();
                                                for (var c in children)
                                                    children[c].node().removeAttribute('selected');
                                                block.child(choose).attribute('selected', 'selected');
                                            }
                                        option none
                                            html None
                                            value none
                                            selected selected
                                        {
                                            for (var t in app.main.config.cloud.resource.types) {
                                                var type = app.main.config.cloud.resource.types[t];
                                                block.add(Block('option', type[0]).data({
                                                    value: type[0],
                                                    html: type[1][0]
                                                }));
                                            }
                                        }
                            div end_spacer
                                css
                                    height 15px
                        div resource_domains
                            class dashboard_detail_section
                            css
                                min-height 100px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Domains
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/globe_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                    height 80px
                            div associate
                                css
                                    position absolute
                                    top 23px
                                    right 25px
                                    width 40px
                                    height 40px
                                block plus
                                    css
                                        opacity 0.6
                                        transition opacity 0.2s ease
                                    :mouseover
                                        css
                                            opacity 0.9
                                    :mouseout
                                        css
                                            opacity 0.6
                                    image image
                                        src /img/add_b.png
                                        height 30px
                                        width 30px
                                        css
                                            cursor pointer
                                        :click
                                            {
                                                var resource = app.ui.block.child('main/content/resources/detail').key('resource');
                                                if (resource) {
                                                    setTimeout(_ => {
                                                        app.ws.api.get_domains(null, resource._id);
                                                    }, 10);
                                                }
                                                event.stopPropagation();
                                            }
                            div list
                                css
                                    //background-color red
                                    width 100%
                                    max-height 250px
                                    height auto
                                    min-height 45px
                                    overflow-x none
                                    overflow-y auto
                                #manage
                                    {
                                        setTimeout(_ => {
                                            app.ws.api.get_domains(manage);
                                        }, 30);
                                    }
                                #link
                                    {
                                        //console.log(link);
                                        setTimeout(_ => {
                                            block.parent(2).on('send_resource_update', {
                                                primary_domain: `${link}`
                                            });
                                        }, 10);
                                    }
                                #link_sub
                                    {
                                        //console.log('link_sub', link_sub);
                                        //setTimeout(_ => {
                                            block.parent(2).on('send_resource_update', {
                                                primary_domain: `${link_sub.id}${link_sub.sub == '' ? '' : '.'}${link_sub.sub}`
                                            });
                                        //}, 10);
                                    }
                                #primary
                                    {
                                        block.key('primary', primary);
                                        //console.log('PRIMARY', primary);
                                        var children = block.children();
                                        var domain_id = primary.split('.')[0];
                                        for (var c in children) {
                                            //console.log(children[c].mark());
                                            if (primary != '' && (children[c].mark() == `resource_domain_${primary}` || children[c].mark().includes(`resource_domain_${primary}_`))) {
                                                children[c].data({ selected: true, });
                                            } else {
                                                children[c].data({ selected: false, });
                                            }
                                        }
                                    }
                                #del
                                    {
                                        app.ui.display_modal.generic_confirm("Update Resource", `Deassociate domain "${del.domain_sub === '' ? '' : del.domain_sub + '.'}${del.domain_name}" from this resource?`, (result) => {
                                            if (result) {
                                                setTimeout(_ => {
                                                    app.ws.api.deassociate_resource_domain(block.parent(2).key('resource')._id, del.domain_string);
                                                }, 10);
                                                return true;
                                            }
                                        });
                                    }
                                #domain_details
                                    {
                                        var children = block.children();
                                        for (var d in domain_details) {
                                            for (var c in children) {
                                                var domain_detail = domain_details[d];
                                                //console.log(children[c].key('id'), domain_detail._id);
                                                if (domain_detail._id == children[c].key('id')) {
                                                    children[c].data(domain_detail)
                                                }
                                            }
                                        }
                                    }
                                #domains
                                    {
                                        if (domains == undefined || !domains)
                                            domains = [];
                                        //console.log('domain update', domains);
                                        if (domains.length <= 0) {
                                            block.data({'clear_children': {}});
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'center',
                                                    paddingTop: '15px',
                                                    paddingBottom: '10px',
                                                    minHeight: '45px',
                                                    borderTop: 'none',
                                                })
                                                .add(Block('text', 1)
                                                    .html('No domains associated with resource.')
                                                    .css({
                                                        letterSpacing: '1.3px',
                                                        fontSize: '16px',
                                                        color: '#333',
                                                        fontStyle: 'italic',
                                                    })
                                                )
                                            ;
                                        } else {
                                            block.data({'clear_children': {}});
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'left',
                                                    paddingTop: '0',
                                                    paddingBottom: '0',
                                                    minHeight: '105px',
                                                    borderTop: '1px solid #f6f6f6',
                                                })
                                            ;
                                            var primary_domain = block.key('primary');
                                            var first = true;
                                            for (var d in domains) {
                                                var domain_string = domains[d];
                                                var domain_id = domain_string;
                                                var domain_sub = '';
                                                if (domain_string.includes('.')) {
                                                    domain_id = domain_string.split('.')[0];
                                                    domain_sub = domain_string.slice(domain_string.indexOf('.') + 1);
                                                }
                                                var primary_domain_sel = primary_domain && (primary_domain === domain_string);
                                                block.add(Block('resource-domain-list-item', `resource_domain_${domains[d]}_${d}`)
                                                    .data({
                                                        idx: d,
                                                        _id: domain_id,
                                                        sub: domain_sub,
                                                        domain_string: domains[d],
                                                        selected: primary_domain_sel,
                                                        first: first,
                                                    })
                                                );
                                                first = false;
                                            }
                                        }
                                        block.parent(2).on('update_grid');
                                        setTimeout(_ => {
                                            Block.queries();
                                        }, 10);
                                        setTimeout(_ => {
                                            app.ws.api.get_domains();
                                        }, 10);
                                    }
                                #clear_children
                                    {
                                        var children = block.children();
                                        for (var c in children) {
                                            block.remove(c);
                                        }
                                    }
                                #update_item
                                    {
                                        var domains = JSON.parse(JSON.stringify(block.parent(2).key('resource').domains));
                                        var primary_domain = block.parent(2).key('resource').primary_domain;
                                        update_item.idx = parseInt(update_item.idx);
                                        var domain_old = domains[update_item.idx];
                                        domains[update_item.idx] = `${update_item.id}${update_item.sub === '' ? '' : '.' + update_item.sub}`;
                                        var update_obj = {};
                                        if (domain_old === primary_domain) {
                                            update_obj['primary_domain'] = domains[update_item.idx];
                                        }
                                        update_obj['domains'] = domains;
                                        setTimeout(_ => {
                                            block.parent(2).on('send_resource_update', update_obj);
                                        }, 10);
                                    }
                            div end_spacer
                                css
                                    height 40px
                        div resource_apps
                            class dashboard_detail_section
                            css
                                min-height 100px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Applications
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/api_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                    height 80px
                            div list
                                css
                                    //background-color red
                                    width 100%
                                    max-height 250px
                                    height auto
                                    min-height 45px
                                    overflow-x none
                                    overflow-y auto
                                #manage
                                    {
                                        setTimeout(_ => {
                                            app.ws.api.get_applications(manage);
                                        }, 30);
                                    }
                                #applications
                                    {
                                        if (applications.length <= 0) {
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'center',
                                                    paddingTop: '15px',
                                                    paddingBottom: '10px',
                                                    minHeight: '45px',
                                                    borderTop: 'none',
                                                })
                                                .add(Block('text', 1)
                                                    .html('No applications found on resource.')
                                                    .css({
                                                        letterSpacing: '1.3px',
                                                        fontSize: '16px',
                                                        color: '#333',
                                                        fontStyle: 'italic',
                                                    })
                                                )
                                            ;
                                        } else {
                                            block
                                                .html('')
                                                .css({
                                                    textAlign: 'left',
                                                    paddingTop: '0',
                                                    paddingBottom: '0',
                                                    minHeight: '105px',
                                                    borderTop: '1px solid #f6f6f6',
                                                })
                                            ;
                                            applications = applications.sort((a, b) => {
                                                var port_a = app.main.extract_port(a.port);
                                                var port_b = app.main.extract_port(b.port);
                                                return (port_a < port_b ? -1 : (port_b < port_a ? 1 : (0)));
                                            })
                                            var first = true;
                                            for (var a in applications) {
                                                var application = applications[a];
                                                block.add(Block('resource-application-list-item', `resource_app_${application._id}`)
                                                    .data(application).data({
                                                        first: first
                                                    })
                                                );
                                                first = false;
                                            }
                                        }
                                        block.parent(2).on('update_grid');
                                        setTimeout(_ => {
                                            Block.queries();
                                        }, 10);
                                    }
                            div end_spacer
                                css
                                    height 40px
                        div resource_daemon
                            class dashboard_detail_section
                            css
                                min-height 200px
                            div title
                                css
                                    height auto
                                    min-height 50px
                                    width 100%
                                    position absolute
                                    top 24px
                                    left 0
                                text text
                                    val Daemon
                                    css
                                        position absolute
                                        font-size 27px
                                        letter-spacing 1px
                                        opacity 0.95
                                        top 7px
                                        left 85px
                                        font-weight 400
                                image icon
                                    src /img/gear_b.png
                                    height 35px
                                    width 35px
                                    css
                                        position absolute
                                        top 1px
                                        left 28px
                                        opacity 0.6
                            div spacer
                                css
                                     height 80px
                            div daemon_key
                                class value_edge
                                css
                                    margin-bottom 20px
                                text label
                                    val Key
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                block value
                                    {
                                        block.__child('content').css('text-align', 'left');
                                    }
                                    class value_text_wrap
                                    css
                                        height 25.2px
                                    text text
                                        val a1cd4
                                        class value_text
                                        css
                                            letter-spacing 1.4px
                                            font-size 24px
                                    :mouseover
                                        {
                                            if (block.child('edit_button').key('showing') == 'off')
                                                block.child('edit_button').on('show');
                                        }
                                    :mouseout
                                        {
                                            if (block.child('edit_button').key('showing') == 'on')
                                                block.child('edit_button').on('hide');
                                        }
                                    edit-button edit_button
                                        // this is an edit button
                                        css
                                            margin-left 12px
                                            padding-top 4px
                                        :click
                                            {
                                                //block.parent(2).data('');
                                                block.parent().css('display', 'none')
                                                    .sibling('value_editor').css('display', 'block');
                                                //console.log(block.parent(4).key('resource').daemon_key);
                                                block.parent().sibling('value_editor').node().value = block.parent(4).key('resource').daemon_key;
                                                setTimeout(_ => {
                                                    block.parent().sibling('value_editor').node().select();
                                                }, 15);
                                            }
                                input value_editor
                                    class value_editor
                                    placeholder a1cd4
                                    css
                                        display none
                                        height 27px
                                        margin-top -2px
                                        margin-left -2px
                                        margin-bottom 2px
                                        width 55%
                                        letter-spacing 1.4px
                                        font-size 24px
                                    :hide
                                        {
                                            block.css('display', 'none').sibling('value').css('display', 'table');
                                            event.stopPropagation();
                                        }
                                    :keyup
                                        {
                                            if (event.keyCode == 13) {
                                                // enter
                                                var value = block.node().value;
                                                if (!value) value = '';
                                                value = (`${value}`).trim();
                                                if (value.length > 0) {
                                                    block.parent(3).on('send_resource_update', {
                                                        daemon_key: value
                                                    });
                                                }
                                                setTimeout(_ => { block.on('hide'); }, 250);
                                            } else if (event.keyCode == 27) {
                                                // escape
                                                block.on('hide');
                                            }
                                        }
                            div status
                                class value_edge
                                css
                                    margin-bottom 20px
                                :status_update
                                    {
                                        var status_code = block.key('status');
                                        var status_time = block.key('status_time');
                                        var status_final_text = "Status some time ago";
                                        var status_final_color = app.ui.colors.status.default;
                                        if (status_code != null && status_time != null) {
                                            status_final_text = status_code.charAt(0).toUpperCase() + status_code.slice(1) + " " + (status_code == "online" ? "now" : util.duration_desc(status_time));
                                            status_final_color = app.ui.get_status_color(status_code);
                                        }
                                        block.child('value/labels/status/text').html('').data(status_final_text);
                                        block.child('value/light/circle').css('background-color', status_final_color);
                                        event.stopPropagation();
                                    }
                                text label
                                    val Status
                                    class label_desc
                                    css
                                        margin-bottom 3px
                                div value
                                    class value_text_wrap
                                    css
                                        height 32px
                                        width 100%
                                    block light
                                        css
                                            width 30px
                                            height 100%
                                            float left
                                        div circle
                                            css
                                                border-radius 100%
                                                height 17px
                                                width 17px
                                                background-color #ddd
                                                border 1px solid #eee
                                                margin 0 0 0 auto
                                    div labels
                                        css
                                            width 73%
                                            height 100%
                                            float left
                                            padding-left 18px
                                            box-sizing border-box
                                        block status
                                            css
                                                height 100%
                                                width 100%
                                            text text
                                                val Status some time ago
                                                css
                                                    display block
                                                    text-align left
                                                    font-size 14px
                                                    color #888
                                                    font-style italic
                                                    //padding-top 2px
                            div end_spacer
                                css
                                    height 15px
                        
            div ideas
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            app.ws.api.get_ideas();
                        }, 20);
                    }
                :hide
                    css
                        display none
                button new_idea_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                    class mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                    {
                        block.css("background-color", app.ui.colors.primary);
                    }
                div idea_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Ideas
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.7
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                div content
                    css
                        width 100%
                        height auto
                        text-align center
                        padding-top 15px
                        padding-left 10px
                        padding-right 10px
                        box-sizing border-box
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch
            
            div sitemap
                css
                    width 100%
                    height auto
                    display none
                    min-height 50px
                    position relative
                :show
                    css
                        display block
                    {
                        setTimeout(_ => {
                            app.ws.api.get_sitemap();
                        }, 20);
                    }
                :hide
                    css
                        display none
                button new_sitemap_button
                    css
                        position absolute
                        top 19px
                        right 15px
                        z-index 11
                        min-width 42px
                        width 42px
                        height 42px
                        border none
                        outline none
                        display none
                    class mdl-button mdl-js-button mdl-button--fab mdl-js-ripple-effect mdl-button--colored mdl-button--primary new_project_button
                    div content
                        text text
                            val +
                    {
                        block.css("background-color", app.ui.colors.primary);
                    }
                div sitemap_filter
                    css
                        position absolute
                        top 23px
                        right 80px
                        z-index 11
                        display none
                    select filter_options
                        css
                            height 35px
                            width 110px
                            padding 0px 10px
                            letter-spacing 0.9px
                        option all
                            value all
                            html All
                div title
                    css
                        position absolute
                        top 34px
                        left 15px
                        z-index 11
                    text text
                        css
                            font-size 30px
                            color #333
                        val Sitemap
                div divider
                    css
                        //width 100%
                        box-sizing border-box
                        margin 0 10px
                        padding-top 58px
                        opacity 0.75
                        position relative
                        z-index 10
                    hr hr
                        css
                            width 100%
                div content
                    css
                        width 100%
                        height auto
                        text-align center
                        padding-top 15px
                        padding-left 10px
                        padding-right 10px
                        box-sizing border-box
                        overflow-x hidden
                        overflow-y auto
                        -webkit-overflow-scrolling touch